{
  "version": 3,
  "sources": ["../../@melt-ui/svelte/dist/internal/helpers/array.js", "../../@melt-ui/svelte/dist/internal/helpers/style.js", "../../@melt-ui/svelte/dist/internal/helpers/attr.js", "../../@melt-ui/svelte/dist/internal/helpers/store/lightable.js", "../../@melt-ui/svelte/dist/internal/helpers/builder.js", "../../@melt-ui/svelte/dist/internal/helpers/is.js", "../../@melt-ui/svelte/dist/internal/helpers/dom.js", "../../@melt-ui/svelte/dist/internal/helpers/callbacks.js", "../../@melt-ui/svelte/dist/internal/helpers/event.js", "../../@melt-ui/svelte/dist/internal/helpers/highlight.js", "../../@melt-ui/svelte/dist/internal/helpers/list.js", "../../@melt-ui/svelte/dist/internal/helpers/locale.js", "../../@melt-ui/svelte/dist/internal/helpers/object.js", "../../@melt-ui/svelte/dist/internal/helpers/overridable.js", "../../@melt-ui/svelte/dist/internal/helpers/sleep.js", "../../@melt-ui/svelte/node_modules/nanoid/non-secure/index.js", "../../@melt-ui/svelte/dist/internal/helpers/id.js", "../../@melt-ui/svelte/dist/internal/helpers/keyboard.js", "../../@melt-ui/svelte/dist/internal/helpers/debounce.js", "../../@melt-ui/svelte/dist/internal/helpers/platform.js", "../../@melt-ui/svelte/dist/internal/helpers/polygon/hull.js", "../../@melt-ui/svelte/dist/internal/helpers/polygon/index.js", "../../@melt-ui/svelte/dist/internal/helpers/scroll.js", "../../@melt-ui/svelte/dist/internal/helpers/store/derivedVisible.js", "../../@melt-ui/svelte/dist/internal/helpers/lifecycle.js", "../../@melt-ui/svelte/dist/internal/helpers/store/derivedWithUnsubscribe.js", "../../@melt-ui/svelte/dist/internal/helpers/store/effect.js", "../../@melt-ui/svelte/dist/internal/helpers/store/toWritableStores.js", "../../@melt-ui/svelte/dist/internal/helpers/rovingFocus.js", "../../@melt-ui/svelte/dist/internal/helpers/typeahead.js", "../../@melt-ui/svelte/dist/internal/helpers/elements.js", "../../@melt-ui/svelte/dist/internal/helpers/ignore.js", "../../@melt-ui/svelte/dist/internal/helpers/focus.js", "../../@melt-ui/svelte/dist/internal/helpers/math.js", "../../@melt-ui/svelte/dist/builders/accordion/create.js", "../../@melt-ui/svelte/dist/builders/avatar/create.js", "../../@melt-ui/svelte/dist/builders/checkbox/create.js", "../../@melt-ui/svelte/dist/builders/collapsible/create.js", "../../@melt-ui/svelte/dist/internal/actions/click-outside/action.js", "../../@melt-ui/svelte/dist/internal/actions/escape-keydown/action.js", "../../@melt-ui/svelte/dist/internal/actions/floating/action.js", "../../@melt-ui/svelte/dist/internal/actions/focus-trap/action.js", "../../@melt-ui/svelte/dist/internal/actions/melt/index.js", "../../@melt-ui/svelte/dist/internal/actions/popper/action.js", "../../@melt-ui/svelte/dist/internal/actions/portal.js", "../../@melt-ui/svelte/dist/builders/label/create.js", "../../@melt-ui/svelte/dist/builders/listbox/create.js", "../../@melt-ui/svelte/dist/builders/combobox/create.js", "../../@melt-ui/svelte/dist/builders/menu/create.js", "../../@melt-ui/svelte/dist/builders/context-menu/create.js", "../../@melt-ui/svelte/dist/internal/helpers/date/utils.js", "../../@melt-ui/svelte/dist/internal/helpers/date/formatter.js", "../../@melt-ui/svelte/dist/internal/helpers/date/store.js", "../../@melt-ui/svelte/dist/internal/helpers/date/placeholders.js", "../../@melt-ui/svelte/dist/internal/helpers/date/announcer.js", "../../@melt-ui/svelte/dist/builders/date-field/_internal/parts.js", "../../@melt-ui/svelte/dist/builders/date-field/_internal/helpers.js", "../../@melt-ui/svelte/dist/internal/helpers/date/field.js", "../../@melt-ui/svelte/dist/internal/helpers/date/calendar.js", "../../@melt-ui/svelte/dist/builders/calendar/create.js", "../../@melt-ui/svelte/dist/builders/date-field/create.js", "../../@melt-ui/svelte/dist/internal/helpers/date/focus.js", "../../@melt-ui/svelte/dist/builders/date-picker/create.js", "../../@melt-ui/svelte/dist/builders/date-range-field/_internal/helpers.js", "../../@melt-ui/svelte/dist/builders/date-range-field/create.js", "../../@melt-ui/svelte/dist/builders/date-range-picker/create.js", "../../@melt-ui/svelte/dist/builders/dialog/create.js", "../../@melt-ui/svelte/dist/builders/dropdown-menu/create.js", "../../@melt-ui/svelte/dist/builders/link-preview/create.js", "../../@melt-ui/svelte/dist/builders/menubar/create.js", "../../@melt-ui/svelte/dist/builders/pagination/helpers.js", "../../@melt-ui/svelte/dist/builders/pagination/create.js", "../../@melt-ui/svelte/dist/builders/pin-input/create.js", "../../@melt-ui/svelte/dist/builders/popover/create.js", "../../@melt-ui/svelte/dist/builders/progress/create.js", "../../@melt-ui/svelte/dist/builders/radio-group/create.js", "../../@melt-ui/svelte/dist/builders/range-calendar/create.js", "../../@melt-ui/svelte/dist/builders/select/create.js", "../../@melt-ui/svelte/dist/builders/separator/create.js", "../../@melt-ui/svelte/dist/builders/slider/create.js", "../../@melt-ui/svelte/dist/builders/switch/create.js", "../../@melt-ui/svelte/dist/builders/tabs/create.js", "../../@melt-ui/svelte/dist/builders/table-of-contents/create.js", "../../@melt-ui/svelte/dist/builders/tags-input/helpers.js", "../../@melt-ui/svelte/dist/builders/tags-input/create.js", "../../@melt-ui/svelte/dist/builders/toast/create.js", "../../@melt-ui/svelte/dist/builders/toggle/create.js", "../../@melt-ui/svelte/dist/builders/toggle-group/create.js", "../../@melt-ui/svelte/dist/builders/toolbar/create.js", "../../@melt-ui/svelte/dist/builders/tooltip/create.js", "../../@melt-ui/svelte/dist/builders/tree/create.js"],
  "sourcesContent": ["import { dequal as deepEqual } from 'dequal';\n/**\n * Returns the element some number before the given index. If the target index is out of bounds:\n *   - If looping is disabled, the first element will be returned.\n *   - If looping is enabled, the last element will be returned.\n * @param array the array.\n * @param currentIndex the index of the current element.\n * @param increment the number of elements to move forward.\n * @param loop loop to the beginning of the array if the target index is out of bounds?\n */\nexport function back(array, index, increment, loop = true) {\n    const previousIndex = index - increment;\n    if (previousIndex <= 0) {\n        return loop ? array[array.length - 1] : array[0];\n    }\n    return array[previousIndex];\n}\n/**\n * Returns the element some number after the given index. If the target index is out of bounds:\n *   - If looping is disabled, the last element will be returned.\n *   - If looping is enabled, the first element will be returned.\n * @param array the array.\n * @param currentIndex the index of the current element.\n * @param increment the number of elements to move forward.\n * @param loop loop to the beginning of the array if the target index is out of bounds?\n */\nexport function forward(array, index, increment, loop = true) {\n    const nextIndex = index + increment;\n    if (nextIndex > array.length - 1) {\n        return loop ? array[0] : array[array.length - 1];\n    }\n    return array[nextIndex];\n}\n/**\n * Returns the array element after to the given index.\n * @param array the array.\n * @param currentIndex the index of the current element.\n * @param loop loop to the beginning of the array if the next index is out of bounds?\n */\nexport function next(array, index, loop = true) {\n    if (index === array.length - 1) {\n        return loop ? array[0] : array[index];\n    }\n    return array[index + 1];\n}\n/**\n * Returns the array element prior to the given index.\n * @param array the array.\n * @param currentIndex the index of the current element.\n * @param loop loop to the end of the array if the previous index is out of bounds?\n */\nexport function prev(array, currentIndex, loop = true) {\n    if (currentIndex <= 0) {\n        return loop ? array[array.length - 1] : array[0];\n    }\n    return array[currentIndex - 1];\n}\n/**\n * Returns the last element in an array.\n * @param array the array.\n */\nexport function last(array) {\n    return array[array.length - 1];\n}\n/**\n * Wraps an array around itself at a given starting index.\n * @example ```ts\n * wrapArray(['a', 'b', 'c', 'd'], 2);\n * // ['c', 'd', 'a', 'b']\n * ```\n * @see https://github.com/radix-ui/primitives\n */\nexport function wrapArray(array, startIndex) {\n    return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\n/**\n * Toggles an item in an array. If the item is already in the array,\n * it is removed. Otherwise, it is added.\n * @param item The item to toggle.\n * @param array The array to toggle the item in.\n * @returns The updated array with the item toggled.\n * @template T The type of the items in the array.\n * @example ```typescript\n * const arr = [1, 2, 3];\n * const newArr = toggle(2, arr);\n * // newArr = [1, 3]\n * ```\n */\nexport function toggle(item, array, compare = deepEqual) {\n    const itemIdx = array.findIndex((innerItem) => compare(innerItem, item));\n    if (itemIdx !== -1) {\n        array.splice(itemIdx, 1);\n    }\n    else {\n        array.push(item);\n    }\n    return array;\n}\n/**\n * Splits an array into chunks of a given size.\n * @param arr The array to split.\n * @param size The size of each chunk.\n * @returns An array of arrays, where each sub-array has `size` elements from the original array.\n * @example ```ts\n * const arr = [1, 2, 3, 4, 5, 6, 7, 8];\n * const chunks = chunk(arr, 3);\n * // chunks = [[1, 2, 3], [4, 5, 6], [7, 8]]\n * ```\n */\nexport function chunk(arr, size) {\n    const result = [];\n    for (let i = 0; i < arr.length; i += size) {\n        result.push(arr.slice(i, i + size));\n    }\n    return result;\n}\n/**\n * Checks if the given index is valid for the given array.\n *\n * @param index - The index to check\n * @param arr - The array to check\n */\nexport function isValidIndex(index, arr) {\n    return index >= 0 && index < arr.length;\n}\n", "/**\n * A utility function that converts a style object to a string.\n *\n * @param style - The style object to convert\n * @returns The style object as a string\n */\nexport function styleToString(style) {\n    return Object.keys(style).reduce((str, key) => {\n        if (style[key] === undefined)\n            return str;\n        return str + `${key}:${style[key]};`;\n    }, '');\n}\n", "import { styleToString } from './style.js';\nexport function disabledAttr(disabled) {\n    return disabled ? true : undefined;\n}\nexport const hiddenInputAttrs = {\n    type: 'hidden',\n    'aria-hidden': true,\n    hidden: true,\n    tabIndex: -1,\n    style: styleToString({\n        position: 'absolute',\n        opacity: 0,\n        'pointer-events': 'none',\n        margin: 0,\n        transform: 'translateX(-100%)',\n    }),\n};\n", "export function lightable(value) {\n    function subscribe(run) {\n        run(value);\n        return () => {\n            // don't need to unsub from anything\n        };\n    }\n    return { subscribe };\n}\n", "import { derived } from 'svelte/store';\nimport { isBrowser, isHTMLElement, noop } from './index.js';\nimport { lightable } from './store/lightable.js';\nexport function getElementByMeltId(id) {\n    if (!isBrowser)\n        return null;\n    const el = document.querySelector(`[data-melt-id=\"${id}\"]`);\n    return isHTMLElement(el) ? el : null;\n}\nexport const hiddenAction = (obj) => {\n    return new Proxy(obj, {\n        get(target, prop, receiver) {\n            return Reflect.get(target, prop, receiver);\n        },\n        ownKeys(target) {\n            return Reflect.ownKeys(target).filter((key) => key !== 'action');\n        },\n    });\n};\nconst isFunctionWithParams = (fn) => {\n    return typeof fn === 'function';\n};\nexport function builder(name, args) {\n    const { stores, action, returned } = args ?? {};\n    const derivedStore = (() => {\n        if (stores && returned) {\n            // If stores are provided, create a derived store from them\n            return derived(stores, (values) => {\n                const result = returned(values);\n                if (isFunctionWithParams(result)) {\n                    const fn = (...args) => {\n                        return hiddenAction({\n                            ...result(...args),\n                            [`data-melt-${name}`]: '',\n                            action: action ?? noop,\n                        });\n                    };\n                    fn.action = action ?? noop;\n                    return fn;\n                }\n                return hiddenAction({\n                    ...result,\n                    [`data-melt-${name}`]: '',\n                    action: action ?? noop,\n                });\n            });\n        }\n        else {\n            // If stores are not provided, return a lightable store, for consistency\n            const returnedFn = returned;\n            const result = returnedFn?.();\n            if (isFunctionWithParams(result)) {\n                const resultFn = (...args) => {\n                    return hiddenAction({\n                        ...result(...args),\n                        [`data-melt-${name}`]: '',\n                        action: action ?? noop,\n                    });\n                };\n                resultFn.action = action ?? noop;\n                return lightable(resultFn);\n            }\n            return lightable(hiddenAction({\n                ...result,\n                [`data-melt-${name}`]: '',\n                action: action ?? noop,\n            }));\n        }\n    })();\n    const actionFn = (action ??\n        (() => {\n            /** noop */\n        }));\n    actionFn.subscribe = derivedStore.subscribe;\n    return actionFn;\n}\nexport function createElHelpers(prefix) {\n    const name = (part) => (part ? `${prefix}-${part}` : prefix);\n    const attribute = (part) => `data-melt-${prefix}${part ? `-${part}` : ''}`;\n    const selector = (part) => `[data-melt-${prefix}${part ? `-${part}` : ''}]`;\n    const getEl = (part) => document.querySelector(selector(part));\n    return {\n        name,\n        attribute,\n        selector,\n        getEl,\n    };\n}\n", "export const isBrowser = typeof document !== 'undefined';\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const isFunction = (v) => typeof v === 'function';\nexport const isLetter = (key) => /^[a-z]$/i.test(key);\nexport function isElement(element) {\n    return element instanceof Element;\n}\nexport function isHTMLElement(element) {\n    return element instanceof HTMLElement;\n}\nexport function isHTMLInputElement(element) {\n    return element instanceof HTMLInputElement;\n}\nexport function isHTMLLabelElement(element) {\n    return element instanceof HTMLLabelElement;\n}\nexport function isHTMLButtonElement(element) {\n    return element instanceof HTMLButtonElement;\n}\nexport function isElementDisabled(element) {\n    const ariaDisabled = element.getAttribute('aria-disabled');\n    const disabled = element.getAttribute('disabled');\n    const dataDisabled = element.hasAttribute('data-disabled');\n    if (ariaDisabled === 'true' || disabled !== null || dataDisabled) {\n        return true;\n    }\n    return false;\n}\nexport function isTouch(event) {\n    return event.pointerType === 'touch';\n}\nexport function isLeftClick(event) {\n    return event.button === 0 && event.ctrlKey === false && event.metaKey === false;\n}\nexport function isFocusVisible(element) {\n    return element.matches(':focus-visible');\n}\nexport function isContentEditable(element) {\n    if (!isHTMLElement(element))\n        return false;\n    return element.isContentEditable;\n}\nexport function isNull(value) {\n    return value === null;\n}\nexport function isNumberString(value) {\n    if (isNaN(parseInt(value)))\n        return false;\n    return true;\n}\nexport function isObject(value) {\n    return value !== null && typeof value === 'object';\n}\nexport function isReadable(value) {\n    return isObject(value) && 'subscribe' in value;\n}\nexport function isWritable(value) {\n    return isReadable(value) && 'subscribe' in value;\n}\n", "import { isHTMLElement } from './is.js';\nexport function focus(element) {\n    if (isHTMLElement(element)) {\n        element.focus();\n    }\n    else if (typeof element === 'string') {\n        const el = document.querySelector(element);\n        if (!el)\n            return;\n        el.focus();\n    }\n}\n/**\n * Returns a list of nodes that can be in the tab sequence.\n * @see: https://developer.mozilla.org/en-US/docs/Web/API/TreeWalker\n */\nexport function getTabbableNodes(container) {\n    const nodes = [];\n    const walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, {\n        acceptNode: (node) => {\n            // `.tabIndex` is not the same as the `tabindex` attribute. It works on the\n            // runtime's understanding of tabbability, so this automatically accounts\n            // for any kind of element that could be tabbed to.\n            return node.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n        },\n    });\n    while (walker.nextNode()) {\n        nodes.push(walker.currentNode);\n    }\n    return nodes;\n}\nexport function isHidden(el) {\n    return el.offsetParent === null;\n}\n", "/**\n * Executes an array of callback functions with the same arguments.\n * @template T The types of the arguments that the callback functions take.\n * @param n array of callback functions to execute.\n * @returns A new function that executes all of the original callback functions with the same arguments.\n */\nexport function executeCallbacks(...callbacks) {\n    return (...args) => {\n        for (const callback of callbacks) {\n            if (typeof callback === 'function') {\n                callback(...args);\n            }\n        }\n    };\n}\n/**\n * A no operation function (does nothing)\n */\nexport function noop() {\n    //\n}\n", "import { noop } from './callbacks.js';\nimport { isHTMLElement } from './is.js';\n/**\n * Adds an event listener to the specified target element(s) for the given event(s), and returns a function to remove it.\n * @param target The target element(s) to add the event listener to.\n * @param event The event(s) to listen for.\n * @param handler The function to be called when the event is triggered.\n * @param options An optional object that specifies characteristics about the event listener.\n * @returns A function that removes the event listener from the target element(s).\n */\nexport function addEventListener(target, event, handler, options) {\n    const events = Array.isArray(event) ? event : [event];\n    // Add the event listener to each specified event for the target element(s).\n    events.forEach((_event) => target.addEventListener(_event, handler, options));\n    // Return a function that removes the event listener from the target element(s).\n    return () => {\n        events.forEach((_event) => target.removeEventListener(_event, handler, options));\n    };\n}\nexport function addMeltEventListener(target, event, handler, options) {\n    const events = Array.isArray(event) ? event : [event];\n    if (typeof handler === 'function') {\n        const handlerWithMelt = withMelt((_event) => handler(_event));\n        // Add the event listener to each specified event for the target element(s).\n        events.forEach((_event) => target.addEventListener(_event, handlerWithMelt, options));\n        // Return a function that removes the event listener from the target element(s).\n        return () => {\n            events.forEach((_event) => target.removeEventListener(_event, handlerWithMelt, options));\n        };\n    }\n    return () => noop();\n}\nexport function dispatchMeltEvent(originalEvent) {\n    const node = originalEvent.currentTarget;\n    if (!isHTMLElement(node))\n        return null;\n    const customMeltEvent = new CustomEvent(`m-${originalEvent.type}`, {\n        detail: {\n            originalEvent,\n        },\n        cancelable: true,\n    });\n    node.dispatchEvent(customMeltEvent);\n    return customMeltEvent;\n}\nexport function withMelt(handler) {\n    return (event) => {\n        const customEvent = dispatchMeltEvent(event);\n        if (customEvent?.defaultPrevented)\n            return;\n        return handler(event);\n    };\n}\n", "export function addHighlight(element) {\n    element.setAttribute('data-highlighted', '');\n}\nexport function removeHighlight(element) {\n    element.removeAttribute('data-highlighted');\n}\n", "import { isHTMLElement } from './is.js';\n/** Retrieves all option descendants of a given element. */\nexport function getOptions(el) {\n    return Array.from(el.querySelectorAll('[role=\"option\"]:not([data-disabled])')).filter((el) => isHTMLElement(el));\n}\n/** Retrieves the first option descendant of a given element. */\nexport function getFirstOption(el) {\n    const firstOption = el.querySelector('[role=\"option\"]:not([data-disabled])');\n    return isHTMLElement(firstOption) ? firstOption : null;\n}\n", "/**\n * Detects the text direction in the element.\n * @returns {TextDirection} The text direction ('ltr' for left-to-right or 'rtl' for right-to-left).\n */\nexport function getElemDirection(elem) {\n    const style = window.getComputedStyle(elem);\n    const direction = style.getPropertyValue('direction');\n    return direction;\n}\n", "import { dequal } from 'dequal';\nexport function omit(obj, ...keys) {\n    const result = {};\n    for (const key of Object.keys(obj)) {\n        if (!keys.includes(key)) {\n            result[key] = obj[key];\n        }\n    }\n    return result;\n}\nexport function stripValues(inputObject, toStrip, recursive) {\n    return Object.fromEntries(Object.entries(inputObject).filter(([_, value]) => !dequal(value, toStrip)));\n}\n", "export const overridable = (store, onChange) => {\n    const update = (updater, sideEffect) => {\n        store.update((curr) => {\n            const next = updater(curr);\n            let res = next;\n            if (onChange) {\n                res = onChange({ curr, next });\n            }\n            sideEffect?.(res);\n            return res;\n        });\n    };\n    const set = (curr) => {\n        update(() => curr);\n    };\n    return {\n        ...store,\n        update,\n        set,\n    };\n};\n", "export function sleep(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n}\n", "let urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport let customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let i = size\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n", "import { nanoid } from 'nanoid/non-secure';\n/**\n * A function that generates a random id\n * @returns An id\n */\nexport function generateId() {\n    return nanoid(10);\n}\nexport function generateIds(args) {\n    return args.reduce((acc, curr) => {\n        acc[curr] = generateId();\n        return acc;\n    }, {});\n}\nexport function stringifiedIdObjType(args) {\n    return `Record<${args.map((arg) => `\"${arg}\"`).join(' | ')}, string>`;\n}\n", "/**\n * A constant object that maps commonly used keyboard keys to their corresponding string values.\n * This object can be used in other parts of the application to handle keyboard input and prevent\n * hard-coded strings throughout.\n */\nexport const kbd = {\n    ALT: 'Alt',\n    ARROW_DOWN: 'ArrowDown',\n    ARROW_LEFT: 'ArrowLeft',\n    ARROW_RIGHT: 'ArrowRight',\n    ARROW_UP: 'ArrowUp',\n    BACKSPACE: 'Backspace',\n    CAPS_LOCK: 'CapsLock',\n    CONTROL: 'Control',\n    DELETE: 'Delete',\n    END: 'End',\n    ENTER: 'Enter',\n    ESCAPE: 'Escape',\n    F1: 'F1',\n    F10: 'F10',\n    F11: 'F11',\n    F12: 'F12',\n    F2: 'F2',\n    F3: 'F3',\n    F4: 'F4',\n    F5: 'F5',\n    F6: 'F6',\n    F7: 'F7',\n    F8: 'F8',\n    F9: 'F9',\n    HOME: 'Home',\n    META: 'Meta',\n    PAGE_DOWN: 'PageDown',\n    PAGE_UP: 'PageUp',\n    SHIFT: 'Shift',\n    SPACE: ' ',\n    TAB: 'Tab',\n    CTRL: 'Control',\n    ASTERISK: '*',\n    A: 'a',\n    P: 'p',\n};\n/** Key sets for navigation within lists, such as select, menu, and combobox. */\nexport const FIRST_KEYS = [kbd.ARROW_DOWN, kbd.PAGE_UP, kbd.HOME];\nexport const LAST_KEYS = [kbd.ARROW_UP, kbd.PAGE_DOWN, kbd.END];\nexport const FIRST_LAST_KEYS = [...FIRST_KEYS, ...LAST_KEYS];\nexport const SELECTION_KEYS = [kbd.ENTER, kbd.SPACE];\nexport const getNextKey = (dir = 'ltr', orientation = 'horizontal') => {\n    return {\n        horizontal: dir === 'rtl' ? kbd.ARROW_LEFT : kbd.ARROW_RIGHT,\n        vertical: kbd.ARROW_DOWN,\n    }[orientation];\n};\nexport const getPrevKey = (dir = 'ltr', orientation = 'horizontal') => {\n    return {\n        horizontal: dir === 'rtl' ? kbd.ARROW_RIGHT : kbd.ARROW_LEFT,\n        vertical: kbd.ARROW_UP,\n    }[orientation];\n};\nexport const getDirectionalKeys = (dir = 'ltr', orientation = 'horizontal') => {\n    return {\n        nextKey: getNextKey(dir, orientation),\n        prevKey: getPrevKey(dir, orientation),\n    };\n};\n", "export function debounce(fn, wait = 500) {\n    let timeout = null;\n    return function (...args) {\n        const later = () => {\n            timeout = null;\n            fn(...args);\n        };\n        timeout && clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n    };\n}\n", "export const isDom = () => typeof window !== 'undefined';\nexport function getPlatform() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const agent = navigator.userAgentData;\n    return (agent?.platform ?? navigator.platform);\n}\nconst pt = (v) => isDom() && v.test(getPlatform().toLowerCase());\nconst ua = (v) => isDom() && v.test(navigator.userAgent);\nconst vn = (v) => isDom() && v.test(navigator.vendor);\nexport const isTouchDevice = () => isDom() && !!navigator.maxTouchPoints;\nexport const isMac = () => pt(/^mac/) && !isTouchDevice();\nexport const isIPhone = () => pt(/^iphone/);\nexport const isSafari = () => isApple() && vn(/apple/i);\nexport const isFirefox = () => ua(/firefox\\//i);\nexport const isApple = () => pt(/mac|iphone|ipad|ipod/i);\nexport const isIos = () => isApple() && !isMac();\n", "/*\n * Convex hull algorithm - Library (TypeScript)\n *\n * Copyright (c) 2021 Project Nayuki\n * https://www.nayuki.io/page/convex-hull-algorithm\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program (see COPYING.txt and COPYING.LESSER.txt).\n * If not, see <http://www.gnu.org/licenses/>.\n */\n// Returns a new array of points representing the convex hull of\n// the given set of points. The convex hull excludes collinear points.\n// This algorithm runs in O(n log n) time.\nexport function makeHull(points) {\n    const newPoints = points.slice();\n    newPoints.sort(POINT_COMPARATOR);\n    return makeHullPresorted(newPoints);\n}\n// Returns the convex hull, assuming that each points[i] <= points[i + 1]. Runs in O(n) time.\nexport function makeHullPresorted(points) {\n    if (points.length <= 1)\n        return points.slice();\n    // Andrew's monotone chain algorithm. Positive y coordinates correspond to \"up\"\n    // as per the mathematical convention, instead of \"down\" as per the computer\n    // graphics convention. This doesn't affect the correctness of the result.\n    const upperHull = [];\n    for (let i = 0; i < points.length; i++) {\n        const p = points[i];\n        while (upperHull.length >= 2) {\n            const q = upperHull[upperHull.length - 1];\n            const r = upperHull[upperHull.length - 2];\n            if ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x))\n                upperHull.pop();\n            else\n                break;\n        }\n        upperHull.push(p);\n    }\n    upperHull.pop();\n    const lowerHull = [];\n    for (let i = points.length - 1; i >= 0; i--) {\n        const p = points[i];\n        while (lowerHull.length >= 2) {\n            const q = lowerHull[lowerHull.length - 1];\n            const r = lowerHull[lowerHull.length - 2];\n            if ((q.x - r.x) * (p.y - r.y) >= (q.y - r.y) * (p.x - r.x))\n                lowerHull.pop();\n            else\n                break;\n        }\n        lowerHull.push(p);\n    }\n    lowerHull.pop();\n    if (upperHull.length == 1 &&\n        lowerHull.length == 1 &&\n        upperHull[0].x == lowerHull[0].x &&\n        upperHull[0].y == lowerHull[0].y)\n        return upperHull;\n    else\n        return upperHull.concat(lowerHull);\n}\nexport function POINT_COMPARATOR(a, b) {\n    if (a.x < b.x)\n        return -1;\n    else if (a.x > b.x)\n        return +1;\n    else if (a.y < b.y)\n        return -1;\n    else if (a.y > b.y)\n        return +1;\n    else\n        return 0;\n}\n", "export * from './hull.js';\nimport { makeHull } from './hull.js';\nexport function getPointsFromEl(el) {\n    const rect = el.getBoundingClientRect();\n    return [\n        { x: rect.left, y: rect.top },\n        { x: rect.right, y: rect.top },\n        { x: rect.right, y: rect.bottom },\n        { x: rect.left, y: rect.bottom },\n    ];\n}\nexport function makeHullFromElements(els) {\n    const points = els.flatMap((el) => getPointsFromEl(el));\n    return makeHull(points);\n}\nexport function pointInPolygon(point, polygon) {\n    let inside = false;\n    for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n        const xi = polygon[i].x;\n        const yi = polygon[i].y;\n        const xj = polygon[j].x;\n        const yj = polygon[j].y;\n        const intersect = yi > point.y !== yj > point.y && point.x < ((xj - xi) * (point.y - yi)) / (yj - yi) + xi;\n        if (intersect)\n            inside = !inside;\n    }\n    return inside;\n}\n", "// Modified from @zag-js/remove-scroll v0.10.2 (2023-06-10)\n// Source: https://github.com/chakra-ui/zag\n// https://github.com/chakra-ui/zag/blob/main/packages/utilities/remove-scroll/src/index.ts\nimport { noop } from './callbacks.js';\nimport { isIos } from './platform.js';\nconst LOCK_CLASSNAME = 'data-melt-scroll-lock';\nfunction assignStyle(el, style) {\n    if (!el)\n        return;\n    const previousStyle = el.style.cssText;\n    Object.assign(el.style, style);\n    return () => {\n        el.style.cssText = previousStyle;\n    };\n}\nfunction setCSSProperty(el, property, value) {\n    if (!el)\n        return;\n    const previousValue = el.style.getPropertyValue(property);\n    el.style.setProperty(property, value);\n    return () => {\n        if (previousValue) {\n            el.style.setProperty(property, previousValue);\n        }\n        else {\n            el.style.removeProperty(property);\n        }\n    };\n}\nfunction getPaddingProperty(documentElement) {\n    // RTL <body> scrollbar\n    const documentLeft = documentElement.getBoundingClientRect().left;\n    const scrollbarX = Math.round(documentLeft) + documentElement.scrollLeft;\n    return scrollbarX ? 'paddingLeft' : 'paddingRight';\n}\nexport function removeScroll(_document) {\n    const doc = _document ?? document;\n    const win = doc.defaultView ?? window;\n    const { documentElement, body } = doc;\n    const locked = body.hasAttribute(LOCK_CLASSNAME);\n    if (locked)\n        return noop;\n    body.setAttribute(LOCK_CLASSNAME, '');\n    const scrollbarWidth = win.innerWidth - documentElement.clientWidth;\n    const setScrollbarWidthProperty = () => setCSSProperty(documentElement, '--scrollbar-width', `${scrollbarWidth}px`);\n    const paddingProperty = getPaddingProperty(documentElement);\n    const scrollbarSidePadding = win.getComputedStyle(body)[paddingProperty];\n    const setStyle = () => assignStyle(body, {\n        overflow: 'hidden',\n        [paddingProperty]: `calc(${scrollbarSidePadding} + ${scrollbarWidth}px)`,\n    });\n    // Only iOS doesn't respect `overflow: hidden` on document.body\n    const setIOSStyle = () => {\n        const { scrollX, scrollY, visualViewport } = win;\n        // iOS 12 does not support `visuaViewport`.\n        const offsetLeft = visualViewport?.offsetLeft ?? 0;\n        const offsetTop = visualViewport?.offsetTop ?? 0;\n        const restoreStyle = assignStyle(body, {\n            position: 'fixed',\n            overflow: 'hidden',\n            top: `${-(scrollY - Math.floor(offsetTop))}px`,\n            left: `${-(scrollX - Math.floor(offsetLeft))}px`,\n            right: '0',\n            [paddingProperty]: `calc(${scrollbarSidePadding} + ${scrollbarWidth}px)`,\n        });\n        return () => {\n            restoreStyle?.();\n            win.scrollTo(scrollX, scrollY);\n        };\n    };\n    const cleanups = [setScrollbarWidthProperty(), isIos() ? setIOSStyle() : setStyle()];\n    return () => {\n        cleanups.forEach((fn) => fn?.());\n        body.removeAttribute(LOCK_CLASSNAME);\n    };\n}\n", "import { derived } from 'svelte/store';\n/**\n * Helper function to standardize the way we derive a visible state for the\n * popper/floating elements.\n */\nexport function derivedVisible(obj) {\n    const { open, forceVisible, activeTrigger } = obj;\n    return derived([open, forceVisible, activeTrigger], ([$open, $forceVisible, $activeTrigger]) => ($open || $forceVisible) && $activeTrigger !== null);\n}\n", "import { onDestroy, onMount } from 'svelte';\nexport const safeOnMount = (fn) => {\n    try {\n        onMount(fn);\n    }\n    catch {\n        return fn();\n    }\n};\nexport const safeOnDestroy = (fn) => {\n    try {\n        onDestroy(fn);\n    }\n    catch {\n        return fn();\n    }\n};\n", "import { derived } from 'svelte/store';\nimport { safeOnDestroy } from '../lifecycle';\n/**\n * A utility function that creates a derived store that automatically\n * unsubscribes from its dependencies.\n *\n * @template S - The type of the stores object\n * @template T - The type of the derived store\n * @param stores - The stores object to derive from\n * @param fn - The function to derive the store from\n * @returns A derived store that automatically unsubscribes from its dependencies\n */\nexport function derivedWithUnsubscribe(stores, fn) {\n    let unsubscribers = [];\n    const onUnsubscribe = (cb) => {\n        unsubscribers.push(cb);\n    };\n    const unsubscribe = () => {\n        // Call all of the unsubscribe functions from the previous run of the function\n        unsubscribers.forEach((fn) => fn());\n        // Clear the list of unsubscribe functions\n        unsubscribers = [];\n    };\n    const derivedStore = derived(stores, ($storeValues) => {\n        unsubscribe();\n        return fn($storeValues, onUnsubscribe);\n    });\n    safeOnDestroy(unsubscribe);\n    const subscribe = (...args) => {\n        const unsub = derivedStore.subscribe(...args);\n        return () => {\n            unsub();\n            unsubscribe();\n        };\n    };\n    return {\n        ...derivedStore,\n        subscribe,\n    };\n}\n", "import { safeOnDestroy } from '../lifecycle';\nimport { derivedWithUnsubscribe } from './derivedWithUnsubscribe';\n/**\n * A utility function that creates an effect from a set of stores and a function.\n * The effect is automatically cleaned up when the component is destroyed.\n *\n * @template S - The type of the stores object\n * @param stores - The stores object to derive from\n * @param fn - The function to run when the stores change\n * @returns A function that can be used to unsubscribe the effect\n */\nexport function effect(stores, fn) {\n    // Create a derived store that contains the stores object and an onUnsubscribe function\n    const unsub = derivedWithUnsubscribe(stores, (stores, onUnsubscribe) => {\n        return {\n            stores,\n            onUnsubscribe,\n        };\n    }).subscribe(({ stores, onUnsubscribe }) => {\n        const returned = fn(stores);\n        // If the function returns a cleanup function, call it when the effect is unsubscribed\n        if (returned) {\n            onUnsubscribe(returned);\n        }\n    });\n    // Automatically unsubscribe the effect when the component is destroyed\n    safeOnDestroy(unsub);\n    return unsub;\n}\n", "import { writable } from 'svelte/store';\n/**\n * Given an object of properties, returns an object of writable stores\n * with the same properties and values.\n */\nexport function toWritableStores(properties) {\n    const result = {};\n    Object.keys(properties).forEach((key) => {\n        const propertyKey = key;\n        const value = properties[propertyKey];\n        result[propertyKey] = writable(value);\n    });\n    return result;\n}\n", "import { isBrowser, isHTMLElement } from './is.js';\nimport { sleep } from './sleep.js';\n/**\n * Manage roving focus between elements. Sets the current active element to\n * tabindex -1 and the next element to tabindex 0.\n *\n * @param nextElement The element to focus on\n */\nexport function handleRovingFocus(nextElement) {\n    if (!isBrowser)\n        return;\n    sleep(1).then(() => {\n        const currentFocusedElement = document.activeElement;\n        if (!isHTMLElement(currentFocusedElement) || currentFocusedElement === nextElement)\n            return;\n        currentFocusedElement.tabIndex = -1;\n        if (nextElement) {\n            nextElement.tabIndex = 0;\n            nextElement.focus();\n        }\n    });\n}\nfunction getFocusableElements() {\n    return Array.from(document.querySelectorAll('a[href]:not([tabindex=\"-1\"]), button:not([disabled]):not([tabindex=\"-1\"]), input:not([disabled]):not([tabindex=\"-1\"]), select:not([disabled]):not([tabindex=\"-1\"]), textarea:not([disabled]):not([tabindex=\"-1\"]), [tabindex]:not([tabindex=\"-1\"])'));\n}\nexport function getNextFocusable(currentElement) {\n    const focusableElements = getFocusableElements();\n    const currentIndex = focusableElements.indexOf(currentElement);\n    const nextIndex = currentIndex + 1;\n    const nextElement = focusableElements[nextIndex];\n    if (nextIndex < focusableElements.length && isHTMLElement(nextElement)) {\n        return nextElement;\n    }\n    return null;\n}\nexport function getPreviousFocusable(currentElement) {\n    const focusableElements = getFocusableElements();\n    const currentIndex = focusableElements.indexOf(currentElement);\n    const previousIndex = currentIndex - 1;\n    const prevElement = focusableElements[previousIndex];\n    if (previousIndex >= 0 && isHTMLElement(prevElement)) {\n        return prevElement;\n    }\n    return null;\n}\n", "import { get, writable } from 'svelte/store';\nimport { debounce } from './debounce.js';\nimport { handleRovingFocus } from './rovingFocus.js';\nimport { isHTMLElement } from './is.js';\nimport { wrapArray } from './array.js';\n/**\n * Keys to ignore for typeahead so we aren't matching things\n * like `Shift menu item` or `Control center` or `Alt menu` when\n * a user presses those keys.\n */\nconst ignoredKeys = new Set(['Shift', 'Control', 'Alt', 'Meta', 'CapsLock', 'NumLock']);\n/**\n * Default options for the typeahead search.\n * We default to roving focus when a match is found, but\n * you can override this with the `onMatch` option.\n */\nconst defaults = {\n    onMatch: handleRovingFocus,\n    getCurrentItem: () => document.activeElement,\n};\nexport function createTypeaheadSearch(args = {}) {\n    const withDefaults = { ...defaults, ...args };\n    const typed = writable([]);\n    const resetTyped = debounce(() => {\n        typed.update(() => []);\n    });\n    const handleTypeaheadSearch = (key, items) => {\n        if (ignoredKeys.has(key))\n            return;\n        const currentItem = withDefaults.getCurrentItem();\n        const $typed = get(typed);\n        if (!Array.isArray($typed)) {\n            return;\n        }\n        $typed.push(key.toLowerCase());\n        typed.set($typed);\n        const candidateItems = items.filter((item) => {\n            if (item.getAttribute('disabled') === 'true' ||\n                item.getAttribute('aria-disabled') === 'true' ||\n                item.hasAttribute('data-disabled')) {\n                return false;\n            }\n            return true;\n        });\n        const isRepeated = $typed.length > 1 && $typed.every((char) => char === $typed[0]);\n        const normalizeSearch = isRepeated ? $typed[0] : $typed.join('');\n        const currentItemIndex = isHTMLElement(currentItem) ? candidateItems.indexOf(currentItem) : -1;\n        let wrappedItems = wrapArray(candidateItems, Math.max(currentItemIndex, 0));\n        const excludeCurrentItem = normalizeSearch.length === 1;\n        if (excludeCurrentItem) {\n            wrappedItems = wrappedItems.filter((v) => v !== currentItem);\n        }\n        const nextItem = wrappedItems.find((item) => item?.innerText && item.innerText.toLowerCase().startsWith(normalizeSearch.toLowerCase()));\n        if (isHTMLElement(nextItem) && nextItem !== currentItem) {\n            withDefaults.onMatch(nextItem);\n        }\n        resetTyped();\n    };\n    return {\n        typed,\n        resetTyped,\n        handleTypeaheadSearch,\n    };\n}\n", "import { isHTMLElement } from './is.js';\n/**\n * Get an element's ancestor which has a `data-portal` attribute.\n * This is used to handle nested portals/overlays/dialogs/popovers.\n */\nfunction getPortalParent(node) {\n    let parent = node.parentElement;\n    while (isHTMLElement(parent) && !parent.hasAttribute('data-portal')) {\n        parent = parent.parentElement;\n    }\n    return parent || 'body';\n}\nexport function getPortalDestination(node, portalProp) {\n    const portalParent = getPortalParent(node);\n    if (portalProp !== undefined)\n        return portalProp;\n    if (portalParent === 'body')\n        return document.body;\n    return null;\n}\n", "import { getElementByMeltId, isElement, isHTMLLabelElement } from './';\nexport function createClickOutsideIgnore(meltId) {\n    return (e) => {\n        const target = e.target;\n        const triggerEl = getElementByMeltId(meltId);\n        if (!triggerEl || !isElement(target))\n            return false;\n        const id = triggerEl.id;\n        if (isHTMLLabelElement(target) && id === target.htmlFor) {\n            return true;\n        }\n        if (target.closest(`label[for=\"${id}\"]`)) {\n            return true;\n        }\n        return false;\n    };\n}\n", "import { isFunction, isHTMLElement, sleep } from './index.js';\nimport { tick } from 'svelte';\nexport async function handleFocus(args) {\n    const { prop, defaultEl } = args;\n    await Promise.all([sleep(1), tick]);\n    if (prop === undefined) {\n        defaultEl?.focus();\n        return;\n    }\n    const returned = isFunction(prop) ? prop(defaultEl) : prop;\n    if (typeof returned === 'string') {\n        // Get el by selector, focus it\n        const el = document.querySelector(returned);\n        if (!isHTMLElement(el))\n            return;\n        el.focus();\n    }\n    else if (isHTMLElement(returned)) {\n        // Focus it\n        returned.focus();\n    }\n}\n", "export function getDecimalCount(value) {\n    return (String(value).split('.')[1] || '').length;\n}\nexport function roundValue(value, decimalCount) {\n    const rounder = Math.pow(10, decimalCount);\n    return Math.round(value * rounder) / rounder;\n}\nexport function snapValueToStep(value, min, max, step) {\n    const remainder = (value - (isNaN(min) ? 0 : min)) % step;\n    let snappedValue = Math.abs(remainder) * 2 >= step\n        ? value + Math.sign(remainder) * (step - Math.abs(remainder))\n        : value - remainder;\n    if (!isNaN(min)) {\n        if (snappedValue < min) {\n            snappedValue = min;\n        }\n        else if (!isNaN(max) && snappedValue > max) {\n            snappedValue = min + Math.floor((max - min) / step) * step;\n        }\n    }\n    else if (!isNaN(max) && snappedValue > max) {\n        snappedValue = Math.floor(max / step) * step;\n    }\n    const string = step.toString();\n    const index = string.indexOf('.');\n    const precision = index >= 0 ? string.length - index : 0;\n    if (precision > 0) {\n        const pow = Math.pow(10, precision);\n        snappedValue = Math.round(snappedValue * pow) / pow;\n    }\n    return snappedValue;\n}\nexport function clamp(min, value, max) {\n    return Math.max(min, Math.min(value, max));\n}\n", "import { addMeltEventListener, builder, createElHelpers, disabledAttr, executeCallbacks, generateId, generateIds, getElementByMeltId, isHTMLElement, kbd, omit, overridable, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { tick } from 'svelte';\nimport { derived, writable } from 'svelte/store';\nconst { name, selector } = createElHelpers('accordion');\nconst defaults = {\n    multiple: false,\n    disabled: false,\n    forceVisible: false,\n};\nexport const createAccordion = (props) => {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'value', 'onValueChange', 'defaultValue'));\n    const meltIds = generateIds(['root']);\n    const { disabled, forceVisible } = options;\n    const valueWritable = withDefaults.value ?? writable(withDefaults.defaultValue);\n    const value = overridable(valueWritable, withDefaults?.onValueChange);\n    const isSelected = (key, v) => {\n        if (v === undefined)\n            return false;\n        if (typeof v === 'string')\n            return v === key;\n        return v.includes(key);\n    };\n    const isSelectedStore = derived(value, ($value) => {\n        return (key) => isSelected(key, $value);\n    });\n    const root = builder(name(), {\n        returned: () => ({\n            'data-melt-id': meltIds.root,\n        }),\n    });\n    const parseItemProps = (props) => {\n        if (typeof props === 'string') {\n            return { value: props };\n        }\n        else {\n            return props;\n        }\n    };\n    const parseHeadingProps = (props) => {\n        if (typeof props === 'number') {\n            return { level: props };\n        }\n        else {\n            return props;\n        }\n    };\n    const item = builder(name('item'), {\n        stores: value,\n        returned: ($value) => {\n            return (props) => {\n                const { value: itemValue, disabled } = parseItemProps(props);\n                return {\n                    'data-state': isSelected(itemValue, $value) ? 'open' : 'closed',\n                    'data-disabled': disabledAttr(disabled),\n                };\n            };\n        },\n    });\n    const trigger = builder(name('trigger'), {\n        stores: [value, disabled],\n        returned: ([$value, $disabled]) => {\n            return (props) => {\n                const { value: itemValue, disabled } = parseItemProps(props);\n                // generate the content ID here so that we can grab it in the content\n                // builder action to ensure the values match.\n                return {\n                    disabled: disabledAttr($disabled || disabled),\n                    'aria-expanded': isSelected(itemValue, $value) ? true : false,\n                    'aria-disabled': disabled ? true : false,\n                    'data-disabled': disabledAttr(disabled),\n                    'data-value': itemValue,\n                    'data-state': isSelected(itemValue, $value) ? 'open' : 'closed',\n                };\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                const disabled = node.dataset.disabled === 'true';\n                const itemValue = node.dataset.value;\n                if (disabled || !itemValue)\n                    return;\n                handleValueUpdate(itemValue);\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                if (![kbd.ARROW_DOWN, kbd.ARROW_UP, kbd.HOME, kbd.END].includes(e.key)) {\n                    return;\n                }\n                e.preventDefault();\n                if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n                    const disabled = node.dataset.disabled === 'true';\n                    const itemValue = node.dataset.value;\n                    if (disabled || !itemValue)\n                        return;\n                    handleValueUpdate(itemValue);\n                    return;\n                }\n                const el = e.target;\n                const rootEl = getElementByMeltId(meltIds.root);\n                if (!rootEl || !isHTMLElement(el))\n                    return;\n                const items = Array.from(rootEl.querySelectorAll(selector('trigger')));\n                const candidateItems = items.filter((item) => {\n                    if (!isHTMLElement(item))\n                        return false;\n                    return item.dataset.disabled !== 'true';\n                });\n                if (!candidateItems.length)\n                    return;\n                const elIdx = candidateItems.indexOf(el);\n                if (e.key === kbd.ARROW_DOWN) {\n                    candidateItems[(elIdx + 1) % candidateItems.length].focus();\n                }\n                if (e.key === kbd.ARROW_UP) {\n                    candidateItems[(elIdx - 1 + candidateItems.length) % candidateItems.length].focus();\n                }\n                if (e.key === kbd.HOME) {\n                    candidateItems[0].focus();\n                }\n                if (e.key === kbd.END) {\n                    candidateItems[candidateItems.length - 1].focus();\n                }\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const content = builder(name('content'), {\n        stores: [value, disabled, forceVisible],\n        returned: ([$value, $disabled, $forceVisible]) => {\n            return (props) => {\n                const { value: itemValue } = parseItemProps(props);\n                const isVisible = isSelected(itemValue, $value) || $forceVisible;\n                return {\n                    'data-state': isVisible ? 'open' : 'closed',\n                    'data-disabled': disabledAttr($disabled),\n                    'data-value': itemValue,\n                    hidden: isVisible ? undefined : true,\n                    style: styleToString({\n                        display: isVisible ? undefined : 'none',\n                    }),\n                };\n            };\n        },\n        action: (node) => {\n            tick().then(() => {\n                const contentId = generateId();\n                const triggerId = generateId();\n                const parentTrigger = document.querySelector(`${selector('trigger')}, [data-value=\"${node.dataset.value}\"]`);\n                if (!isHTMLElement(parentTrigger))\n                    return;\n                node.id = contentId;\n                parentTrigger.setAttribute('aria-controls', contentId);\n                parentTrigger.id = triggerId;\n            });\n        },\n    });\n    const heading = builder(name('heading'), {\n        returned: () => {\n            return (props) => {\n                const { level } = parseHeadingProps(props);\n                return {\n                    role: 'heading',\n                    'aria-level': level,\n                    'data-heading-level': level,\n                };\n            };\n        },\n    });\n    function handleValueUpdate(itemValue) {\n        value.update(($value) => {\n            if ($value === undefined) {\n                return withDefaults.multiple ? [itemValue] : itemValue;\n            }\n            if (Array.isArray($value)) {\n                if ($value.includes(itemValue)) {\n                    return $value.filter((v) => v !== itemValue);\n                }\n                $value.push(itemValue);\n                return $value;\n            }\n            return $value === itemValue ? undefined : itemValue;\n        });\n    }\n    return {\n        ids: meltIds,\n        elements: {\n            root,\n            item,\n            trigger,\n            content,\n            heading,\n        },\n        states: {\n            value: value,\n        },\n        helpers: {\n            isSelected: isSelectedStore,\n        },\n        options,\n    };\n};\n", "import { builder, effect, isBrowser, omit, overridable, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { writable } from 'svelte/store';\nconst defaults = {\n    src: '',\n    delayMs: 0,\n    onLoadingStatusChange: undefined,\n};\nexport const createAvatar = (props) => {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'loadingStatus', 'onLoadingStatusChange'));\n    const { src, delayMs } = options;\n    const loadingStatusWritable = withDefaults.loadingStatus ?? writable('loading');\n    const loadingStatus = overridable(loadingStatusWritable, withDefaults?.onLoadingStatusChange);\n    effect([src, delayMs], ([$src, $delayMs]) => {\n        if (isBrowser) {\n            const image = new Image();\n            image.src = $src;\n            image.onload = () => {\n                if (delayMs !== undefined) {\n                    const timerId = window.setTimeout(() => {\n                        loadingStatus.set('loaded');\n                    }, $delayMs);\n                    return () => window.clearTimeout(timerId);\n                }\n                else {\n                    loadingStatus.set('loaded');\n                }\n            };\n            image.onerror = () => {\n                loadingStatus.set('error');\n            };\n        }\n    });\n    const image = builder('avatar-image', {\n        stores: [src, loadingStatus],\n        returned: ([$src, $loadingStatus]) => {\n            const imageStyles = styleToString({\n                display: $loadingStatus === 'loaded' ? 'block' : 'none',\n            });\n            return {\n                src: $src,\n                style: imageStyles,\n            };\n        },\n    });\n    const fallback = builder('avatar-fallback', {\n        stores: [loadingStatus],\n        returned: ([$loadingStatus]) => {\n            return {\n                style: $loadingStatus === 'loaded'\n                    ? styleToString({\n                        display: 'none',\n                    })\n                    : undefined,\n                hidden: $loadingStatus === 'loaded' ? true : undefined,\n            };\n        },\n    });\n    return {\n        elements: {\n            image,\n            fallback,\n        },\n        states: {\n            loadingStatus,\n        },\n        options,\n    };\n};\n", "import { addMeltEventListener, builder, disabledAttr, executeCallbacks, kbd, omit, overridable, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { derived, get, writable } from 'svelte/store';\nconst defaults = {\n    disabled: false,\n    required: false,\n    name: undefined,\n    value: 'on',\n    defaultChecked: false,\n};\nexport function createCheckbox(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'checked', 'defaultChecked'));\n    const { disabled, name, required, value } = options;\n    // States\n    const checkedWritable = withDefaults.checked ?? writable(withDefaults.defaultChecked);\n    const checked = overridable(checkedWritable, withDefaults?.onCheckedChange);\n    const root = builder('checkbox', {\n        stores: [checked, disabled, required],\n        returned: ([$checked, $disabled, $required]) => {\n            return {\n                'data-disabled': disabledAttr($disabled),\n                disabled: disabledAttr($disabled),\n                'data-state': $checked === 'indeterminate' ? 'indeterminate' : $checked ? 'checked' : 'unchecked',\n                type: 'button',\n                role: 'checkbox',\n                'aria-checked': $checked === 'indeterminate' ? 'mixed' : $checked,\n                'aria-required': $required,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => {\n                // According to WAI ARIA, Checkboxes don't activate on enter keypress\n                if (e.key === kbd.ENTER)\n                    e.preventDefault();\n            }), addMeltEventListener(node, 'click', () => {\n                if (get(disabled))\n                    return;\n                checked.update((value) => {\n                    if (value === 'indeterminate')\n                        return true;\n                    return !value;\n                });\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const input = builder('checkbox-input', {\n        stores: [checked, name, value, required, disabled],\n        returned: ([$checked, $name, $value, $required, $disabled]) => {\n            return {\n                type: 'checkbox',\n                'aria-hidden': true,\n                hidden: true,\n                tabindex: -1,\n                name: $name,\n                value: $value,\n                checked: $checked === 'indeterminate' ? false : $checked,\n                required: $required,\n                disabled: disabledAttr($disabled),\n                style: styleToString({\n                    position: 'absolute',\n                    opacity: 0,\n                    'pointer-events': 'none',\n                    margin: 0,\n                    transform: 'translateX(-100%)',\n                }),\n            };\n        },\n    });\n    const isIndeterminate = derived(checked, ($checked) => $checked === 'indeterminate');\n    const isChecked = derived(checked, ($checked) => $checked === true);\n    return {\n        elements: {\n            root,\n            input,\n        },\n        states: {\n            checked,\n        },\n        helpers: {\n            isIndeterminate,\n            isChecked,\n        },\n        options,\n    };\n}\n", "import { addMeltEventListener, builder, createElHelpers, disabledAttr, omit, overridable, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { derived, writable } from 'svelte/store';\nconst defaults = {\n    defaultOpen: false,\n    disabled: false,\n    forceVisible: false,\n};\nconst { name } = createElHelpers('collapsible');\nexport function createCollapsible(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'open', 'defaultOpen', 'onOpenChange'));\n    const { disabled, forceVisible } = options;\n    const openWritable = withDefaults.open ?? writable(withDefaults.defaultOpen);\n    const open = overridable(openWritable, withDefaults?.onOpenChange);\n    const root = builder(name(), {\n        stores: [open, disabled],\n        returned: ([$open, $disabled]) => ({\n            'data-state': $open ? 'open' : 'closed',\n            'data-disabled': disabledAttr($disabled),\n        }),\n    });\n    const trigger = builder(name('trigger'), {\n        stores: [open, disabled],\n        returned: ([$open, $disabled]) => ({\n            'data-state': $open ? 'open' : 'closed',\n            'data-disabled': disabledAttr($disabled),\n            disabled: disabledAttr($disabled),\n        }),\n        action: (node) => {\n            const unsub = addMeltEventListener(node, 'click', () => {\n                const disabled = node.dataset.disabled !== undefined;\n                if (disabled)\n                    return;\n                open.update(($open) => !$open);\n            });\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const isVisible = derived([open, forceVisible], ([$open, $forceVisible]) => $open || $forceVisible);\n    const content = builder(name('content'), {\n        stores: [isVisible, disabled],\n        returned: ([$isVisible, $disabled]) => ({\n            'data-state': $isVisible ? 'open' : 'closed',\n            'data-disabled': disabledAttr($disabled),\n            hidden: $isVisible ? undefined : true,\n            style: styleToString({\n                display: $isVisible ? undefined : 'none',\n            }),\n        }),\n    });\n    return {\n        elements: {\n            root,\n            trigger,\n            content,\n        },\n        states: {\n            open,\n        },\n        options,\n    };\n}\n", "// Modified from Grail UI v0.9.6 (2023-06-10)\n// Source: https://github.com/grail-ui/grail-ui\n// https://github.com/grail-ui/grail-ui/tree/master/packages/grail-ui/src/clickOutside/clickOutside.ts\nimport { readable } from 'svelte/store';\nimport { addEventListener } from '../../helpers/event.js';\nimport { get } from 'svelte/store';\nimport { isFunction } from '../../helpers/is.js';\n/**\n * Creates a readable store that tracks the latest PointerEvent that occurred on the document.\n *\n * @returns A function to unsubscribe from the event listener and stop tracking pointer events.\n */\nconst documentClickStore = readable(undefined, (set) => {\n    /**\n     * Event handler for pointerdown events on the document.\n     * Updates the store's value with the latest PointerEvent and then resets it to undefined.\n     */\n    function clicked(event) {\n        set(event);\n        // New subscriptions will not trigger immediately\n        set(undefined);\n    }\n    // Adds a pointerdown event listener to the document, calling the clicked function when triggered.\n    const unsubscribe = addEventListener(document, 'pointerup', clicked, {\n        passive: false,\n        capture: true,\n    });\n    // Returns a function to unsubscribe from the event listener and stop tracking pointer events.\n    return unsubscribe;\n});\nexport const useClickOutside = (node, config = {}) => {\n    let options = { enabled: true, ...config };\n    // Returns true if the click outside handler is enabled\n    function isEnabled() {\n        return typeof options.enabled === 'boolean' ? options.enabled : get(options.enabled);\n    }\n    // Handle document clicks\n    const unsubscribe = documentClickStore.subscribe((e) => {\n        // If the click outside handler is disabled, or if the event is null or the node itself, return early\n        if (!isEnabled() || !e || e.target === node) {\n            return;\n        }\n        const composedPath = e.composedPath();\n        // If the target is in the node, return early\n        if (composedPath.includes(node))\n            return;\n        // If an ignore function is passed, check if it returns true\n        if (options.ignore) {\n            if (isFunction(options.ignore)) {\n                if (options.ignore(e))\n                    return;\n            }\n            // If an ignore array is passed, check if any elements in the array match the target\n            else if (Array.isArray(options.ignore)) {\n                if (options.ignore.length > 0 &&\n                    options.ignore.some((ignoreEl) => {\n                        return ignoreEl && (e.target === ignoreEl || composedPath.includes(ignoreEl));\n                    }))\n                    return;\n            }\n        }\n        // If none of the above conditions are met, call the handler\n        options.handler?.(e);\n    });\n    return {\n        update(params) {\n            options = { ...options, ...params };\n        },\n        destroy() {\n            unsubscribe();\n        },\n    };\n};\n", "import { addEventListener } from '../../helpers/event.js';\nimport { isFunction, isHTMLElement, isReadable } from '../../helpers/is.js';\nimport { get, readable } from 'svelte/store';\nimport { effect, executeCallbacks, kbd, noop } from '../../helpers/index.js';\n/**\n * Creates a readable store that tracks the latest Escape Keydown that occurred on the document.\n *\n * @returns A function to unsubscribe from the event listener and stop tracking keydown events.\n */\nconst documentEscapeKeyStore = readable(undefined, (set) => {\n    /**\n     * Event handler for keydown events on the document.\n     * Updates the store's value with the latest Escape Keydown event and then resets it to undefined.\n     */\n    function keydown(event) {\n        if (event && event.key === kbd.ESCAPE) {\n            set(event);\n        }\n        // New subscriptions will not trigger immediately\n        set(undefined);\n    }\n    // Adds a keydown event listener to the document, calling the keydown function when triggered.\n    const unsubscribe = addEventListener(document, 'keydown', keydown, {\n        passive: false,\n        capture: true,\n    });\n    // Returns a function to unsubscribe from the event listener and stop tracking keydown events.\n    return unsubscribe;\n});\nexport const useEscapeKeydown = (node, config = {}) => {\n    let unsub = noop;\n    function update(config = {}) {\n        unsub();\n        const options = { enabled: true, ...config };\n        const enabled = (isReadable(options.enabled) ? options.enabled : readable(options.enabled));\n        unsub = executeCallbacks(\n        // Handle escape keydowns\n        documentEscapeKeyStore.subscribe((e) => {\n            if (!e || !get(enabled))\n                return;\n            const target = e.target;\n            if (!isHTMLElement(target) || target.closest('[data-escapee]') !== node) {\n                return;\n            }\n            e.preventDefault();\n            // If an ignore function is passed, check if it returns true\n            if (options.ignore) {\n                if (isFunction(options.ignore)) {\n                    if (options.ignore(e))\n                        return;\n                }\n                // If an ignore array is passed, check if any elements in the array match the target\n                else if (Array.isArray(options.ignore)) {\n                    if (options.ignore.length > 0 &&\n                        options.ignore.some((ignoreEl) => {\n                            return ignoreEl && target === ignoreEl;\n                        }))\n                        return;\n                }\n            }\n            // If none of the above conditions are met, call the handler\n            options.handler?.(e);\n        }), effect(enabled, ($enabled) => {\n            if ($enabled) {\n                node.dataset.escapee = '';\n            }\n            else {\n                delete node.dataset.escapee;\n            }\n        }));\n    }\n    update(config);\n    return {\n        update,\n        destroy() {\n            node.removeAttribute('data-escapee');\n            unsub();\n        },\n    };\n};\n", "// Modified from Grail UI v0.9.6 (2023-06-10)\n// Source: https://github.com/grail-ui/grail-ui\n// https://github.com/grail-ui/grail-ui/tree/master/packages/grail-ui/src/floating/placement.ts\nimport { flip, offset, arrow, shift, size, computePosition, autoUpdate, } from '@floating-ui/dom';\nimport { isHTMLElement, noop } from '../../helpers/index.js';\nconst defaultConfig = {\n    strategy: 'absolute',\n    placement: 'top',\n    gutter: 5,\n    flip: true,\n    sameWidth: false,\n    overflowPadding: 8,\n};\nconst ARROW_TRANSFORM = {\n    bottom: 'rotate(45deg)',\n    left: 'rotate(135deg)',\n    top: 'rotate(225deg)',\n    right: 'rotate(315deg)',\n};\nexport function useFloating(reference, floating, opts = {}) {\n    if (!floating || !reference || opts === null)\n        return {\n            destroy: noop,\n        };\n    const options = { ...defaultConfig, ...opts };\n    const arrowEl = floating.querySelector('[data-arrow=true]');\n    const middleware = [];\n    if (options.flip) {\n        middleware.push(flip({\n            boundary: options.boundary,\n            padding: options.overflowPadding,\n        }));\n    }\n    const arrowOffset = isHTMLElement(arrowEl) ? arrowEl.offsetHeight / 2 : 0;\n    if (options.gutter || options.offset) {\n        const data = options.gutter ? { mainAxis: options.gutter } : options.offset;\n        if (data?.mainAxis != null) {\n            data.mainAxis += arrowOffset;\n        }\n        middleware.push(offset(data));\n    }\n    middleware.push(shift({\n        boundary: options.boundary,\n        crossAxis: options.overlap,\n        padding: options.overflowPadding,\n    }));\n    if (arrowEl) {\n        middleware.push(arrow({ element: arrowEl, padding: 8 }));\n    }\n    middleware.push(size({\n        padding: options.overflowPadding,\n        apply({ rects, availableHeight, availableWidth }) {\n            if (options.sameWidth) {\n                Object.assign(floating.style, {\n                    width: `${Math.round(rects.reference.width)}px`,\n                    minWidth: 'unset',\n                });\n            }\n            if (options.fitViewport) {\n                Object.assign(floating.style, {\n                    maxWidth: `${availableWidth}px`,\n                    maxHeight: `${availableHeight}px`,\n                });\n            }\n        },\n    }));\n    function compute() {\n        if (!reference || !floating)\n            return;\n        const { placement, strategy } = options;\n        computePosition(reference, floating, {\n            placement,\n            middleware,\n            strategy,\n        }).then((data) => {\n            const x = Math.round(data.x);\n            const y = Math.round(data.y);\n            Object.assign(floating.style, {\n                position: options.strategy,\n                top: `${y}px`,\n                left: `${x}px`,\n            });\n            if (isHTMLElement(arrowEl) && data.middlewareData.arrow) {\n                const { x, y } = data.middlewareData.arrow;\n                const dir = data.placement.split('-')[0];\n                Object.assign(arrowEl.style, {\n                    position: 'absolute',\n                    left: x != null ? `${x}px` : '',\n                    top: y != null ? `${y}px` : '',\n                    [dir]: `calc(100% - ${arrowOffset}px)`,\n                    transform: ARROW_TRANSFORM[dir],\n                    backgroundColor: 'inherit',\n                    zIndex: 'inherit',\n                });\n            }\n            return data;\n        });\n    }\n    // Apply `position` to floating element prior to the computePosition() call.\n    Object.assign(floating.style, {\n        position: options.strategy,\n    });\n    return {\n        destroy: autoUpdate(reference, floating, compute),\n    };\n}\n", "// Modified from Grail UI v0.9.6 (2023-06-10)\n// Source: https://github.com/grail-ui/grail-ui\n// https://github.com/grail-ui/grail-ui/tree/master/packages/grail-ui/src/focusTrap/focusTrap.ts\nimport { writable, readonly } from 'svelte/store';\nimport { createFocusTrap as _createFocusTrap } from 'focus-trap';\nexport function createFocusTrap(config = {}) {\n    let trap;\n    const { immediate, ...focusTrapOptions } = config;\n    const hasFocus = writable(false);\n    const isPaused = writable(false);\n    const activate = (opts) => trap?.activate(opts);\n    const deactivate = (opts) => {\n        trap?.deactivate(opts);\n    };\n    const pause = () => {\n        if (trap) {\n            trap.pause();\n            isPaused.set(true);\n        }\n    };\n    const unpause = () => {\n        if (trap) {\n            trap.unpause();\n            isPaused.set(false);\n        }\n    };\n    const useFocusTrap = (node) => {\n        trap = _createFocusTrap(node, {\n            ...focusTrapOptions,\n            onActivate() {\n                hasFocus.set(true);\n                config.onActivate?.();\n            },\n            onDeactivate() {\n                hasFocus.set(false);\n                config.onDeactivate?.();\n            },\n        });\n        if (immediate) {\n            activate();\n        }\n        return {\n            destroy() {\n                deactivate();\n                trap = undefined;\n            },\n        };\n    };\n    return {\n        useFocusTrap,\n        hasFocus: readonly(hasFocus),\n        isPaused: readonly(isPaused),\n        activate,\n        deactivate,\n        pause,\n        unpause,\n    };\n}\n", "/**\n * A special action for Melt UI's preprocessor `@melt-ui/pp`.\n *\n * @see https://www.melt-ui.com/docs/preprocessor\n *\n * @example\n * ```svelte\n * <script>\n * \timport { createLabel, melt } from '@melt-ui/svelte';\n * \tconst { elements: { root } } = createLabel();\n * </script>\n *\n * <label use:melt={$root} />\n * ```\n */\nexport function melt(node, params) {\n    throw new Error(\"[MELTUI ERROR]: The `use:melt` action cannot be used without MeltUI's Preprocessor. See: https://www.melt-ui.com/docs/preprocessor\");\n}\n", "import { createFocusTrap, useClickOutside, useEscapeKeydown, useFloating, usePortal, } from '../index.js';\nimport { executeCallbacks, noop, isHTMLElement, } from '../../helpers/index.js';\nconst defaultConfig = {\n    floating: {},\n    focusTrap: {},\n    clickOutside: {},\n    escapeKeydown: {},\n    portal: 'body',\n};\nexport const usePopper = (popperElement, args) => {\n    popperElement.dataset.escapee = '';\n    const { anchorElement, open, options } = args;\n    if (!anchorElement || !open || !options) {\n        return { destroy: noop };\n    }\n    const opts = { ...defaultConfig, ...options };\n    const callbacks = [];\n    if (opts.portal !== null) {\n        const portal = usePortal(popperElement, opts.portal);\n        if (portal?.destroy) {\n            callbacks.push(portal.destroy);\n        }\n    }\n    callbacks.push(useFloating(anchorElement, popperElement, opts.floating).destroy);\n    if (opts.focusTrap !== null) {\n        const { useFocusTrap } = createFocusTrap({\n            immediate: true,\n            escapeDeactivates: false,\n            allowOutsideClick: true,\n            returnFocusOnDeactivate: false,\n            fallbackFocus: popperElement,\n            ...opts.focusTrap,\n        });\n        const usedFocusTrap = useFocusTrap(popperElement);\n        if (usedFocusTrap?.destroy) {\n            callbacks.push(usedFocusTrap.destroy);\n        }\n    }\n    if (opts.clickOutside !== null) {\n        callbacks.push(useClickOutside(popperElement, {\n            enabled: open,\n            handler: (e) => {\n                if (e.defaultPrevented)\n                    return;\n                if (isHTMLElement(anchorElement) && !anchorElement.contains(e.target)) {\n                    open.set(false);\n                    anchorElement.focus();\n                }\n            },\n            ...opts.clickOutside,\n        }).destroy);\n    }\n    if (opts.escapeKeydown !== null) {\n        callbacks.push(useEscapeKeydown(popperElement, {\n            enabled: open,\n            handler: () => {\n                open.set(false);\n            },\n            ...opts.escapeKeydown,\n        }).destroy);\n    }\n    // @ts-expect-error - This works and is correct, but TS doesn't like it\n    const unsubscribe = executeCallbacks(...callbacks);\n    return {\n        destroy() {\n            unsubscribe();\n        },\n    };\n};\n", "import { tick } from 'svelte';\nimport { isHTMLElement, noop } from '../helpers/index.js';\nexport const usePortal = (el, target = 'body') => {\n    let targetEl;\n    if (!isHTMLElement(target) && typeof target !== 'string') {\n        return {\n            destroy: noop,\n        };\n    }\n    async function update(newTarget) {\n        target = newTarget;\n        if (typeof target === 'string') {\n            targetEl = document.querySelector(target);\n            if (targetEl === null) {\n                await tick();\n                targetEl = document.querySelector(target);\n            }\n            if (targetEl === null) {\n                throw new Error(`No element found matching css selector: \"${target}\"`);\n            }\n        }\n        else if (target instanceof HTMLElement) {\n            targetEl = target;\n        }\n        else {\n            throw new TypeError(`Unknown portal target type: ${target === null ? 'null' : typeof target}. Allowed types: string (CSS selector) or HTMLElement.`);\n        }\n        el.dataset.portal = '';\n        targetEl.appendChild(el);\n        el.hidden = false;\n    }\n    function destroy() {\n        el.remove();\n    }\n    update(target);\n    return {\n        update,\n        destroy,\n    };\n};\n", "import { addMeltEventListener, builder } from '../../internal/helpers/index.js';\nexport function createLabel() {\n    const root = builder('label', {\n        action: (node) => {\n            const mouseDown = addMeltEventListener(node, 'mousedown', (e) => {\n                if (!e.defaultPrevented && e.detail > 1) {\n                    e.preventDefault();\n                }\n            });\n            return {\n                destroy: mouseDown,\n            };\n        },\n    });\n    return {\n        elements: {\n            root,\n        },\n    };\n}\n", "import { useEscapeKeydown, usePopper } from '../../internal/actions/index.js';\nimport { FIRST_LAST_KEYS, addHighlight, addMeltEventListener, back, builder, createClickOutsideIgnore, createElHelpers, createTypeaheadSearch, derivedVisible, disabledAttr, effect, executeCallbacks, forward, generateId, getOptions, getPortalDestination, hiddenInputAttrs, isBrowser, isElement, isElementDisabled, isHTMLButtonElement, isHTMLElement, isHTMLInputElement, isObject, kbd, last, next, noop, omit, overridable, prev, removeHighlight, removeScroll, stripValues, styleToString, toWritableStores, toggle, } from '../../internal/helpers/index.js';\nimport { safeOnMount } from '../../internal/helpers/lifecycle';\nimport { dequal as deepEqual } from 'dequal';\nimport { tick } from 'svelte';\nimport { derived, get, writable } from 'svelte/store';\nimport { generateIds } from '../../internal/helpers/id';\nimport { createLabel } from '../label/create.js';\n// prettier-ignore\nexport const INTERACTION_KEYS = [kbd.ARROW_LEFT, kbd.ESCAPE, kbd.ARROW_RIGHT, kbd.SHIFT, kbd.CAPS_LOCK, kbd.CONTROL, kbd.ALT, kbd.META, kbd.ENTER, kbd.F1, kbd.F2, kbd.F3, kbd.F4, kbd.F5, kbd.F6, kbd.F7, kbd.F8, kbd.F9, kbd.F10, kbd.F11, kbd.F12];\nconst defaults = {\n    positioning: {\n        placement: 'bottom',\n        sameWidth: true,\n    },\n    scrollAlignment: 'nearest',\n    loop: true,\n    defaultOpen: false,\n    closeOnOutsideClick: true,\n    preventScroll: true,\n    closeOnEscape: true,\n    forceVisible: false,\n    portal: undefined,\n    builder: 'listbox',\n    disabled: false,\n    required: false,\n    name: undefined,\n    typeahead: true,\n    highlightOnHover: true,\n};\nexport const listboxIdParts = ['trigger', 'menu', 'label'];\n/**\n * Creates an ARIA-1.2-compliant listbox.\n *\n * @TODO multi-select using `tags-input` builder?\n */\nexport function createListbox(props) {\n    const withDefaults = { ...defaults, ...props };\n    // Trigger element for the popper portal. This will be our input element.\n    const activeTrigger = writable(null);\n    // The currently highlighted menu item.\n    const highlightedItem = writable(null);\n    const selectedWritable = withDefaults.selected ?? writable(withDefaults.defaultSelected);\n    const selected = overridable(selectedWritable, withDefaults?.onSelectedChange);\n    const highlighted = derived(highlightedItem, ($highlightedItem) => $highlightedItem ? getOptionProps($highlightedItem) : undefined);\n    // Either the provided open store or a store with the default open value\n    const openWritable = withDefaults.open ?? writable(withDefaults.defaultOpen);\n    // The overridable open store which is the source of truth for the open state.\n    const open = overridable(openWritable, withDefaults?.onOpenChange);\n    const options = toWritableStores({\n        ...omit(withDefaults, 'open', 'defaultOpen', 'builder', 'ids'),\n        multiple: withDefaults.multiple ?? false,\n    });\n    const { scrollAlignment, loop, closeOnOutsideClick, closeOnEscape, preventScroll, portal, forceVisible, positioning, multiple, arrowSize, disabled, required, typeahead, name: nameProp, highlightOnHover, } = options;\n    const { name, selector } = createElHelpers(withDefaults.builder);\n    const ids = toWritableStores({ ...generateIds(listboxIdParts), ...withDefaults.ids });\n    const { handleTypeaheadSearch } = createTypeaheadSearch({\n        onMatch: (element) => {\n            highlightedItem.set(element);\n            element.scrollIntoView({ block: get(scrollAlignment) });\n        },\n        getCurrentItem() {\n            return get(highlightedItem);\n        },\n    });\n    /** ------- */\n    /** HELPERS */\n    /** ------- */\n    function getOptionProps(el) {\n        const value = el.getAttribute('data-value');\n        const label = el.getAttribute('data-label');\n        const disabled = el.hasAttribute('data-disabled');\n        return {\n            value: value ? JSON.parse(value) : value,\n            label: label ?? el.textContent ?? undefined,\n            disabled: disabled ? true : false,\n        };\n    }\n    const setOption = (newOption) => {\n        selected.update(($option) => {\n            const $multiple = get(multiple);\n            if ($multiple) {\n                const optionArr = Array.isArray($option) ? $option : [];\n                return toggle(newOption, optionArr, (itemA, itemB) => deepEqual(itemA.value, itemB.value));\n            }\n            return newOption;\n        });\n    };\n    /**\n     * Selects an item from the menu\n     * @param index array index of the item to select.\n     */\n    function selectItem(item) {\n        const props = getOptionProps(item);\n        setOption(props);\n    }\n    /**\n     * Opens the menu, sets the active trigger, and highlights\n     * the selected item (if one exists). It also optionally accepts the current\n     * open state to prevent unnecessary updates if we know the menu is already open.\n     */\n    async function openMenu() {\n        open.set(true);\n        const triggerEl = document.getElementById(get(ids.trigger));\n        if (!triggerEl)\n            return;\n        // The active trigger is used to anchor the menu to the input element.\n        activeTrigger.set(triggerEl);\n        // Wait a tick for the menu to open then highlight the selected item.\n        await tick();\n        const menuElement = document.getElementById(get(ids.menu));\n        if (!isHTMLElement(menuElement))\n            return;\n        const selectedItem = menuElement.querySelector('[aria-selected=true]');\n        if (!isHTMLElement(selectedItem))\n            return;\n        highlightedItem.set(selectedItem);\n    }\n    /** Closes the menu & clears the active trigger */\n    function closeMenu() {\n        open.set(false);\n        highlightedItem.set(null);\n    }\n    /**\n     * To properly anchor the popper to the input/trigger, we need to ensure both\n     * the open state is true and the activeTrigger is not null. This helper store's\n     * value is true when both of these conditions are met and keeps the code tidy.\n     */\n    const isVisible = derivedVisible({ open, forceVisible, activeTrigger });\n    /* ------ */\n    /* STATES */\n    /* ------ */\n    /**\n     * Determines if a given item is selected.\n     * This is useful for displaying additional markup on the selected item.\n     */\n    const isSelected = derived([selected], ([$selected]) => {\n        return (value) => {\n            if (Array.isArray($selected)) {\n                return $selected.some((o) => deepEqual(o.value, value));\n            }\n            if (isObject(value)) {\n                return deepEqual($selected?.value, stripValues(value, undefined, true));\n            }\n            return deepEqual($selected?.value, value);\n        };\n    });\n    /**\n     * Determines if a given item is highlighted.\n     * This is useful for displaying additional markup on the highlighted item.\n     */\n    const isHighlighted = derived([highlighted], ([$value]) => {\n        return (item) => {\n            return deepEqual($value?.value, item);\n        };\n    });\n    /* -------- */\n    /* ELEMENTS */\n    /* -------- */\n    /** Action and attributes for the text input. */\n    const trigger = builder(name('trigger'), {\n        stores: [open, highlightedItem, disabled, ids.menu, ids.trigger, ids.label],\n        returned: ([$open, $highlightedItem, $disabled, $menuId, $triggerId, $labelId]) => {\n            return {\n                'aria-activedescendant': $highlightedItem?.id,\n                'aria-autocomplete': 'list',\n                'aria-controls': $menuId,\n                'aria-expanded': $open,\n                'aria-labelledby': $labelId,\n                // autocomplete: 'off',\n                id: $triggerId,\n                role: 'combobox',\n                disabled: disabledAttr($disabled),\n            };\n        },\n        action: (node) => {\n            const isInput = isHTMLInputElement(node);\n            const unsubscribe = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                node.focus(); // Fix for safari not adding focus on trigger\n                const $open = get(open);\n                if ($open) {\n                    closeMenu();\n                }\n                else {\n                    openMenu();\n                }\n            }), \n            // Handle all input key events including typing, meta, and navigation.\n            addMeltEventListener(node, 'keydown', (e) => {\n                const $open = get(open);\n                /**\n                 * When the menu is closed...\n                 */\n                if (!$open) {\n                    // Pressing one of the interaction keys shouldn't open the menu.\n                    if (INTERACTION_KEYS.includes(e.key)) {\n                        return;\n                    }\n                    // Tab should not open the menu.\n                    if (e.key === kbd.TAB) {\n                        return;\n                    }\n                    // Pressing backspace when the input is blank shouldn't open the menu.\n                    if (e.key === kbd.BACKSPACE && isInput && node.value === '') {\n                        return;\n                    }\n                    // Clicking space on a button triggers a click event. We don't want to\n                    // open the menu in this case, and we let the click handler handle it.\n                    if (e.key === kbd.SPACE && isHTMLButtonElement(node)) {\n                        return;\n                    }\n                    // All other events should open the menu.\n                    openMenu();\n                    tick().then(() => {\n                        const $selectedItem = get(selected);\n                        if ($selectedItem)\n                            return;\n                        const menuEl = document.getElementById(get(ids.menu));\n                        if (!isHTMLElement(menuEl))\n                            return;\n                        const enabledItems = Array.from(menuEl.querySelectorAll(`${selector('item')}:not([data-disabled]):not([data-hidden])`)).filter((item) => isHTMLElement(item));\n                        if (!enabledItems.length)\n                            return;\n                        if (e.key === kbd.ARROW_DOWN) {\n                            highlightedItem.set(enabledItems[0]);\n                            enabledItems[0].scrollIntoView({ block: get(scrollAlignment) });\n                        }\n                        else if (e.key === kbd.ARROW_UP) {\n                            highlightedItem.set(last(enabledItems));\n                            last(enabledItems).scrollIntoView({ block: get(scrollAlignment) });\n                        }\n                    });\n                }\n                /**\n                 * When the menu is open...\n                 */\n                // Pressing `esc` should close the menu.\n                if (e.key === kbd.TAB) {\n                    closeMenu();\n                    return;\n                }\n                // Pressing enter with a highlighted item should select it.\n                if (e.key === kbd.ENTER || (e.key === kbd.SPACE && isHTMLButtonElement(node))) {\n                    e.preventDefault();\n                    const $highlightedItem = get(highlightedItem);\n                    if ($highlightedItem) {\n                        selectItem($highlightedItem);\n                    }\n                    if (!get(multiple)) {\n                        closeMenu();\n                    }\n                }\n                // Pressing Alt + Up should close the menu.\n                if (e.key === kbd.ARROW_UP && e.altKey) {\n                    closeMenu();\n                }\n                // Navigation (up, down, etc.) should change the highlighted item.\n                if (FIRST_LAST_KEYS.includes(e.key)) {\n                    e.preventDefault();\n                    // Get all the menu items.\n                    const menuElement = document.getElementById(get(ids.menu));\n                    if (!isHTMLElement(menuElement))\n                        return;\n                    const itemElements = getOptions(menuElement);\n                    if (!itemElements.length)\n                        return;\n                    // Disabled items can't be highlighted. Skip them.\n                    const candidateNodes = itemElements.filter((opt) => !isElementDisabled(opt) && opt.dataset.hidden === undefined);\n                    // Get the index of the currently highlighted item.\n                    const $currentItem = get(highlightedItem);\n                    const currentIndex = $currentItem ? candidateNodes.indexOf($currentItem) : -1;\n                    // Find the next menu item to highlight.\n                    const $loop = get(loop);\n                    const $scrollAlignment = get(scrollAlignment);\n                    let nextItem;\n                    switch (e.key) {\n                        case kbd.ARROW_DOWN:\n                            nextItem = next(candidateNodes, currentIndex, $loop);\n                            break;\n                        case kbd.ARROW_UP:\n                            nextItem = prev(candidateNodes, currentIndex, $loop);\n                            break;\n                        case kbd.PAGE_DOWN:\n                            nextItem = forward(candidateNodes, currentIndex, 10, $loop);\n                            break;\n                        case kbd.PAGE_UP:\n                            nextItem = back(candidateNodes, currentIndex, 10, $loop);\n                            break;\n                        case kbd.HOME:\n                            nextItem = candidateNodes[0];\n                            break;\n                        case kbd.END:\n                            nextItem = last(candidateNodes);\n                            break;\n                        default:\n                            return;\n                    }\n                    // Highlight the new item and scroll it into view.\n                    highlightedItem.set(nextItem);\n                    nextItem?.scrollIntoView({ block: $scrollAlignment });\n                }\n                else if (get(typeahead)) {\n                    const menuEl = document.getElementById(get(ids.menu));\n                    if (!isHTMLElement(menuEl))\n                        return;\n                    handleTypeaheadSearch(e.key, getOptions(menuEl));\n                }\n            }));\n            let unsubEscapeKeydown = noop;\n            const escape = useEscapeKeydown(node, {\n                handler: closeMenu,\n                enabled: derived([open, closeOnEscape], ([$open, $closeOnEscape]) => {\n                    return $open && $closeOnEscape;\n                }),\n            });\n            if (escape && escape.destroy) {\n                unsubEscapeKeydown = escape.destroy;\n            }\n            return {\n                destroy() {\n                    unsubscribe();\n                    unsubEscapeKeydown();\n                },\n            };\n        },\n    });\n    /**\n     * Action and attributes for the menu element.\n     */\n    const menu = builder(name('menu'), {\n        stores: [isVisible, ids.menu],\n        returned: ([$isVisible, $menuId]) => {\n            return {\n                hidden: $isVisible ? undefined : true,\n                id: $menuId,\n                role: 'listbox',\n                style: styleToString({ display: $isVisible ? undefined : 'none' }),\n            };\n        },\n        action: (node) => {\n            let unsubPopper = noop;\n            const unsubscribe = executeCallbacks(\n            // Bind the popper portal to the input element.\n            effect([isVisible, closeOnEscape, portal, closeOnOutsideClick, positioning, activeTrigger], ([$isVisible, $closeOnEscape, $portal, $closeOnOutsideClick, $positioning, $activeTrigger,]) => {\n                unsubPopper();\n                if (!$isVisible || !$activeTrigger)\n                    return;\n                const ignoreHandler = createClickOutsideIgnore(get(ids.trigger));\n                const popper = usePopper(node, {\n                    anchorElement: $activeTrigger,\n                    open,\n                    options: {\n                        floating: $positioning,\n                        focusTrap: null,\n                        clickOutside: $closeOnOutsideClick\n                            ? {\n                                handler: (e) => {\n                                    const target = e.target;\n                                    if (!isElement(target))\n                                        return;\n                                    if (target === $activeTrigger || $activeTrigger.contains(target)) {\n                                        return;\n                                    }\n                                    closeMenu();\n                                },\n                                ignore: ignoreHandler,\n                            }\n                            : null,\n                        escapeKeydown: $closeOnEscape\n                            ? {\n                                handler: () => {\n                                    closeMenu();\n                                },\n                            }\n                            : null,\n                        portal: getPortalDestination(node, $portal),\n                    },\n                });\n                if (popper && popper.destroy) {\n                    unsubPopper = popper.destroy;\n                }\n            }));\n            return {\n                destroy: () => {\n                    unsubscribe();\n                    unsubPopper();\n                },\n            };\n        },\n    });\n    // Use our existing label builder to create a label for the listbox input.\n    const { elements: { root: labelBuilder }, } = createLabel();\n    const { action: labelAction } = get(labelBuilder);\n    const label = builder(name('label'), {\n        stores: [ids.label, ids.trigger],\n        returned: ([$labelId, $triggerId]) => {\n            return {\n                id: $labelId,\n                for: $triggerId,\n            };\n        },\n        action: labelAction,\n    });\n    const option = builder(name('option'), {\n        stores: [isSelected],\n        returned: ([$isSelected]) => (props) => {\n            const selected = $isSelected(props.value);\n            return {\n                'data-value': JSON.stringify(props.value),\n                'data-label': props.label,\n                'data-disabled': disabledAttr(props.disabled),\n                'aria-disabled': props.disabled ? true : undefined,\n                'aria-selected': selected,\n                'data-selected': selected ? '' : undefined,\n                id: generateId(),\n                role: 'option',\n            };\n        },\n        action: (node) => {\n            const unsubscribe = executeCallbacks(addMeltEventListener(node, 'click', (e) => {\n                // If the item is disabled, `preventDefault` to stop the input losing focus.\n                if (isElementDisabled(node)) {\n                    e.preventDefault();\n                    return;\n                }\n                // Otherwise, select the item and close the menu.\n                selectItem(node);\n                if (!get(multiple)) {\n                    closeMenu();\n                }\n            }), effect(highlightOnHover, ($highlightOnHover) => {\n                if (!$highlightOnHover)\n                    return;\n                const unsub = executeCallbacks(addMeltEventListener(node, 'mouseover', () => {\n                    highlightedItem.set(node);\n                }), addMeltEventListener(node, 'mouseleave', () => {\n                    highlightedItem.set(null);\n                }));\n                return unsub;\n            }));\n            return { destroy: unsubscribe };\n        },\n    });\n    const hiddenInput = builder(name('hidden-input'), {\n        stores: [selected, required, nameProp],\n        returned: ([$selected, $required, $name]) => {\n            const value = Array.isArray($selected) ? $selected.map((o) => o.value) : $selected?.value;\n            return {\n                ...hiddenInputAttrs,\n                required: $required ? true : undefined,\n                value,\n                name: $name,\n            };\n        },\n    });\n    const arrow = builder(name('arrow'), {\n        stores: arrowSize,\n        returned: ($arrowSize) => ({\n            'data-arrow': true,\n            style: styleToString({\n                position: 'absolute',\n                width: `var(--arrow-size, ${$arrowSize}px)`,\n                height: `var(--arrow-size, ${$arrowSize}px)`,\n            }),\n        }),\n    });\n    /* ------------------- */\n    /* LIFECYCLE & EFFECTS */\n    /* ------------------- */\n    safeOnMount(() => {\n        if (!isBrowser)\n            return;\n        const menuEl = document.getElementById(get(ids.menu));\n        if (!menuEl)\n            return;\n        const triggerEl = document.getElementById(get(ids.trigger));\n        if (triggerEl) {\n            activeTrigger.set(triggerEl);\n        }\n        const selectedEl = menuEl.querySelector('[data-selected]');\n        if (!isHTMLElement(selectedEl))\n            return;\n    });\n    /**\n     * Handles moving the `data-highlighted` attribute between items when\n     * the user moves their pointer or navigates with their keyboard.\n     */\n    effect([highlightedItem], ([$highlightedItem]) => {\n        if (!isBrowser)\n            return;\n        const menuElement = document.getElementById(get(ids.menu));\n        if (!isHTMLElement(menuElement))\n            return;\n        getOptions(menuElement).forEach((node) => {\n            if (node === $highlightedItem) {\n                addHighlight(node);\n            }\n            else {\n                removeHighlight(node);\n            }\n        });\n    });\n    effect([open], ([$open]) => {\n        if (!isBrowser)\n            return;\n        let unsubScroll = noop;\n        if (get(preventScroll) && $open) {\n            unsubScroll = removeScroll();\n        }\n        return () => {\n            unsubScroll();\n        };\n    });\n    return {\n        ids,\n        elements: {\n            trigger,\n            option,\n            menu,\n            label,\n            hiddenInput,\n            arrow,\n        },\n        states: {\n            open,\n            selected,\n            highlighted,\n            highlightedItem,\n        },\n        helpers: {\n            isSelected,\n            isHighlighted,\n            closeMenu,\n        },\n        options,\n    };\n}\n", "import { useEscapeKeydown } from '../../internal/actions/index.js';\nimport { addEventListener, addMeltEventListener, builder, createElHelpers, effect, executeCallbacks, isContentEditable, isHTMLInputElement, kbd, noop, omit, } from '../../internal/helpers/index.js';\nimport { writable } from 'svelte/store';\nimport { createListbox } from '../listbox/create.js';\n// prettier-ignore\nexport const INTERACTION_KEYS = [kbd.ARROW_LEFT, kbd.ESCAPE, kbd.ARROW_RIGHT, kbd.SHIFT, kbd.CAPS_LOCK, kbd.CONTROL, kbd.ALT, kbd.META, kbd.ENTER, kbd.F1, kbd.F2, kbd.F3, kbd.F4, kbd.F5, kbd.F6, kbd.F7, kbd.F8, kbd.F9, kbd.F10, kbd.F11, kbd.F12];\nconst { name } = createElHelpers('combobox');\n/**\n * Creates an ARIA-1.2-compliant combobox.\n *\n * @TODO multi-select using `tags-input` builder?\n */\nexport function createCombobox(props) {\n    const listbox = createListbox({ ...props, builder: 'combobox', typeahead: false });\n    const inputValue = writable('');\n    const touchedInput = writable(false);\n    /* -------- */\n    /* ELEMENTS */\n    /* -------- */\n    /** Action and attributes for the text input. */\n    const input = builder(name('input'), {\n        stores: [listbox.elements.trigger, inputValue],\n        returned: ([$trigger, $inputValue]) => {\n            return {\n                ...omit($trigger, 'action'),\n                role: 'combobox',\n                value: $inputValue,\n            };\n        },\n        action: (node) => {\n            const unsubscribe = executeCallbacks(addMeltEventListener(node, 'input', (e) => {\n                if (!isHTMLInputElement(e.target) && !isContentEditable(e.target))\n                    return;\n                touchedInput.set(true);\n            }), \n            // This shouldn't be cancelled ever, so we don't use addMeltEventListener.\n            addEventListener(node, 'input', (e) => {\n                if (isHTMLInputElement(e.target)) {\n                    inputValue.set(e.target.value);\n                }\n                if (isContentEditable(e.target)) {\n                    inputValue.set(e.target.innerText);\n                }\n            }));\n            let unsubEscapeKeydown = noop;\n            const escape = useEscapeKeydown(node, {\n                handler: () => {\n                    listbox.helpers.closeMenu();\n                },\n            });\n            if (escape && escape.destroy) {\n                unsubEscapeKeydown = escape.destroy;\n            }\n            const { destroy } = listbox.elements.trigger(node);\n            return {\n                destroy() {\n                    destroy?.();\n                    unsubscribe();\n                    unsubEscapeKeydown();\n                },\n            };\n        },\n    });\n    effect(listbox.states.open, ($open) => {\n        if (!$open) {\n            touchedInput.set(false);\n        }\n    });\n    return {\n        ...listbox,\n        elements: {\n            ...omit(listbox.elements, 'trigger'),\n            input,\n        },\n        states: {\n            ...listbox.states,\n            touchedInput,\n            inputValue,\n        },\n    };\n}\n", "import { createSeparator } from '../index.js';\nimport { usePopper } from '../../internal/actions/index.js';\nimport { FIRST_LAST_KEYS, SELECTION_KEYS, addEventListener, addHighlight, addMeltEventListener, builder, createElHelpers, createTypeaheadSearch, derivedVisible, derivedWithUnsubscribe, disabledAttr, effect, executeCallbacks, generateIds, getNextFocusable, getPortalDestination, getPreviousFocusable, handleFocus, handleRovingFocus, isBrowser, isElementDisabled, isHTMLElement, kbd, noop, omit, overridable, removeHighlight, removeScroll, sleep, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { tick } from 'svelte';\nimport { derived, get, writable } from 'svelte/store';\nimport { safeOnMount } from '../../internal/helpers/lifecycle.js';\nexport const SUB_OPEN_KEYS = {\n    ltr: [...SELECTION_KEYS, kbd.ARROW_RIGHT],\n    rtl: [...SELECTION_KEYS, kbd.ARROW_LEFT],\n};\nexport const SUB_CLOSE_KEYS = {\n    ltr: [kbd.ARROW_LEFT],\n    rtl: [kbd.ARROW_RIGHT],\n};\nexport const menuIdParts = ['menu', 'trigger'];\nconst defaults = {\n    arrowSize: 8,\n    positioning: {\n        placement: 'bottom',\n    },\n    preventScroll: true,\n    closeOnEscape: true,\n    closeOnOutsideClick: true,\n    portal: 'body',\n    loop: false,\n    dir: 'ltr',\n    defaultOpen: false,\n    typeahead: true,\n    closeOnItemClick: true,\n};\nexport function createMenuBuilder(opts) {\n    const { name, selector } = createElHelpers(opts.selector);\n    const { preventScroll, arrowSize, positioning, closeOnEscape, closeOnOutsideClick, portal, forceVisible, typeahead, loop, closeFocus, disableFocusFirstItem, closeOnItemClick, } = opts.rootOptions;\n    const rootOpen = opts.rootOpen;\n    const rootActiveTrigger = opts.rootActiveTrigger;\n    /**\n     * Keeps track of the next/previous focusable element when the menu closes.\n     * This is because we are portaling the menu to the body and we need\n     * to be able to focus the next element in the DOM when the menu closes.\n     *\n     * Without keeping track of this, the focus would be reset to the top of\n     * the page (or the first focusable element in the body).\n     */\n    const nextFocusable = opts.nextFocusable;\n    const prevFocusable = opts.prevFocusable;\n    /**\n     * Keeps track of if the user is using the keyboard to navigate the menu.\n     * This is used to determine how we handle focus on open behavior differently\n     * than when the user is using the mouse.\n     */\n    const isUsingKeyboard = writable(false);\n    /**\n     * Stores used to manage the grace area for submenus. This prevents us\n     * from closing a submenu when the user is moving their mouse from the\n     * trigger to the submenu.\n     */\n    const lastPointerX = writable(0);\n    const pointerGraceIntent = writable(null);\n    const pointerDir = writable('right');\n    /**\n     * Track currently focused item in the menu.\n     */\n    const currentFocusedItem = writable(null);\n    const pointerMovingToSubmenu = derivedWithUnsubscribe([pointerDir, pointerGraceIntent], ([$pointerDir, $pointerGraceIntent]) => {\n        return (e) => {\n            const isMovingTowards = $pointerDir === $pointerGraceIntent?.side;\n            return isMovingTowards && isPointerInGraceArea(e, $pointerGraceIntent?.area);\n        };\n    });\n    const { typed, handleTypeaheadSearch } = createTypeaheadSearch();\n    const rootIds = toWritableStores({ ...generateIds(menuIdParts), ...opts.ids });\n    const isVisible = derivedVisible({\n        open: rootOpen,\n        forceVisible,\n        activeTrigger: rootActiveTrigger,\n    });\n    const rootMenu = builder(name(), {\n        stores: [isVisible, portal, rootIds.menu, rootIds.trigger],\n        returned: ([$isVisible, $portal, $rootMenuId, $rootTriggerId]) => {\n            return {\n                role: 'menu',\n                hidden: $isVisible ? undefined : true,\n                style: styleToString({\n                    display: $isVisible ? undefined : 'none',\n                }),\n                id: $rootMenuId,\n                'aria-labelledby': $rootTriggerId,\n                'data-state': $isVisible ? 'open' : 'closed',\n                'data-portal': $portal ? '' : undefined,\n                tabindex: -1,\n            };\n        },\n        action: (node) => {\n            let unsubPopper = noop;\n            const unsubDerived = effect([isVisible, rootActiveTrigger, positioning, closeOnOutsideClick, portal, closeOnEscape], ([$isVisible, $rootActiveTrigger, $positioning, $closeOnOutsideClick, $portal, $closeOnEscape,]) => {\n                unsubPopper();\n                if (!$isVisible || !$rootActiveTrigger)\n                    return;\n                tick().then(() => {\n                    setMeltMenuAttribute(node, selector);\n                    const popper = usePopper(node, {\n                        anchorElement: $rootActiveTrigger,\n                        open: rootOpen,\n                        options: {\n                            floating: $positioning,\n                            clickOutside: $closeOnOutsideClick ? undefined : null,\n                            portal: getPortalDestination(node, $portal),\n                            escapeKeydown: $closeOnEscape ? undefined : null,\n                        },\n                    });\n                    if (popper && popper.destroy) {\n                        unsubPopper = popper.destroy;\n                    }\n                });\n            });\n            const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => {\n                const target = e.target;\n                const menuEl = e.currentTarget;\n                if (!isHTMLElement(target) || !isHTMLElement(menuEl))\n                    return;\n                /**\n                 * Submenu key events bubble through portals and\n                 * we only care about key events that happen inside this menu.\n                 */\n                const isKeyDownInside = target.closest('[role=\"menu\"]') === menuEl;\n                if (!isKeyDownInside)\n                    return;\n                if (FIRST_LAST_KEYS.includes(e.key)) {\n                    handleMenuNavigation(e, get(loop) ?? false);\n                }\n                /**\n                 * Menus should not be navigated using tab\n                 * @see https://www.w3.org/WAI/ARIA/apg/practices/keyboard-interface/#kbd_general_within\n                 */\n                if (e.key === kbd.TAB) {\n                    e.preventDefault();\n                    rootOpen.set(false);\n                    handleTabNavigation(e, nextFocusable, prevFocusable);\n                    return;\n                }\n                /**\n                 * Check for typeahead search and handle it.\n                 */\n                const isCharacterKey = e.key.length === 1;\n                const isModifierKey = e.ctrlKey || e.altKey || e.metaKey;\n                if (!isModifierKey && isCharacterKey && get(typeahead) === true) {\n                    handleTypeaheadSearch(e.key, getMenuItems(menuEl));\n                }\n            }));\n            return {\n                destroy() {\n                    unsubDerived();\n                    unsubEvents();\n                    unsubPopper();\n                },\n            };\n        },\n    });\n    const rootTrigger = builder(name('trigger'), {\n        stores: [rootOpen, rootIds.menu, rootIds.trigger],\n        returned: ([$rootOpen, $rootMenuId, $rootTriggerId]) => {\n            return {\n                'aria-controls': $rootMenuId,\n                'aria-expanded': $rootOpen,\n                'data-state': $rootOpen ? 'open' : 'closed',\n                id: $rootTriggerId,\n                tabindex: 0,\n            };\n        },\n        action: (node) => {\n            applyAttrsIfDisabled(node);\n            rootActiveTrigger.update((p) => {\n                if (p)\n                    return p;\n                return node;\n            });\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', (e) => {\n                const $rootOpen = get(rootOpen);\n                const triggerEl = e.currentTarget;\n                if (!isHTMLElement(triggerEl))\n                    return;\n                handleOpen(triggerEl);\n                if (!$rootOpen)\n                    e.preventDefault();\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                const triggerEl = e.currentTarget;\n                if (!isHTMLElement(triggerEl))\n                    return;\n                if (!(SELECTION_KEYS.includes(e.key) || e.key === kbd.ARROW_DOWN))\n                    return;\n                e.preventDefault();\n                handleOpen(triggerEl);\n                const menuId = triggerEl.getAttribute('aria-controls');\n                if (!menuId)\n                    return;\n                const menu = document.getElementById(menuId);\n                if (!menu)\n                    return;\n                const menuItems = getMenuItems(menu);\n                if (!menuItems.length)\n                    return;\n                handleRovingFocus(menuItems[0]);\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const rootArrow = builder(name('arrow'), {\n        stores: arrowSize,\n        returned: ($arrowSize) => ({\n            'data-arrow': true,\n            style: styleToString({\n                position: 'absolute',\n                width: `var(--arrow-size, ${$arrowSize}px)`,\n                height: `var(--arrow-size, ${$arrowSize}px)`,\n            }),\n        }),\n    });\n    const item = builder(name('item'), {\n        returned: () => {\n            return {\n                role: 'menuitem',\n                tabindex: -1,\n                'data-orientation': 'vertical',\n            };\n        },\n        action: (node) => {\n            setMeltMenuAttribute(node, selector);\n            applyAttrsIfDisabled(node);\n            const unsub = executeCallbacks(addMeltEventListener(node, 'pointerdown', (e) => {\n                const itemEl = e.currentTarget;\n                if (!isHTMLElement(itemEl))\n                    return;\n                if (isElementDisabled(itemEl)) {\n                    e.preventDefault();\n                    return;\n                }\n            }), addMeltEventListener(node, 'click', (e) => {\n                const itemEl = e.currentTarget;\n                if (!isHTMLElement(itemEl))\n                    return;\n                if (isElementDisabled(itemEl)) {\n                    e.preventDefault();\n                    return;\n                }\n                if (e.defaultPrevented) {\n                    handleRovingFocus(itemEl);\n                    return;\n                }\n                if (get(closeOnItemClick)) {\n                    // Allows forms to submit before the menu is removed from the DOM\n                    sleep(1).then(() => {\n                        rootOpen.set(false);\n                    });\n                }\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                onItemKeyDown(e);\n            }), addMeltEventListener(node, 'pointermove', (e) => {\n                onMenuItemPointerMove(e);\n            }), addMeltEventListener(node, 'pointerleave', (e) => {\n                onMenuItemPointerLeave(e);\n            }), addMeltEventListener(node, 'focusin', (e) => {\n                onItemFocusIn(e);\n            }), addMeltEventListener(node, 'focusout', (e) => {\n                onItemFocusOut(e);\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const group = builder(name('group'), {\n        returned: () => {\n            return (groupId) => ({\n                role: 'group',\n                'aria-labelledby': groupId,\n            });\n        },\n    });\n    const groupLabel = builder(name('group-label'), {\n        returned: () => {\n            return (groupId) => ({\n                id: groupId,\n            });\n        },\n    });\n    const checkboxItemDefaults = {\n        defaultChecked: false,\n        disabled: false,\n    };\n    const createCheckboxItem = (props) => {\n        const withDefaults = { ...checkboxItemDefaults, ...props };\n        const checkedWritable = withDefaults.checked ?? writable(withDefaults.defaultChecked ?? null);\n        const checked = overridable(checkedWritable, withDefaults.onCheckedChange);\n        const disabled = writable(withDefaults.disabled);\n        const checkboxItem = builder(name('checkbox-item'), {\n            stores: [checked, disabled],\n            returned: ([$checked, $disabled]) => {\n                return {\n                    role: 'menuitemcheckbox',\n                    tabindex: -1,\n                    'data-orientation': 'vertical',\n                    'aria-checked': isIndeterminate($checked) ? 'mixed' : $checked ? 'true' : 'false',\n                    'data-disabled': disabledAttr($disabled),\n                    'data-state': getCheckedState($checked),\n                };\n            },\n            action: (node) => {\n                setMeltMenuAttribute(node, selector);\n                applyAttrsIfDisabled(node);\n                const unsub = executeCallbacks(addMeltEventListener(node, 'pointerdown', (e) => {\n                    const itemEl = e.currentTarget;\n                    if (!isHTMLElement(itemEl))\n                        return;\n                    if (isElementDisabled(itemEl)) {\n                        e.preventDefault();\n                        return;\n                    }\n                }), addMeltEventListener(node, 'click', (e) => {\n                    const itemEl = e.currentTarget;\n                    if (!isHTMLElement(itemEl))\n                        return;\n                    if (isElementDisabled(itemEl)) {\n                        e.preventDefault();\n                        return;\n                    }\n                    if (e.defaultPrevented) {\n                        handleRovingFocus(itemEl);\n                        return;\n                    }\n                    checked.update((prev) => {\n                        if (isIndeterminate(prev))\n                            return true;\n                        return !prev;\n                    });\n                    if (get(closeOnItemClick)) {\n                        // We're waiting for a tick to let the checked store update\n                        // before closing the menu. If we don't, and the user was to hit\n                        // spacebar or enter twice really fast, the menu would close and\n                        // reopen without the checked state being updated.\n                        tick().then(() => {\n                            rootOpen.set(false);\n                        });\n                    }\n                }), addMeltEventListener(node, 'keydown', (e) => {\n                    onItemKeyDown(e);\n                }), addMeltEventListener(node, 'pointermove', (e) => {\n                    const itemEl = e.currentTarget;\n                    if (!isHTMLElement(itemEl))\n                        return;\n                    if (isElementDisabled(itemEl)) {\n                        onItemLeave(e);\n                        return;\n                    }\n                    onMenuItemPointerMove(e, itemEl);\n                }), addMeltEventListener(node, 'pointerleave', (e) => {\n                    onMenuItemPointerLeave(e);\n                }), addMeltEventListener(node, 'focusin', (e) => {\n                    onItemFocusIn(e);\n                }), addMeltEventListener(node, 'focusout', (e) => {\n                    onItemFocusOut(e);\n                }));\n                return {\n                    destroy: unsub,\n                };\n            },\n        });\n        const isChecked = derived(checked, ($checked) => $checked === true);\n        const _isIndeterminate = derived(checked, ($checked) => $checked === 'indeterminate');\n        return {\n            elements: {\n                checkboxItem,\n            },\n            states: {\n                checked,\n            },\n            helpers: {\n                isChecked,\n                isIndeterminate: _isIndeterminate,\n            },\n            options: {\n                disabled,\n            },\n        };\n    };\n    const createMenuRadioGroup = (args = {}) => {\n        const valueWritable = args.value ?? writable(args.defaultValue ?? null);\n        const value = overridable(valueWritable, args.onValueChange);\n        const radioGroup = builder(name('radio-group'), {\n            returned: () => ({\n                role: 'group',\n            }),\n        });\n        const radioItemDefaults = {\n            disabled: false,\n        };\n        const radioItem = builder(name('radio-item'), {\n            stores: [value],\n            returned: ([$value]) => {\n                return (itemProps) => {\n                    const { value: itemValue, disabled } = { ...radioItemDefaults, ...itemProps };\n                    const checked = $value === itemValue;\n                    return {\n                        disabled,\n                        role: 'menuitemradio',\n                        'data-state': checked ? 'checked' : 'unchecked',\n                        'aria-checked': checked,\n                        'data-disabled': disabledAttr(disabled),\n                        'data-value': itemValue,\n                        'data-orientation': 'vertical',\n                        tabindex: -1,\n                    };\n                };\n            },\n            action: (node) => {\n                setMeltMenuAttribute(node, selector);\n                const unsub = executeCallbacks(addMeltEventListener(node, 'pointerdown', (e) => {\n                    const itemEl = e.currentTarget;\n                    if (!isHTMLElement(itemEl))\n                        return;\n                    const itemValue = node.dataset.value;\n                    const disabled = node.dataset.disabled;\n                    if (disabled || itemValue === undefined) {\n                        e.preventDefault();\n                        return;\n                    }\n                }), addMeltEventListener(node, 'click', (e) => {\n                    const itemEl = e.currentTarget;\n                    if (!isHTMLElement(itemEl))\n                        return;\n                    const itemValue = node.dataset.value;\n                    const disabled = node.dataset.disabled;\n                    if (disabled || itemValue === undefined) {\n                        e.preventDefault();\n                        return;\n                    }\n                    if (e.defaultPrevented) {\n                        if (!isHTMLElement(itemEl))\n                            return;\n                        handleRovingFocus(itemEl);\n                        return;\n                    }\n                    value.set(itemValue);\n                    if (get(closeOnItemClick)) {\n                        // We're waiting for a tick to let the checked store update\n                        // before closing the menu. If we don't, and the user was to hit\n                        // spacebar or enter twice really fast, the menu would close and\n                        // reopen without the checked state being updated.\n                        tick().then(() => {\n                            rootOpen.set(false);\n                        });\n                    }\n                }), addMeltEventListener(node, 'keydown', (e) => {\n                    onItemKeyDown(e);\n                }), addMeltEventListener(node, 'pointermove', (e) => {\n                    const itemEl = e.currentTarget;\n                    if (!isHTMLElement(itemEl))\n                        return;\n                    const itemValue = node.dataset.value;\n                    const disabled = node.dataset.disabled;\n                    if (disabled || itemValue === undefined) {\n                        onItemLeave(e);\n                        return;\n                    }\n                    onMenuItemPointerMove(e, itemEl);\n                }), addMeltEventListener(node, 'pointerleave', (e) => {\n                    onMenuItemPointerLeave(e);\n                }), addMeltEventListener(node, 'focusin', (e) => {\n                    onItemFocusIn(e);\n                }), addMeltEventListener(node, 'focusout', (e) => {\n                    onItemFocusOut(e);\n                }));\n                return {\n                    destroy: unsub,\n                };\n            },\n        });\n        const isChecked = derived(value, ($value) => {\n            return (itemValue) => {\n                return $value === itemValue;\n            };\n        });\n        return {\n            elements: {\n                radioGroup,\n                radioItem,\n            },\n            states: {\n                value,\n            },\n            helpers: {\n                isChecked,\n            },\n        };\n    };\n    const { elements: { root: separator }, } = createSeparator({\n        orientation: 'horizontal',\n    });\n    /* -------------------------------------------------------------------------------------------------\n     * SUBMENU\n     * -----------------------------------------------------------------------------------------------*/\n    const subMenuDefaults = {\n        ...defaults,\n        disabled: false,\n        positioning: {\n            placement: 'right-start',\n            gutter: 8,\n        },\n    };\n    const createSubmenu = (args) => {\n        const withDefaults = { ...subMenuDefaults, ...args };\n        const subOpenWritable = withDefaults.open ?? writable(false);\n        const subOpen = overridable(subOpenWritable, withDefaults?.onOpenChange);\n        // options\n        const options = toWritableStores(omit(withDefaults, 'ids'));\n        const { positioning, arrowSize, disabled } = options;\n        const subActiveTrigger = writable(null);\n        const subOpenTimer = writable(null);\n        const pointerGraceTimer = writable(0);\n        const subIds = toWritableStores({ ...generateIds(menuIdParts), ...withDefaults.ids });\n        safeOnMount(() => {\n            /**\n             * Set active trigger on mount to handle controlled/forceVisible\n             * state.\n             */\n            const subTrigger = document.getElementById(get(subIds.trigger));\n            if (subTrigger) {\n                subActiveTrigger.set(subTrigger);\n            }\n        });\n        const subIsVisible = derivedVisible({\n            open: subOpen,\n            forceVisible,\n            activeTrigger: subActiveTrigger,\n        });\n        const subMenu = builder(name('submenu'), {\n            stores: [subIsVisible, subIds.menu, subIds.trigger],\n            returned: ([$subIsVisible, $subMenuId, $subTriggerId]) => {\n                return {\n                    role: 'menu',\n                    hidden: $subIsVisible ? undefined : true,\n                    style: styleToString({\n                        display: $subIsVisible ? undefined : 'none',\n                    }),\n                    id: $subMenuId,\n                    'aria-labelledby': $subTriggerId,\n                    'data-state': $subIsVisible ? 'open' : 'closed',\n                    // unit tests fail on `.closest` if the id starts with a number\n                    // so using a data attribute\n                    'data-id': $subMenuId,\n                    tabindex: -1,\n                };\n            },\n            action: (node) => {\n                let unsubPopper = noop;\n                const unsubDerived = effect([subIsVisible, positioning], ([$subIsVisible, $positioning]) => {\n                    unsubPopper();\n                    if (!$subIsVisible)\n                        return;\n                    const activeTrigger = get(subActiveTrigger);\n                    if (!activeTrigger)\n                        return;\n                    tick().then(() => {\n                        const parentMenuEl = getParentMenu(activeTrigger);\n                        const popper = usePopper(node, {\n                            anchorElement: activeTrigger,\n                            open: subOpen,\n                            options: {\n                                floating: $positioning,\n                                portal: isHTMLElement(parentMenuEl) ? parentMenuEl : undefined,\n                                clickOutside: null,\n                                focusTrap: null,\n                                escapeKeydown: null,\n                            },\n                        });\n                        if (popper && popper.destroy) {\n                            unsubPopper = popper.destroy;\n                        }\n                    });\n                });\n                const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => {\n                    if (e.key === kbd.ESCAPE) {\n                        return;\n                    }\n                    // Submenu key events bubble through portals.\n                    // We only want the keys in this menu.\n                    const target = e.target;\n                    const menuEl = e.currentTarget;\n                    if (!isHTMLElement(target) || !isHTMLElement(menuEl))\n                        return;\n                    const isKeyDownInside = target.closest('[role=\"menu\"]') === menuEl;\n                    if (!isKeyDownInside)\n                        return;\n                    if (FIRST_LAST_KEYS.includes(e.key)) {\n                        // prevent events from bubbling\n                        e.stopImmediatePropagation();\n                        handleMenuNavigation(e, get(loop) ?? false);\n                        return;\n                    }\n                    const isCloseKey = SUB_CLOSE_KEYS['ltr'].includes(e.key);\n                    const isModifierKey = e.ctrlKey || e.altKey || e.metaKey;\n                    const isCharacterKey = e.key.length === 1;\n                    // close the submenu if the user presses a close key\n                    if (isCloseKey) {\n                        const $subActiveTrigger = get(subActiveTrigger);\n                        e.preventDefault();\n                        subOpen.update(() => {\n                            if ($subActiveTrigger) {\n                                handleRovingFocus($subActiveTrigger);\n                            }\n                            return false;\n                        });\n                        return;\n                    }\n                    /**\n                     * Menus should not be navigated using tab, so we prevent it.\n                     * @see https://www.w3.org/WAI/ARIA/apg/practices/keyboard-interface/#kbd_general_within\n                     */\n                    if (e.key === kbd.TAB) {\n                        e.preventDefault();\n                        rootOpen.set(false);\n                        handleTabNavigation(e, nextFocusable, prevFocusable);\n                        return;\n                    }\n                    if (!isModifierKey && isCharacterKey && get(typeahead) === true) {\n                        // typeahead logic\n                        handleTypeaheadSearch(e.key, getMenuItems(menuEl));\n                    }\n                }), addMeltEventListener(node, 'pointermove', (e) => {\n                    onMenuPointerMove(e);\n                }), addMeltEventListener(node, 'focusout', (e) => {\n                    const $subActiveTrigger = get(subActiveTrigger);\n                    if (get(isUsingKeyboard)) {\n                        const target = e.target;\n                        const submenuEl = document.getElementById(get(subIds.menu));\n                        if (!isHTMLElement(submenuEl) || !isHTMLElement(target))\n                            return;\n                        if (!submenuEl.contains(target) && target !== $subActiveTrigger) {\n                            subOpen.set(false);\n                        }\n                    }\n                    else {\n                        const menuEl = e.currentTarget;\n                        const relatedTarget = e.relatedTarget;\n                        if (!isHTMLElement(relatedTarget) || !isHTMLElement(menuEl))\n                            return;\n                        if (!menuEl.contains(relatedTarget) && relatedTarget !== $subActiveTrigger) {\n                            subOpen.set(false);\n                        }\n                    }\n                }));\n                return {\n                    destroy() {\n                        unsubDerived();\n                        unsubPopper();\n                        unsubEvents();\n                    },\n                };\n            },\n        });\n        const subTrigger = builder(name('subtrigger'), {\n            stores: [subOpen, disabled, subIds.menu, subIds.trigger],\n            returned: ([$subOpen, $disabled, $subMenuId, $subTriggerId]) => {\n                return {\n                    role: 'menuitem',\n                    id: $subTriggerId,\n                    tabindex: -1,\n                    'aria-controls': $subMenuId,\n                    'aria-expanded': $subOpen,\n                    'data-state': $subOpen ? 'open' : 'closed',\n                    'data-disabled': disabledAttr($disabled),\n                    'aria-haspopop': 'menu',\n                };\n            },\n            action: (node) => {\n                setMeltMenuAttribute(node, selector);\n                applyAttrsIfDisabled(node);\n                const unsubTimer = () => {\n                    clearTimerStore(subOpenTimer);\n                    window.clearTimeout(get(pointerGraceTimer));\n                    pointerGraceIntent.set(null);\n                };\n                const unsubEvents = executeCallbacks(addMeltEventListener(node, 'click', (e) => {\n                    if (e.defaultPrevented)\n                        return;\n                    const triggerEl = e.currentTarget;\n                    if (!isHTMLElement(triggerEl) || isElementDisabled(triggerEl))\n                        return;\n                    // Manually focus because iOS Safari doesn't always focus on click (e.g. buttons)\n                    handleRovingFocus(triggerEl);\n                    if (!get(subOpen)) {\n                        subOpen.update((prev) => {\n                            const isAlreadyOpen = prev;\n                            if (!isAlreadyOpen) {\n                                subActiveTrigger.set(triggerEl);\n                                return !prev;\n                            }\n                            return prev;\n                        });\n                    }\n                }), addMeltEventListener(node, 'keydown', (e) => {\n                    const $typed = get(typed);\n                    const triggerEl = e.currentTarget;\n                    if (!isHTMLElement(triggerEl) || isElementDisabled(triggerEl))\n                        return;\n                    const isTypingAhead = $typed.length > 0;\n                    if (isTypingAhead && e.key === kbd.SPACE)\n                        return;\n                    if (SUB_OPEN_KEYS['ltr'].includes(e.key)) {\n                        if (!get(subOpen)) {\n                            triggerEl.click();\n                            e.preventDefault();\n                            return;\n                        }\n                        const menuId = triggerEl.getAttribute('aria-controls');\n                        if (!menuId)\n                            return;\n                        const menuEl = document.getElementById(menuId);\n                        if (!isHTMLElement(menuEl))\n                            return;\n                        const firstItem = getMenuItems(menuEl)[0];\n                        handleRovingFocus(firstItem);\n                    }\n                }), addMeltEventListener(node, 'pointermove', (e) => {\n                    if (!isMouse(e))\n                        return;\n                    onItemEnter(e);\n                    if (e.defaultPrevented)\n                        return;\n                    const triggerEl = e.currentTarget;\n                    if (!isHTMLElement(triggerEl))\n                        return;\n                    if (!isFocusWithinSubmenu(get(subIds.menu))) {\n                        handleRovingFocus(triggerEl);\n                    }\n                    const openTimer = get(subOpenTimer);\n                    if (!get(subOpen) && !openTimer && !isElementDisabled(triggerEl)) {\n                        subOpenTimer.set(window.setTimeout(() => {\n                            subOpen.update(() => {\n                                subActiveTrigger.set(triggerEl);\n                                return true;\n                            });\n                            clearTimerStore(subOpenTimer);\n                        }, 100));\n                    }\n                }), addMeltEventListener(node, 'pointerleave', (e) => {\n                    if (!isMouse(e))\n                        return;\n                    clearTimerStore(subOpenTimer);\n                    const submenuEl = document.getElementById(get(subIds.menu));\n                    const contentRect = submenuEl?.getBoundingClientRect();\n                    if (contentRect) {\n                        const side = submenuEl?.dataset.side;\n                        const rightSide = side === 'right';\n                        const bleed = rightSide ? -5 : +5;\n                        const contentNearEdge = contentRect[rightSide ? 'left' : 'right'];\n                        const contentFarEdge = contentRect[rightSide ? 'right' : 'left'];\n                        pointerGraceIntent.set({\n                            area: [\n                                // Apply a bleed on clientX to ensure that our exit point is\n                                // consistently within polygon bounds\n                                { x: e.clientX + bleed, y: e.clientY },\n                                { x: contentNearEdge, y: contentRect.top },\n                                { x: contentFarEdge, y: contentRect.top },\n                                { x: contentFarEdge, y: contentRect.bottom },\n                                { x: contentNearEdge, y: contentRect.bottom },\n                            ],\n                            side,\n                        });\n                        window.clearTimeout(get(pointerGraceTimer));\n                        pointerGraceTimer.set(window.setTimeout(() => {\n                            pointerGraceIntent.set(null);\n                        }, 300));\n                    }\n                    else {\n                        onTriggerLeave(e);\n                        if (e.defaultPrevented)\n                            return;\n                        // There's 100ms where the user may leave an item before the submenu was opened.\n                        pointerGraceIntent.set(null);\n                    }\n                }), addMeltEventListener(node, 'focusout', (e) => {\n                    const triggerEl = e.currentTarget;\n                    if (!isHTMLElement(triggerEl))\n                        return;\n                    removeHighlight(triggerEl);\n                    const relatedTarget = e.relatedTarget;\n                    if (!isHTMLElement(relatedTarget))\n                        return;\n                    const menuId = triggerEl.getAttribute('aria-controls');\n                    if (!menuId)\n                        return;\n                    const menu = document.getElementById(menuId);\n                    if (menu && !menu.contains(relatedTarget)) {\n                        subOpen.set(false);\n                    }\n                }), addMeltEventListener(node, 'focusin', (e) => {\n                    onItemFocusIn(e);\n                }));\n                return {\n                    destroy() {\n                        unsubTimer();\n                        unsubEvents();\n                    },\n                };\n            },\n        });\n        const subArrow = builder(name('subarrow'), {\n            stores: arrowSize,\n            returned: ($arrowSize) => ({\n                'data-arrow': true,\n                style: styleToString({\n                    position: 'absolute',\n                    width: `var(--arrow-size, ${$arrowSize}px)`,\n                    height: `var(--arrow-size, ${$arrowSize}px)`,\n                }),\n            }),\n        });\n        /* -------------------------------------------------------------------------------------------------\n         * Sub Menu Effects\n         * -----------------------------------------------------------------------------------------------*/\n        effect([rootOpen], ([$rootOpen]) => {\n            if (!$rootOpen) {\n                subActiveTrigger.set(null);\n                subOpen.set(false);\n            }\n        });\n        effect([pointerGraceIntent], ([$pointerGraceIntent]) => {\n            if (!isBrowser || $pointerGraceIntent)\n                return;\n            window.clearTimeout(get(pointerGraceTimer));\n        });\n        effect([subOpen], ([$subOpen]) => {\n            if (!isBrowser)\n                return;\n            sleep(1).then(() => {\n                const menuEl = document.getElementById(get(subIds.menu));\n                if (!menuEl)\n                    return;\n                if ($subOpen && get(isUsingKeyboard)) {\n                    // Selector to get menu items belonging to menu\n                    const menuItems = getMenuItems(menuEl);\n                    if (!menuItems.length)\n                        return;\n                    handleRovingFocus(menuItems[0]);\n                }\n                if (!$subOpen) {\n                    const focusedItem = get(currentFocusedItem);\n                    if (focusedItem && menuEl.contains(focusedItem)) {\n                        removeHighlight(focusedItem);\n                    }\n                }\n                if (menuEl && !$subOpen) {\n                    const subTriggerEl = document.getElementById(get(subIds.trigger));\n                    if (!subTriggerEl || document.activeElement === subTriggerEl)\n                        return;\n                    removeHighlight(subTriggerEl);\n                }\n            });\n        });\n        return {\n            ids: subIds,\n            elements: {\n                subTrigger,\n                subMenu,\n                subArrow,\n            },\n            states: {\n                subOpen,\n            },\n            options,\n        };\n    };\n    safeOnMount(() => {\n        /**\n         * We need to set the active trigger on mount to cover the\n         * case where the user sets the `open` store to `true` without\n         * clicking on the trigger.\n         */\n        const triggerEl = document.getElementById(get(rootIds.trigger));\n        if (isHTMLElement(triggerEl) && get(rootOpen)) {\n            rootActiveTrigger.set(triggerEl);\n        }\n        const unsubs = [];\n        const handlePointer = () => isUsingKeyboard.set(false);\n        const handleKeyDown = () => {\n            isUsingKeyboard.set(true);\n            unsubs.push(executeCallbacks(addEventListener(document, 'pointerdown', handlePointer, { capture: true, once: true }), addEventListener(document, 'pointermove', handlePointer, { capture: true, once: true })));\n        };\n        const keydownListener = (e) => {\n            if (e.key === kbd.ESCAPE && get(closeOnEscape)) {\n                rootOpen.set(false);\n                return;\n            }\n        };\n        unsubs.push(addEventListener(document, 'keydown', handleKeyDown, { capture: true }));\n        unsubs.push(addEventListener(document, 'keydown', keydownListener));\n        return () => {\n            unsubs.forEach((unsub) => unsub());\n        };\n    });\n    /* -------------------------------------------------------------------------------------------------\n     * Root Effects\n     * -----------------------------------------------------------------------------------------------*/\n    effect([rootOpen, currentFocusedItem], ([$rootOpen, $currentFocusedItem]) => {\n        if (!$rootOpen && $currentFocusedItem) {\n            removeHighlight($currentFocusedItem);\n        }\n    });\n    effect([rootOpen, rootActiveTrigger, preventScroll], ([$rootOpen, $rootActiveTrigger, $preventScroll]) => {\n        if (!isBrowser)\n            return;\n        const unsubs = [];\n        if (opts.removeScroll && $rootOpen && $preventScroll) {\n            unsubs.push(removeScroll());\n        }\n        const $closeFocus = get(closeFocus);\n        if (!$rootOpen) {\n            if ($rootActiveTrigger) {\n                // If we already have a reference to the trigger, focus it\n                handleFocus({ prop: $closeFocus, defaultEl: $rootActiveTrigger });\n            }\n            else {\n                // otherwise we'll get the trigger el and focus it\n                handleFocus({\n                    prop: $closeFocus,\n                    defaultEl: document.getElementById(get(rootIds.trigger)),\n                });\n            }\n        }\n        // if the menu is open, we'll sleep for a sec so the menu can render\n        // before we focus on either the first item or the menu itself.\n        sleep(1).then(() => {\n            const menuEl = document.getElementById(get(rootIds.menu));\n            if (menuEl && $rootOpen && get(isUsingKeyboard)) {\n                if (get(disableFocusFirstItem)) {\n                    handleRovingFocus(menuEl);\n                    return;\n                }\n                // Get menu items belonging to the root menu\n                const menuItems = getMenuItems(menuEl);\n                if (!menuItems.length)\n                    return;\n                // Focus on first menu item\n                handleRovingFocus(menuItems[0]);\n            }\n        });\n        return () => {\n            unsubs.forEach((unsub) => unsub());\n        };\n    });\n    effect(rootOpen, ($rootOpen) => {\n        if (!isBrowser)\n            return;\n        const handlePointer = () => isUsingKeyboard.set(false);\n        const handleKeyDown = (e) => {\n            isUsingKeyboard.set(true);\n            if (e.key === kbd.ESCAPE && $rootOpen && get(closeOnEscape)) {\n                rootOpen.set(false);\n                return;\n            }\n        };\n        return executeCallbacks(addEventListener(document, 'pointerdown', handlePointer, { capture: true, once: true }), addEventListener(document, 'pointermove', handlePointer, { capture: true, once: true }), addEventListener(document, 'keydown', handleKeyDown, { capture: true }));\n    });\n    function handleOpen(triggerEl) {\n        rootOpen.update((prev) => {\n            const isOpen = !prev;\n            if (isOpen) {\n                nextFocusable.set(getNextFocusable(triggerEl));\n                prevFocusable.set(getPreviousFocusable(triggerEl));\n                rootActiveTrigger.set(triggerEl);\n            }\n            return isOpen;\n        });\n    }\n    /* -------------------------------------------------------------------------------------------------\n     * Pointer Event Effects\n     * -----------------------------------------------------------------------------------------------*/\n    function onItemFocusIn(e) {\n        const itemEl = e.currentTarget;\n        if (!isHTMLElement(itemEl))\n            return;\n        const $currentFocusedItem = get(currentFocusedItem);\n        if ($currentFocusedItem) {\n            removeHighlight($currentFocusedItem);\n        }\n        addHighlight(itemEl);\n        /**\n         * Accomodates for Firefox focus event behavior, which differs\n         * from other browsers. We're setting the current focused item\n         * so when we close the menu, we can remove the data-highlighted\n         * attribute from the item, since a blur nor focusout event will be fired\n         * when the menu is closed via `clickOutside` or the ESC key.\n         */\n        currentFocusedItem.set(itemEl);\n    }\n    /**\n     * Each of the menu items share the same focusout event handler.\n     */\n    function onItemFocusOut(e) {\n        const itemEl = e.currentTarget;\n        if (!isHTMLElement(itemEl))\n            return;\n        removeHighlight(itemEl);\n    }\n    function onItemEnter(e) {\n        if (isPointerMovingToSubmenu(e)) {\n            e.preventDefault();\n        }\n    }\n    function onItemLeave(e) {\n        if (isPointerMovingToSubmenu(e)) {\n            return;\n        }\n        const target = e.target;\n        if (!isHTMLElement(target))\n            return;\n        const parentMenuEl = getParentMenu(target);\n        if (!parentMenuEl)\n            return;\n        handleRovingFocus(parentMenuEl);\n    }\n    function onTriggerLeave(e) {\n        if (isPointerMovingToSubmenu(e)) {\n            e.preventDefault();\n        }\n    }\n    function onMenuPointerMove(e) {\n        if (!isMouse(e))\n            return;\n        const target = e.target;\n        const currentTarget = e.currentTarget;\n        if (!isHTMLElement(currentTarget) || !isHTMLElement(target))\n            return;\n        const $lastPointerX = get(lastPointerX);\n        const pointerXHasChanged = $lastPointerX !== e.clientX;\n        // We don't use `e.movementX` for this check because Safari will\n        // always return `0` on a pointer e.\n        if (currentTarget.contains(target) && pointerXHasChanged) {\n            const newDir = e.clientX > $lastPointerX ? 'right' : 'left';\n            pointerDir.set(newDir);\n            lastPointerX.set(e.clientX);\n        }\n    }\n    function onMenuItemPointerMove(e, currTarget = null) {\n        if (!isMouse(e))\n            return;\n        onItemEnter(e);\n        if (e.defaultPrevented)\n            return;\n        // if we've already checked the current target, we don't need to again\n        if (currTarget) {\n            handleRovingFocus(currTarget);\n            return;\n        }\n        // otherwise we will\n        const currentTarget = e.currentTarget;\n        if (!isHTMLElement(currentTarget))\n            return;\n        // focus on the current menu item\n        handleRovingFocus(currentTarget);\n    }\n    function onMenuItemPointerLeave(e) {\n        if (!isMouse(e))\n            return;\n        onItemLeave(e);\n    }\n    /* -------------------------------------------------------------------------------------------------\n     * Helper Functions\n     * -----------------------------------------------------------------------------------------------*/\n    function onItemKeyDown(e) {\n        const $typed = get(typed);\n        const isTypingAhead = $typed.length > 0;\n        if (isTypingAhead && e.key === kbd.SPACE) {\n            e.preventDefault();\n            return;\n        }\n        if (SELECTION_KEYS.includes(e.key)) {\n            /**\n             * We prevent default browser behaviour for selection keys as they should trigger\n             * a selection only:\n             * - prevents space from scrolling the page.\n             * - if keydown causes focus to move, prevents keydown from firing on the new target.\n             */\n            e.preventDefault();\n            const itemEl = e.currentTarget;\n            if (!isHTMLElement(itemEl))\n                return;\n            itemEl.click();\n        }\n    }\n    function isIndeterminate(checked) {\n        return checked === 'indeterminate';\n    }\n    function getCheckedState(checked) {\n        return isIndeterminate(checked) ? 'indeterminate' : checked ? 'checked' : 'unchecked';\n    }\n    function isPointerMovingToSubmenu(e) {\n        return get(pointerMovingToSubmenu)(e);\n    }\n    /**\n     * Get the parent menu element for a menu item.\n     * @param element The menu item element\n     */\n    function getParentMenu(element) {\n        const parentMenuEl = element.closest('[role=\"menu\"]');\n        if (!isHTMLElement(parentMenuEl))\n            return null;\n        return parentMenuEl;\n    }\n    return {\n        ids: rootIds,\n        trigger: rootTrigger,\n        menu: rootMenu,\n        open: rootOpen,\n        item,\n        group,\n        groupLabel,\n        arrow: rootArrow,\n        options: opts.rootOptions,\n        createCheckboxItem,\n        createSubmenu,\n        createMenuRadioGroup,\n        separator,\n        handleTypeaheadSearch,\n    };\n}\nexport function handleTabNavigation(e, nextFocusable, prevFocusable) {\n    if (e.shiftKey) {\n        const $prevFocusable = get(prevFocusable);\n        if ($prevFocusable) {\n            e.preventDefault();\n            sleep(1).then(() => $prevFocusable.focus());\n            prevFocusable.set(null);\n        }\n    }\n    else {\n        const $nextFocusable = get(nextFocusable);\n        if ($nextFocusable) {\n            e.preventDefault();\n            sleep(1).then(() => $nextFocusable.focus());\n            nextFocusable.set(null);\n        }\n    }\n}\n/**\n * Get the menu items for a given menu element.\n * This only selects menu items that are direct children of the menu element,\n * not menu items that are nested in submenus.\n * @param element The menu item element\n */\nexport function getMenuItems(menuElement) {\n    return Array.from(menuElement.querySelectorAll(`[data-melt-menu-id=\"${menuElement.id}\"]`)).filter((item) => isHTMLElement(item));\n}\nexport function applyAttrsIfDisabled(element) {\n    if (!element || !isElementDisabled(element))\n        return;\n    element.setAttribute('data-disabled', '');\n    element.setAttribute('aria-disabled', 'true');\n}\n/**\n * Given a timer store, clear the timeout and set the store to null\n * @param openTimer The timer store\n */\nexport function clearTimerStore(timerStore) {\n    if (!isBrowser)\n        return;\n    const timer = get(timerStore);\n    if (timer) {\n        window.clearTimeout(timer);\n        timerStore.set(null);\n    }\n}\n/**\n * Check if the event is a mouse event\n * @param e The pointer event\n */\nfunction isMouse(e) {\n    return e.pointerType === 'mouse';\n}\n/**\n * Set the `data-melt-menu-id` attribute on a menu item element.\n * @param element The menu item element\n */\nexport function setMeltMenuAttribute(element, selector) {\n    if (!element)\n        return;\n    const menuEl = element.closest(`${selector()}, ${selector('submenu')}`);\n    if (!isHTMLElement(menuEl))\n        return;\n    element.setAttribute('data-melt-menu-id', menuEl.id);\n}\n/**\n * Keyboard event handler for menu navigation\n * @param e The keyboard event\n */\nexport function handleMenuNavigation(e, loop) {\n    e.preventDefault();\n    // currently focused menu item\n    const currentFocusedItem = document.activeElement;\n    // menu element being navigated\n    const currentTarget = e.currentTarget;\n    if (!isHTMLElement(currentFocusedItem) || !isHTMLElement(currentTarget))\n        return;\n    // menu items of the current menu\n    const menuItems = getMenuItems(currentTarget);\n    if (!menuItems.length)\n        return;\n    const candidateNodes = menuItems.filter((item) => {\n        if (item.hasAttribute('data-disabled') || item.getAttribute('disabled') === 'true') {\n            return false;\n        }\n        return true;\n    });\n    // Index of the currently focused item in the candidate nodes array\n    const currentIndex = candidateNodes.indexOf(currentFocusedItem);\n    // Calculate the index of the next menu item\n    let nextIndex;\n    switch (e.key) {\n        case kbd.ARROW_DOWN:\n            if (loop) {\n                nextIndex = currentIndex < candidateNodes.length - 1 ? currentIndex + 1 : 0;\n            }\n            else {\n                nextIndex = currentIndex < candidateNodes.length - 1 ? currentIndex + 1 : currentIndex;\n            }\n            break;\n        case kbd.ARROW_UP:\n            if (loop) {\n                nextIndex = currentIndex > 0 ? currentIndex - 1 : candidateNodes.length - 1;\n            }\n            else {\n                nextIndex =\n                    currentIndex < 0 ? candidateNodes.length - 1 : currentIndex > 0 ? currentIndex - 1 : 0;\n            }\n            break;\n        case kbd.HOME:\n            nextIndex = 0;\n            break;\n        case kbd.END:\n            nextIndex = candidateNodes.length - 1;\n            break;\n        default:\n            return;\n    }\n    handleRovingFocus(candidateNodes[nextIndex]);\n}\nfunction isPointerInGraceArea(e, area) {\n    if (!area)\n        return false;\n    const cursorPos = { x: e.clientX, y: e.clientY };\n    return isPointInPolygon(cursorPos, area);\n}\n/**\n * Determine if a point is inside of a polygon.\n *\n * @see https://github.com/substack/point-in-polygon\n */\nfunction isPointInPolygon(point, polygon) {\n    const { x, y } = point;\n    let inside = false;\n    for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n        const xi = polygon[i].x;\n        const yi = polygon[i].y;\n        const xj = polygon[j].x;\n        const yj = polygon[j].y;\n        // prettier-ignore\n        const intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect)\n            inside = !inside;\n    }\n    return inside;\n}\nfunction isFocusWithinSubmenu(submenuId) {\n    const activeEl = document.activeElement;\n    if (!isHTMLElement(activeEl))\n        return false;\n    // unit tests don't allow `.closest(#id)` to start with a number\n    // so we're using a data attribute.\n    const submenuEl = activeEl.closest(`[data-id=\"${submenuId}\"]`);\n    return isHTMLElement(submenuEl);\n}\n", "import { usePopper } from '../../internal/actions/index.js';\nimport { FIRST_LAST_KEYS, addMeltEventListener, builder, createElHelpers, derivedVisible, derivedWithUnsubscribe, effect, executeCallbacks, getNextFocusable, getPortalDestination, getPreviousFocusable, isHTMLElement, isLeftClick, kbd, noop, omit, overridable, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { tick } from 'svelte';\nimport { get, writable } from 'svelte/store';\nimport { applyAttrsIfDisabled, clearTimerStore, createMenuBuilder, getMenuItems, handleMenuNavigation, handleTabNavigation, setMeltMenuAttribute, } from '../menu/index.js';\nconst defaults = {\n    arrowSize: 8,\n    positioning: {\n        placement: 'bottom-start',\n    },\n    preventScroll: true,\n    closeOnEscape: true,\n    closeOnOutsideClick: true,\n    portal: undefined,\n    loop: false,\n    dir: 'ltr',\n    defaultOpen: false,\n    forceVisible: false,\n    typeahead: true,\n    disableFocusFirstItem: true,\n    closeFocus: undefined,\n    closeOnItemClick: true,\n};\nconst { name, selector } = createElHelpers('context-menu');\nexport function createContextMenu(props) {\n    const withDefaults = { ...defaults, ...props };\n    const rootOptions = toWritableStores(omit(withDefaults, 'ids'));\n    const { positioning, closeOnOutsideClick, portal, forceVisible, closeOnEscape, loop } = rootOptions;\n    const openWritable = withDefaults.open ?? writable(withDefaults.defaultOpen);\n    const rootOpen = overridable(openWritable, withDefaults?.onOpenChange);\n    const rootActiveTrigger = writable(null);\n    const nextFocusable = writable(null);\n    const prevFocusable = writable(null);\n    const { item, createCheckboxItem, arrow, createSubmenu, createMenuRadioGroup, ids, separator, handleTypeaheadSearch, group, groupLabel, } = createMenuBuilder({\n        rootOpen,\n        rootActiveTrigger,\n        rootOptions,\n        nextFocusable,\n        prevFocusable,\n        selector: 'context-menu',\n        removeScroll: true,\n        ids: withDefaults.ids,\n    });\n    const point = writable(null);\n    const virtual = derivedWithUnsubscribe([point], ([$point]) => {\n        if ($point === null)\n            return null;\n        return {\n            getBoundingClientRect: () => DOMRect.fromRect({\n                width: 0,\n                height: 0,\n                ...$point,\n            }),\n        };\n    });\n    const longPressTimer = writable(0);\n    function handleClickOutside(e) {\n        if (e.defaultPrevented)\n            return;\n        const target = e.target;\n        if (!(target instanceof Element))\n            return;\n        const isClickInsideTrigger = target.closest(`[data-id=\"${get(ids.trigger)}\"]`) !== null;\n        if (!isClickInsideTrigger || isLeftClick(e)) {\n            rootOpen.set(false);\n            return;\n        }\n    }\n    const isVisible = derivedVisible({\n        open: rootOpen,\n        forceVisible,\n        activeTrigger: rootActiveTrigger,\n    });\n    const menu = builder(name(), {\n        stores: [isVisible, portal, ids.menu, ids.trigger],\n        returned: ([$isVisible, $portal, $menuId, $triggerId]) => {\n            // We only want to render the menu when it's open and has an active trigger.\n            return {\n                role: 'menu',\n                hidden: $isVisible ? undefined : true,\n                style: styleToString({\n                    display: $isVisible ? undefined : 'none',\n                }),\n                id: $menuId,\n                'aria-labelledby': $triggerId,\n                'data-state': $isVisible ? 'open' : 'closed',\n                'data-portal': $portal ? '' : undefined,\n                tabindex: -1,\n            };\n        },\n        action: (node) => {\n            let unsubPopper = noop;\n            const unsubDerived = effect([isVisible, rootActiveTrigger, positioning, closeOnOutsideClick, portal, closeOnEscape], ([$isVisible, $rootActiveTrigger, $positioning, $closeOnOutsideClick, $portal, $closeOnEscape,]) => {\n                unsubPopper();\n                if (!$isVisible || !$rootActiveTrigger)\n                    return;\n                tick().then(() => {\n                    setMeltMenuAttribute(node, selector);\n                    const $virtual = get(virtual);\n                    const popper = usePopper(node, {\n                        anchorElement: $virtual ? $virtual : $rootActiveTrigger,\n                        open: rootOpen,\n                        options: {\n                            floating: $positioning,\n                            clickOutside: $closeOnOutsideClick\n                                ? {\n                                    handler: handleClickOutside,\n                                }\n                                : null,\n                            portal: getPortalDestination(node, $portal),\n                            escapeKeydown: $closeOnEscape ? undefined : null,\n                        },\n                    });\n                    if (!popper || !popper.destroy)\n                        return;\n                    unsubPopper = popper.destroy;\n                });\n            });\n            const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => {\n                const target = e.target;\n                const menuEl = e.currentTarget;\n                if (!isHTMLElement(target) || !isHTMLElement(menuEl))\n                    return;\n                /**\n                 * Submenu key events bubble through portals and\n                 * we only care about key events that happen inside this menu.\n                 */\n                const isKeyDownInside = target.closest(\"[role='menu']\") === menuEl;\n                if (!isKeyDownInside)\n                    return;\n                if (FIRST_LAST_KEYS.includes(e.key)) {\n                    handleMenuNavigation(e, get(loop));\n                }\n                /**\n                 * Menus should not be navigated using tab, so we prevent it.\n                 * @see https://www.w3.org/WAI/ARIA/apg/practices/keyboard-interface/#kbd_general_within\n                 */\n                if (e.key === kbd.TAB) {\n                    e.preventDefault();\n                    rootOpen.set(false);\n                    handleTabNavigation(e, nextFocusable, prevFocusable);\n                    return;\n                }\n                /**\n                 * Check for typeahead search and handle it.\n                 */\n                const isCharacterKey = e.key.length === 1;\n                const isModifierKey = e.ctrlKey || e.altKey || e.metaKey;\n                if (!isModifierKey && isCharacterKey) {\n                    handleTypeaheadSearch(e.key, getMenuItems(menuEl));\n                }\n            }));\n            return {\n                destroy() {\n                    unsubDerived();\n                    unsubEvents();\n                    unsubPopper();\n                },\n            };\n        },\n    });\n    const trigger = builder(name('trigger'), {\n        stores: [rootOpen, ids.trigger],\n        returned: ([$rootOpen, $triggerId]) => {\n            return {\n                'data-state': $rootOpen ? 'open' : 'closed',\n                id: $triggerId,\n                style: styleToString({\n                    WebkitTouchCallout: 'none',\n                }),\n                'data-id': $triggerId,\n            };\n        },\n        action: (node) => {\n            applyAttrsIfDisabled(node);\n            const handleOpen = (e) => {\n                point.set({\n                    x: e.clientX,\n                    y: e.clientY,\n                });\n                nextFocusable.set(getNextFocusable(node));\n                prevFocusable.set(getPreviousFocusable(node));\n                rootActiveTrigger.set(node);\n                rootOpen.set(true);\n            };\n            const unsubTimer = () => {\n                clearTimerStore(longPressTimer);\n            };\n            const unsub = executeCallbacks(addMeltEventListener(node, 'contextmenu', (e) => {\n                /**\n                 * Clear the long press because some platforms already\n                 * fire a contextmenu event on long press.\n                 */\n                clearTimerStore(longPressTimer);\n                handleOpen(e);\n                e.preventDefault();\n            }), addMeltEventListener(node, 'pointerdown', (e) => {\n                if (!isTouchOrPen(e))\n                    return;\n                // Clear the long press in case there's multiple touchpoints\n                clearTimerStore(longPressTimer);\n                longPressTimer.set(window.setTimeout(() => handleOpen(e), 700));\n            }), addMeltEventListener(node, 'pointermove', (e) => {\n                if (!isTouchOrPen(e))\n                    return;\n                clearTimerStore(longPressTimer);\n            }), addMeltEventListener(node, 'pointercancel', (e) => {\n                if (!isTouchOrPen(e))\n                    return;\n                clearTimerStore(longPressTimer);\n            }), addMeltEventListener(node, 'pointerup', (e) => {\n                if (!isTouchOrPen(e))\n                    return;\n                clearTimerStore(longPressTimer);\n            }));\n            return {\n                destroy() {\n                    unsubTimer();\n                    unsub();\n                },\n            };\n        },\n    });\n    return {\n        ids,\n        elements: {\n            menu,\n            trigger,\n            item,\n            arrow,\n            separator,\n            group,\n            groupLabel,\n        },\n        states: {\n            open: rootOpen,\n        },\n        builders: {\n            createSubmenu,\n            createCheckboxItem,\n            createMenuRadioGroup,\n        },\n        options: rootOptions,\n    };\n}\n/**\n * Check if the event is a touch or pen event\n * @param e The pointer event\n */\nfunction isTouchOrPen(e) {\n    return e.pointerType !== 'mouse';\n}\n", "import { CalendarDate, CalendarDateTime, ZonedDateTime, parseZonedDateTime, parseDateTime, parseDate, getLocalTimeZone, getDayOfWeek, } from '@internationalized/date';\nconst defaultDateDefaults = {\n    defaultValue: undefined,\n    defaultPlaceholder: undefined,\n    granularity: 'day',\n};\n/**\n * A helper function used throughout the various date builders\n * to generate a default `DateValue` using the `defaultValue`,\n * `defaultPlaceholder`, and `granularity` props.\n *\n * It's important to match the `DateValue` type being used\n * elsewhere in the builder, so they behave according to the\n * behavior the user expects based on the props they've provided.\n *\n */\nexport function getDefaultDate(props) {\n    const withDefaults = { ...defaultDateDefaults, ...props };\n    const { defaultValue, defaultPlaceholder, granularity } = withDefaults;\n    if (Array.isArray(defaultValue) && defaultValue.length) {\n        return defaultValue[defaultValue.length - 1];\n    }\n    if (defaultValue && !Array.isArray(defaultValue)) {\n        return defaultValue;\n    }\n    else if (defaultPlaceholder) {\n        return defaultPlaceholder;\n    }\n    else {\n        const date = new Date();\n        const year = date.getFullYear();\n        const month = date.getMonth() + 1;\n        const day = date.getDate();\n        const calendarDateTimeGranularities = ['hour', 'minute', 'second'];\n        if (calendarDateTimeGranularities.includes(granularity ?? 'day')) {\n            return new CalendarDateTime(year, month, day, 0, 0, 0);\n        }\n        return new CalendarDate(year, month, day);\n    }\n}\n/**\n * Given a date string and a reference `DateValue` object, parse the\n * string to the same type as the reference object.\n *\n * Useful for parsing strings from data attributes, which are always\n * strings, to the same type being used by the date component.\n */\nexport function parseStringToDateValue(dateStr, referenceVal) {\n    if (referenceVal instanceof ZonedDateTime) {\n        return parseZonedDateTime(dateStr);\n    }\n    else if (referenceVal instanceof CalendarDateTime) {\n        return parseDateTime(dateStr);\n    }\n    else {\n        return parseDate(dateStr);\n    }\n}\n/**\n * Given a `DateValue` object, convert it to a native `Date` object.\n * If a timezone is provided, the date will be converted to that timezone.\n * If no timezone is provided, the date will be converted to the local timezone.\n */\nexport function toDate(dateValue, tz = getLocalTimeZone()) {\n    if (dateValue instanceof ZonedDateTime) {\n        return dateValue.toDate();\n    }\n    else {\n        return dateValue.toDate(tz);\n    }\n}\nexport function isCalendarDateTime(dateValue) {\n    return dateValue instanceof CalendarDateTime;\n}\nexport function isZonedDateTime(dateValue) {\n    return dateValue instanceof ZonedDateTime;\n}\nexport function hasTime(dateValue) {\n    return isCalendarDateTime(dateValue) || isZonedDateTime(dateValue);\n}\n/**\n * Given a date, return the number of days in the month.\n */\nexport function getDaysInMonth(date) {\n    if (date instanceof Date) {\n        const year = date.getFullYear();\n        const month = date.getMonth() + 1;\n        /**\n         * By using zero as the day, we get the\n         * last day of the previous month, which\n         * is the month we originally passed in.\n         */\n        return new Date(year, month, 0).getDate();\n    }\n    else {\n        return date.set({ day: 100 }).day;\n    }\n}\n/**\n * Determine if a date is before the reference date.\n * @param dateToCompare - is this date before the `referenceDate`\n * @param referenceDate - is the `dateToCompare` before this date\n *\n * @see {@link isBeforeOrSame} for inclusive\n */\nexport function isBefore(dateToCompare, referenceDate) {\n    return dateToCompare.compare(referenceDate) < 0;\n}\n/**\n * Determine if a date is after the reference date.\n * @param dateToCompare - is this date after the `referenceDate`\n * @param referenceDate - is the `dateToCompare` after this date\n *\n * @see {@link isAfterOrSame} for inclusive\n */\nexport function isAfter(dateToCompare, referenceDate) {\n    return dateToCompare.compare(referenceDate) > 0;\n}\n/**\n * Determine if a date is before or the same as the reference date.\n *\n * @param dateToCompare - the date to compare\n * @param referenceDate - the reference date to make the comparison against\n *\n * @see {@link isBefore} for non-inclusive\n */\nexport function isBeforeOrSame(dateToCompare, referenceDate) {\n    return dateToCompare.compare(referenceDate) <= 0;\n}\n/**\n * Determine if a date is after or the same as the reference date.\n *\n * @param dateToCompare - is this date after or the same as the `referenceDate`\n * @param referenceDate - is the `dateToCompare` after or the same as this date\n *\n * @see {@link isAfter} for non-inclusive\n */\nexport function isAfterOrSame(dateToCompare, referenceDate) {\n    return dateToCompare.compare(referenceDate) >= 0;\n}\n/**\n * Determine if a date is inclusively between a start and end reference date.\n *\n * @param date - is this date inclusively between the `start` and `end` dates\n * @param start - the start reference date to make the comparison against\n * @param end - the end reference date to make the comparison against\n *\n * @see {@link isBetween} for non-inclusive\n */\nexport function isBetweenInclusive(date, start, end) {\n    return isAfterOrSame(date, start) && isBeforeOrSame(date, end);\n}\n/**\n * Determine if a date is between a start and end reference date.\n *\n * @param date - is this date between the `start` and `end` dates\n * @param start - the start reference date to make the comparison against\n * @param end - the end reference date to make the comparison against\n *\n * @see {@link isBetweenInclusive} for inclusive\n */\nexport function isBetween(date, start, end) {\n    return isAfter(date, start) && isBefore(date, end);\n}\nexport function getLastFirstDayOfWeek(date, firstDayOfWeek, locale) {\n    const day = getDayOfWeek(date, locale);\n    if (firstDayOfWeek > day) {\n        return date.subtract({ days: day + 7 - firstDayOfWeek });\n    }\n    if (firstDayOfWeek === day) {\n        return date;\n    }\n    return date.subtract({ days: day - firstDayOfWeek });\n}\nexport function getNextLastDayOfWeek(date, firstDayOfWeek, locale) {\n    const day = getDayOfWeek(date, locale);\n    const lastDayOfWeek = firstDayOfWeek === 0 ? 6 : firstDayOfWeek - 1;\n    if (day === lastDayOfWeek) {\n        return date;\n    }\n    if (day > lastDayOfWeek) {\n        return date.add({ days: 7 - day + lastDayOfWeek });\n    }\n    return date.add({ days: lastDayOfWeek - day });\n}\nexport function areAllDaysBetweenValid(start, end, isUnavailable, isDisabled) {\n    if (isUnavailable === undefined && isDisabled === undefined) {\n        return true;\n    }\n    let dCurrent = start.add({ days: 1 });\n    if (isDisabled?.(dCurrent) || isUnavailable?.(dCurrent)) {\n        return false;\n    }\n    const dEnd = end;\n    while (dCurrent.compare(dEnd) < 0) {\n        dCurrent = dCurrent.add({ days: 1 });\n        if (isDisabled?.(dCurrent) || isUnavailable?.(dCurrent)) {\n            return false;\n        }\n    }\n    return true;\n}\n", "import { DateFormatter } from '@internationalized/date';\nimport { hasTime, isZonedDateTime, toDate } from '.';\n/**\n * Creates a wrapper around the `DateFormatter`, which is\n * an improved version of the {@link Intl.DateTimeFormat} API,\n * that is used internally by the various date builders to\n * easily format dates in a consistent way.\n *\n * @see [DateFormatter](https://react-spectrum.adobe.com/internationalized/date/DateFormatter.html)\n */\nexport function createFormatter(initialLocale) {\n    let locale = initialLocale;\n    function setLocale(newLocale) {\n        locale = newLocale;\n    }\n    function getLocale() {\n        return locale;\n    }\n    function custom(date, options) {\n        return new DateFormatter(locale, options).format(date);\n    }\n    function selectedDate(date, includeTime = true) {\n        if (hasTime(date) && includeTime) {\n            return custom(toDate(date), {\n                dateStyle: 'long',\n                timeStyle: 'long',\n            });\n        }\n        else {\n            return custom(toDate(date), {\n                dateStyle: 'long',\n            });\n        }\n    }\n    function fullMonthAndYear(date) {\n        return new DateFormatter(locale, { month: 'long', year: 'numeric' }).format(date);\n    }\n    function fullMonth(date) {\n        return new DateFormatter(locale, { month: 'long' }).format(date);\n    }\n    function fullYear(date) {\n        return new DateFormatter(locale, { year: 'numeric' }).format(date);\n    }\n    function toParts(date, options) {\n        if (isZonedDateTime(date)) {\n            return new DateFormatter(locale, {\n                ...options,\n                timeZone: date.timeZone,\n            }).formatToParts(toDate(date));\n        }\n        else {\n            return new DateFormatter(locale, options).formatToParts(toDate(date));\n        }\n    }\n    function dayOfWeek(date, length = 'narrow') {\n        return new DateFormatter(locale, { weekday: length }).format(date);\n    }\n    function dayPeriod(date) {\n        const parts = new DateFormatter(locale, {\n            hour: 'numeric',\n            minute: 'numeric',\n        }).formatToParts(date);\n        const value = parts.find((p) => p.type === 'dayPeriod')?.value;\n        if (value === 'PM') {\n            return 'PM';\n        }\n        return 'AM';\n    }\n    const defaultPartOptions = {\n        year: 'numeric',\n        month: 'numeric',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n    };\n    function part(dateObj, type, options = {}) {\n        const opts = { ...defaultPartOptions, ...options };\n        const parts = toParts(dateObj, opts);\n        const part = parts.find((p) => p.type === type);\n        return part ? part.value : '';\n    }\n    return {\n        setLocale,\n        getLocale,\n        fullMonth,\n        fullYear,\n        fullMonthAndYear,\n        toParts,\n        custom,\n        part,\n        dayPeriod,\n        selectedDate,\n        dayOfWeek,\n    };\n}\n", "/**\n * A higher order store that encapsulates a writable store holding a `DateValue` from the\n * '@internationalized/date' library. It provides some convenience methods for common\n * date manipulations.\n *\n * @see [@internationalized/date](https://react-spectrum.adobe.com/internationalized/date/index.html)\n */\nexport function dateStore(store, defaultValue) {\n    const { set, update, subscribe } = store;\n    function add(duration) {\n        update((d) => {\n            return d.add(duration);\n        });\n    }\n    function nextPage(amount) {\n        update((d) => {\n            return d.set({ day: 1 }).add({ months: amount });\n        });\n    }\n    function prevPage(amount) {\n        update((d) => {\n            return d.set({ day: 1 }).subtract({ months: amount });\n        });\n    }\n    function subtract(duration) {\n        update((d) => {\n            return d.subtract(duration);\n        });\n    }\n    function setDate(fields, disambiguation) {\n        if (disambiguation) {\n            update((d) => {\n                return d.set(fields, disambiguation);\n            });\n            return;\n        }\n        update((d) => {\n            return d.set(fields);\n        });\n    }\n    function reset() {\n        update(() => {\n            return defaultValue;\n        });\n    }\n    function toWritable() {\n        return {\n            set,\n            subscribe,\n            update,\n        };\n    }\n    return {\n        set,\n        update,\n        subscribe,\n        add,\n        subtract,\n        setDate,\n        reset,\n        toWritable,\n        nextPage,\n        prevPage,\n    };\n}\n", "// prettier-ignore\nconst supportedLocales = [\n    'ach', 'af', 'am', 'an', 'ar', 'ast', 'az', 'be', 'bg', 'bn', 'br', 'bs',\n    'ca', 'cak', 'ckb', 'cs', 'cy', 'da', 'de', 'dsb', 'el', 'en', 'eo', 'es',\n    'et', 'eu', 'fa', 'ff', 'fi', 'fr', 'fy', 'ga', 'gd', 'gl', 'he', 'hr',\n    'hsb', 'hu', 'ia', 'id', 'it', 'ja', 'ka', 'kk', 'kn', 'ko', 'lb', 'lo',\n    'lt', 'lv', 'meh', 'ml', 'ms', 'nl', 'nn', 'no', 'oc', 'pl', 'pt', 'rm',\n    'ro', 'ru', 'sc', 'scn', 'sk', 'sl', 'sr', 'sv', 'szl', 'tg', 'th', 'tr',\n    'uk', 'zh-CN', 'zh-TW',\n];\nconst placeholderFields = ['year', 'month', 'day'];\nconst placeholders = {\n    ach: { year: 'mwaka', month: 'dwe', day: 'nino' },\n    af: { year: 'jjjj', month: 'mm', day: 'dd' },\n    am: { year: '', month: '', day: '' },\n    an: { year: 'aaaa', month: 'mm', day: 'dd' },\n    ar: { year: '', month: '', day: '' },\n    ast: { year: 'aaaa', month: 'mm', day: 'dd' },\n    az: { year: 'iiii', month: 'aa', day: 'gg' },\n    be: { year: '', month: '', day: '' },\n    bg: { year: '', month: '', day: '' },\n    bn: { year: 'yyyy', month: '', day: 'dd' },\n    br: { year: 'bbbb', month: 'mm', day: 'dd' },\n    bs: { year: 'gggg', month: 'mm', day: 'dd' },\n    ca: { year: 'aaaa', month: 'mm', day: 'dd' },\n    cak: { year: 'jjjj', month: 'ii', day: \"q'q'\" },\n    ckb: { year: '', month: '', day: '' },\n    cs: { year: 'rrrr', month: 'mm', day: 'dd' },\n    cy: { year: 'bbbb', month: 'mm', day: 'dd' },\n    da: { year: '', month: 'mm', day: 'dd' },\n    de: { year: 'jjjj', month: 'mm', day: 'tt' },\n    dsb: { year: 'llll', month: 'mm', day: '' },\n    el: { year: '', month: '', day: '' },\n    en: { year: 'yyyy', month: 'mm', day: 'dd' },\n    eo: { year: 'jjjj', month: 'mm', day: 'tt' },\n    es: { year: 'aaaa', month: 'mm', day: 'dd' },\n    et: { year: 'aaaa', month: 'kk', day: 'pp' },\n    eu: { year: 'uuuu', month: 'hh', day: 'ee' },\n    fa: { year: '', month: '', day: '' },\n    ff: { year: 'hhhh', month: 'll', day: '' },\n    fi: { year: 'vvvv', month: 'kk', day: 'pp' },\n    fr: { year: 'aaaa', month: 'mm', day: 'jj' },\n    fy: { year: 'jjjj', month: 'mm', day: 'dd' },\n    ga: { year: 'bbbb', month: 'mm', day: 'll' },\n    gd: { year: 'bbbb', month: 'mm', day: 'll' },\n    gl: { year: 'aaaa', month: 'mm', day: 'dd' },\n    he: { year: '', month: '', day: '' },\n    hr: { year: 'gggg', month: 'mm', day: 'dd' },\n    hsb: { year: 'llll', month: 'mm', day: 'dd' },\n    hu: { year: '', month: 'hh', day: 'nn' },\n    ia: { year: 'aaaa', month: 'mm', day: 'dd' },\n    id: { year: 'tttt', month: 'bb', day: 'hh' },\n    it: { year: 'aaaa', month: 'mm', day: 'gg' },\n    ja: { year: '  ', month: '', day: '' },\n    ka: { year: '', month: '', day: '' },\n    kk: { year: '', month: '', day: '' },\n    kn: { year: '', month: '', day: '' },\n    ko: { year: '', month: '', day: '' },\n    lb: { year: 'jjjj', month: 'mm', day: 'dd' },\n    lo: { year: '', month: '', day: '' },\n    lt: { year: 'mmmm', month: 'mm', day: 'dd' },\n    lv: { year: 'gggg', month: 'mm', day: 'dd' },\n    meh: { year: 'aaaa', month: 'mm', day: 'dd' },\n    ml: { year: '', month: '', day: '' },\n    ms: { year: 'tttt', month: 'mm', day: 'hh' },\n    nl: { year: 'jjjj', month: 'mm', day: 'dd' },\n    nn: { year: '', month: 'mm', day: 'dd' },\n    no: { year: '', month: 'mm', day: 'dd' },\n    oc: { year: 'aaaa', month: 'mm', day: 'jj' },\n    pl: { year: 'rrrr', month: 'mm', day: 'dd' },\n    pt: { year: 'aaaa', month: 'mm', day: 'dd' },\n    rm: { year: 'oooo', month: 'mm', day: 'dd' },\n    ro: { year: 'aaaa', month: 'll', day: 'zz' },\n    ru: { year: '', month: '', day: '' },\n    sc: { year: 'aaaa', month: 'mm', day: 'dd' },\n    scn: { year: 'aaaa', month: 'mm', day: 'jj' },\n    sk: { year: 'rrrr', month: 'mm', day: 'dd' },\n    sl: { year: 'llll', month: 'mm', day: 'dd' },\n    sr: { year: '', month: '', day: '' },\n    sv: { year: '', month: 'mm', day: 'dd' },\n    szl: { year: 'rrrr', month: 'mm', day: 'dd' },\n    tg: { year: '', month: '', day: '' },\n    th: { year: '', month: '', day: '' },\n    tr: { year: 'yyyy', month: 'aa', day: 'gg' },\n    uk: { year: '', month: '', day: '' },\n    'zh-CN': { year: '', month: '', day: '' },\n    'zh-TW': { year: '', month: '', day: '' },\n};\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction getPlaceholderObj(locale) {\n    if (!isSupportedLocale(locale)) {\n        const localeLanguage = getLocaleLanguage(locale);\n        if (!isSupportedLocale(localeLanguage)) {\n            return placeholders.en;\n        }\n        else {\n            return placeholders[localeLanguage];\n        }\n    }\n    else {\n        return placeholders[locale];\n    }\n}\nexport function getPlaceholder(field, value, \n// eslint-disable-next-line @typescript-eslint/ban-types\nlocale) {\n    if (isPlaceholderField(field)) {\n        return getPlaceholderObj(locale)[field];\n    }\n    if (isDefaultField(field)) {\n        return value;\n    }\n    if (isTimeField(field)) {\n        return '';\n    }\n    return '';\n}\nfunction isSupportedLocale(locale) {\n    return supportedLocales.includes(locale);\n}\nfunction isPlaceholderField(field) {\n    return placeholderFields.includes(field);\n}\nfunction isTimeField(field) {\n    return field === 'hour' || field === 'minute' || field === 'second';\n}\nfunction isDefaultField(field) {\n    return field === 'era' || field === 'dayPeriod';\n}\nfunction getLocaleLanguage(locale) {\n    if (Intl.Locale) {\n        return new Intl.Locale(locale).language;\n    }\n    return locale.split('-')[0];\n}\n", "import { isBrowser, isHTMLElement, styleToString } from '..';\n/**\n * Creates or gets an announcer element which is used to announce messages to screen readers.\n * Within the date components, we use this to announce when the values of the individual segments\n * change, as without it we get inconsistent behavior across screen readers.\n */\nfunction initAnnouncer() {\n    if (!isBrowser)\n        return null;\n    let el = document.querySelector('[data-melt-announcer]');\n    if (!isHTMLElement(el)) {\n        const div = document.createElement('div');\n        div.style.cssText = styleToString({\n            border: '0px',\n            clip: 'rect(0px, 0px, 0px, 0px)',\n            'clip-path': 'inset(50%)',\n            height: '1px',\n            margin: '-1px',\n            overflow: 'hidden',\n            padding: '0px',\n            position: 'absolute',\n            'white-space': 'nowrap',\n            width: '1px',\n        });\n        div.setAttribute('data-melt-announcer', '');\n        div.appendChild(createLog('assertive'));\n        div.appendChild(createLog('polite'));\n        el = div;\n        document.body.insertBefore(el, document.body.firstChild);\n    }\n    /**\n     * Creates a log element for assertive or polite announcements.\n     */\n    function createLog(kind) {\n        const log = document.createElement('div');\n        log.role = 'log';\n        log.ariaLive = kind;\n        log.setAttribute('aria-relevant', 'additions');\n        return log;\n    }\n    /**\n     * Retrieves the log element for assertive or polite announcements.\n     */\n    function getLog(kind) {\n        if (!isHTMLElement(el))\n            return null;\n        const log = el.querySelector(`[aria-live=\"${kind}\"]`);\n        if (!isHTMLElement(log))\n            return null;\n        return log;\n    }\n    return {\n        getLog,\n    };\n}\n/**\n * Creates an announcer object that can be used to make `aria-live` announcements to screen readers.\n */\nexport function getAnnouncer() {\n    const announcer = initAnnouncer();\n    /**\n     * Announces a message to screen readers using the specified kind of announcement.\n     */\n    function announce(value, kind = 'assertive', timeout = 7500) {\n        if (!announcer || !isBrowser)\n            return;\n        const log = announcer.getLog(kind);\n        const content = document.createElement('div');\n        if (typeof value === 'number') {\n            value = value.toString();\n        }\n        else if (value === null) {\n            value = 'Empty';\n        }\n        else {\n            value = value.trim();\n        }\n        content.innerText = value;\n        if (kind === 'assertive') {\n            log?.replaceChildren(content);\n        }\n        else {\n            log?.appendChild(content);\n        }\n        return setTimeout(() => {\n            content.remove();\n        }, timeout);\n    }\n    return {\n        announce,\n    };\n}\n", "export const DATE_SEGMENT_PARTS = ['day', 'month', 'year'];\nexport const TIME_SEGMENT_PARTS = ['hour', 'minute', 'second', 'dayPeriod'];\nexport const NON_EDITABLE_SEGMENT_PARTS = ['literal', 'timeZoneName'];\nexport const EDITABLE_SEGMENT_PARTS = [...DATE_SEGMENT_PARTS, ...TIME_SEGMENT_PARTS];\nexport const ALL_SEGMENT_PARTS = [\n    ...EDITABLE_SEGMENT_PARTS,\n    ...NON_EDITABLE_SEGMENT_PARTS,\n];\nexport const ALL_EXCEPT_LITERAL_PARTS = ALL_SEGMENT_PARTS.filter((part) => part !== 'literal');\n", "import { getPlaceholder, toDate, isZonedDateTime, hasTime, getSegments, } from '../../../internal/helpers/date/index.js';\nimport { ALL_SEGMENT_PARTS, DATE_SEGMENT_PARTS, EDITABLE_SEGMENT_PARTS, TIME_SEGMENT_PARTS, } from './parts.js';\nimport { isBrowser, isNull, generateId, kbd, isNumberString, styleToString, } from '../../../internal/helpers/index.js';\nimport { get } from 'svelte/store';\nexport function initializeSegmentValues(granularity) {\n    const calendarDateTimeGranularities = ['hour', 'minute', 'second'];\n    const initialParts = EDITABLE_SEGMENT_PARTS.map((part) => {\n        if (part === 'dayPeriod') {\n            return [part, 'AM'];\n        }\n        return [part, null];\n    }).filter(([key]) => {\n        if (key === 'literal' || key === null)\n            return false;\n        if (granularity === 'day') {\n            return !calendarDateTimeGranularities.includes(key);\n        }\n        else {\n            return true;\n        }\n    });\n    return Object.fromEntries(initialParts);\n}\nfunction createContentObj(props) {\n    const { segmentValues, formatter, locale, dateRef } = props;\n    const content = Object.keys(segmentValues).reduce((obj, part) => {\n        if (!isSegmentPart(part))\n            return obj;\n        if ('hour' in segmentValues && part === 'dayPeriod') {\n            const value = segmentValues[part];\n            if (!isNull(value)) {\n                obj[part] = value;\n            }\n            else {\n                obj[part] = getPlaceholder(part, 'AM', locale);\n            }\n        }\n        else {\n            obj[part] = getPartContent(part);\n        }\n        return obj;\n    }, {});\n    function getPartContent(part) {\n        if ('hour' in segmentValues) {\n            const value = segmentValues[part];\n            if (!isNull(value)) {\n                return formatter.part(dateRef.set({ [part]: value }), part, {\n                    hourCycle: props.hourCycle === 24 ? 'h24' : undefined,\n                });\n            }\n            else {\n                return getPlaceholder(part, '', locale);\n            }\n        }\n        else {\n            if (isDateSegmentPart(part)) {\n                const value = segmentValues[part];\n                if (!isNull(value)) {\n                    return formatter.part(dateRef.set({ [part]: value }), part);\n                }\n                else {\n                    return getPlaceholder(part, '', locale);\n                }\n            }\n            return '';\n        }\n    }\n    return content;\n}\nfunction createContentArr(props) {\n    const { granularity, dateRef, formatter, contentObj, hideTimeZone, hourCycle } = props;\n    const parts = formatter.toParts(dateRef, getOptsByGranularity(granularity, hourCycle));\n    const segmentContentArr = parts\n        .map((part) => {\n        const defaultParts = ['literal', 'dayPeriod', 'timeZoneName', null];\n        if (defaultParts.includes(part.type) || !isSegmentPart(part.type)) {\n            return {\n                part: part.type,\n                value: part.value,\n            };\n        }\n        return {\n            part: part.type,\n            value: contentObj[part.type],\n        };\n    })\n        .filter((segment) => {\n        if (isNull(segment.part) || isNull(segment.value))\n            return false;\n        if (segment.part === 'timeZoneName' && (!isZonedDateTime(dateRef) || hideTimeZone)) {\n            return false;\n        }\n        return true;\n    });\n    return segmentContentArr;\n}\nexport function createContent(props) {\n    const contentObj = createContentObj(props);\n    const contentArr = createContentArr({\n        contentObj,\n        ...props,\n    });\n    return {\n        obj: contentObj,\n        arr: contentArr,\n    };\n}\nfunction getOptsByGranularity(granularity, hourCycle) {\n    const opts = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        timeZoneName: 'short',\n        hourCycle: hourCycle === 24 ? 'h24' : undefined,\n        hour12: hourCycle === 24 ? false : undefined,\n    };\n    if (granularity === 'day') {\n        delete opts.second;\n        delete opts.hour;\n        delete opts.minute;\n        delete opts.timeZoneName;\n    }\n    if (granularity === 'hour') {\n        delete opts.minute;\n    }\n    if (granularity === 'minute') {\n        delete opts.second;\n    }\n    return opts;\n}\nexport function initSegmentStates() {\n    return EDITABLE_SEGMENT_PARTS.reduce((acc, key) => {\n        acc[key] = {\n            lastKeyZero: false,\n            hasLeftFocus: true,\n            hasTouched: false,\n        };\n        return acc;\n    }, {});\n}\nexport function initSegmentIds() {\n    return Object.fromEntries(ALL_SEGMENT_PARTS.map((part) => {\n        return [part, generateId()];\n    }).filter(([key]) => key !== 'literal'));\n}\nexport function isDateSegmentPart(part) {\n    return DATE_SEGMENT_PARTS.includes(part);\n}\nexport function isSegmentPart(part) {\n    return EDITABLE_SEGMENT_PARTS.includes(part);\n}\nexport function isAnySegmentPart(part) {\n    return ALL_SEGMENT_PARTS.includes(part);\n}\n/**\n * Get the segments being used/ are rendered in the DOM.\n * We're using this to determine when to set the value of\n * the date picker, which is when all the segments have\n * been filled.\n */\nfunction getUsedSegments(id) {\n    if (!isBrowser)\n        return [];\n    const usedSegments = getSegments(id)\n        .map((el) => el.dataset.segment)\n        .filter((part) => {\n        return EDITABLE_SEGMENT_PARTS.includes(part);\n    });\n    return usedSegments;\n}\nexport function getValueFromSegments(props) {\n    const { segmentObj, id, dateRef } = props;\n    const usedSegments = getUsedSegments(id);\n    let date = dateRef;\n    usedSegments.forEach((part) => {\n        if ('hour' in segmentObj) {\n            const value = segmentObj[part];\n            if (isNull(value))\n                return;\n            date = date.set({ [part]: segmentObj[part] });\n            return;\n        }\n        else if (isDateSegmentPart(part)) {\n            const value = segmentObj[part];\n            if (isNull(value))\n                return;\n            date = date.set({ [part]: segmentObj[part] });\n            return;\n        }\n    });\n    return date;\n}\n/**\n * Check if all the segments being used have been filled.\n * We use this to determine when we should set the value\n * store of the date field(s).\n *\n * @param segmentValues - The current `SegmentValueObj`\n * @param id  - The id of the date field\n */\nexport function areAllSegmentsFilled(segmentValues, id) {\n    const usedSegments = getUsedSegments(id);\n    return usedSegments.every((part) => {\n        if ('hour' in segmentValues) {\n            return segmentValues[part] !== null;\n        }\n        else if (isDateSegmentPart(part)) {\n            return segmentValues[part] !== null;\n        }\n    });\n}\n/**\n * Extracts the segment part from the provided node,\n * if it exists, otherwise returns null.\n */\nexport function getPartFromNode(node) {\n    const part = node.dataset.segment;\n    if (!isAnySegmentPart(part))\n        return null;\n    return part;\n}\n/**\n * Determines if the provided object is a valid `DateAndTimeSegmentObj`\n * by checking if it has the correct keys and values for each key.\n */\nexport function isDateAndTimeSegmentObj(obj) {\n    if (typeof obj !== 'object' || obj === null) {\n        return false;\n    }\n    return Object.entries(obj).every(([key, value]) => {\n        const validKey = TIME_SEGMENT_PARTS.includes(key) ||\n            DATE_SEGMENT_PARTS.includes(key);\n        const validValue = key === 'dayPeriod'\n            ? value === 'AM' || value === 'PM' || value === null\n            : typeof value === 'number' || value === null;\n        return validKey && validValue;\n    });\n}\n/**\n * Infer the granularity to use based on the\n * value and granularity props.\n */\nexport function inferGranularity(value, granularity) {\n    if (granularity) {\n        return granularity;\n    }\n    if (hasTime(value)) {\n        return 'minute';\n    }\n    return 'day';\n}\nexport function isAcceptableSegmentKey(key) {\n    const acceptableSegmentKeys = [\n        kbd.ENTER,\n        kbd.ARROW_UP,\n        kbd.ARROW_DOWN,\n        kbd.ARROW_LEFT,\n        kbd.ARROW_RIGHT,\n        kbd.BACKSPACE,\n        kbd.SPACE,\n    ];\n    if (acceptableSegmentKeys.includes(key))\n        return true;\n    if (isNumberString(key))\n        return true;\n    return false;\n}\n/**\n * Sets the individual segment values based on the current\n * value of the date picker. This is used to initialize the\n * segment values if a default value is provided, and to\n * keep it in sync as the value changes outside the builder.\n */\nexport function syncSegmentValues(props) {\n    const { value, updatingDayPeriod, segmentValues, formatter } = props;\n    const dateValues = DATE_SEGMENT_PARTS.map((part) => {\n        return [part, value[part]];\n    });\n    if ('hour' in value) {\n        const timeValues = TIME_SEGMENT_PARTS.map((part) => {\n            if (part === 'dayPeriod') {\n                const $updatingDayPeriod = get(updatingDayPeriod);\n                if ($updatingDayPeriod) {\n                    return [part, $updatingDayPeriod];\n                }\n                else {\n                    return [part, formatter.dayPeriod(toDate(value))];\n                }\n            }\n            return [part, value[part]];\n        });\n        const mergedSegmentValues = [...dateValues, ...timeValues];\n        segmentValues.set(Object.fromEntries(mergedSegmentValues));\n        updatingDayPeriod.set(null);\n        return;\n    }\n    segmentValues.set(Object.fromEntries(dateValues));\n}\n/**\n * Determines if the element with the provided id is the first focusable\n * segment in the date field with the provided fieldId.\n *\n * @param id - The id of the element to check if it's the first segment\n * @param fieldId - The id of the date field associated with the segment\n */\nexport function isFirstSegment(id, fieldId) {\n    if (!isBrowser)\n        return false;\n    const segments = getSegments(fieldId);\n    return segments.length ? segments[0].id === id : false;\n}\n/**\n * Creates or updates a description element for a date field\n * which enables screen readers to read the date field's value.\n *\n * This element is hidden from view, and is portalled to the body\n * so it can be associated via `aria-describedby` and read by\n * screen readers as the user interacts with the date field.\n */\nexport function setDescription(id, formatter, value) {\n    if (!isBrowser)\n        return;\n    const valueString = formatter.selectedDate(value);\n    const el = document.getElementById(id);\n    if (!el) {\n        const div = document.createElement('div');\n        div.style.cssText = styleToString({\n            display: 'none',\n        });\n        div.id = id;\n        div.innerText = `Selected Date: ${valueString}`;\n        document.body.appendChild(div);\n    }\n    else {\n        el.innerText = `Selected Date: ${valueString}`;\n    }\n}\n/**\n * Removes the description element for the date field with\n * the provided ID. This function should be called when the\n * date field is unmounted.\n */\nexport function removeDescriptionElement(id) {\n    if (!isBrowser)\n        return;\n    const el = document.getElementById(id);\n    if (!el)\n        return;\n    document.body.removeChild(el);\n}\n", "import { isAnySegmentPart } from '../../../builders/date-field/_internal/helpers';\nimport { isHTMLElement, kbd } from '../index.js';\n/**\n * Handles segment navigation based on the provided keyboard event and field ID.\n *\n * @param e - The keyboard event\n * @param fieldId - The ID of the field we're navigating within\n */\nexport function handleSegmentNavigation(e, fieldId) {\n    const currentTarget = e.currentTarget;\n    if (!isHTMLElement(currentTarget))\n        return;\n    const { prev, next } = getPrevNextSegments(currentTarget, fieldId);\n    if (e.key === kbd.ARROW_LEFT) {\n        if (!prev)\n            return;\n        prev.focus();\n    }\n    else if (e.key === kbd.ARROW_RIGHT) {\n        if (!next)\n            return;\n        next.focus();\n    }\n}\n/**\n * Retrieves the next segment in the list of segments relative to the provided node.\n *\n * @param node - The node we're starting from\n * @param segments - The list of candidate segments to navigate through\n */\nexport function getNextSegment(node, segments) {\n    const index = segments.indexOf(node);\n    if (index === segments.length - 1 || index === -1)\n        return null;\n    const nextIndex = index + 1;\n    const nextSegment = segments[nextIndex];\n    return nextSegment;\n}\n/**\n * Retrieves the previous segment in the list of segments relative to the provided node.\n *\n * @param node - The node we're starting from\n * @param segments - The list of candidate segments to navigate through\n */\nexport function getPrevSegment(node, segments) {\n    const index = segments.indexOf(node);\n    if (index === 0 || index === -1)\n        return null;\n    const prevIndex = index - 1;\n    const prevSegment = segments[prevIndex];\n    return prevSegment;\n}\n/**\n * Retrieves an object containing the next and previous segments relative to the current node.\n *\n * @param node - The node we're starting from\n * @param fieldId - The ID of the field we're navigating within\n */\nexport function getPrevNextSegments(node, fieldId) {\n    const segments = getSegments(fieldId);\n    if (!segments.length) {\n        return {\n            next: null,\n            prev: null,\n        };\n    }\n    return {\n        next: getNextSegment(node, segments),\n        prev: getPrevSegment(node, segments),\n    };\n}\n/**\n * Shifts the focus to the next segment in the list of segments\n * within the field identified by the provided ID.\n */\nexport function moveToNextSegment(e, fieldId) {\n    const node = e.currentTarget;\n    if (!isHTMLElement(node))\n        return;\n    const { next } = getPrevNextSegments(node, fieldId);\n    if (!next)\n        return;\n    next.focus();\n}\nexport function isSegmentNavigationKey(key) {\n    if (key === kbd.ARROW_RIGHT || key === kbd.ARROW_LEFT)\n        return true;\n    return false;\n}\n/**\n * Retrieves all the interactive segments within the field identified by the provided ID.\n */\nexport function getSegments(id) {\n    const inputContainer = document.getElementById(id);\n    if (!isHTMLElement(inputContainer))\n        return [];\n    const segments = Array.from(inputContainer.querySelectorAll('[data-segment]')).filter((el) => {\n        if (!isHTMLElement(el))\n            return false;\n        const segment = el.dataset.segment;\n        if (segment === 'trigger')\n            return true;\n        if (!isAnySegmentPart(segment) || segment === 'literal')\n            return false;\n        return true;\n    });\n    return segments;\n}\n/**\n * Get the first interactive segment within the field identified by the provided ID.\n */\nexport function getFirstSegment(id) {\n    const segments = getSegments(id);\n    return segments[0];\n}\n", "import { chunk, isHTMLElement } from '../index.js';\nimport { startOfMonth, endOfMonth } from '@internationalized/date';\nimport { getDaysInMonth, getLastFirstDayOfWeek, getNextLastDayOfWeek, parseStringToDateValue, } from './index.js';\nimport { get } from 'svelte/store';\n/**\n * Checks if a given node is a calendar cell element.\n *\n * @param node - The node to check.\n */\nexport function isCalendarCell(node) {\n    if (!isHTMLElement(node))\n        return false;\n    if (!node.hasAttribute('data-melt-calendar-cell'))\n        return false;\n    return true;\n}\n/**\n * Retrieves an array of date values representing the days between\n * the provided start and end dates.\n */\nexport function getDaysBetween(start, end) {\n    const days = [];\n    let dCurrent = start.add({ days: 1 });\n    const dEnd = end;\n    while (dCurrent.compare(dEnd) < 0) {\n        days.push(dCurrent);\n        dCurrent = dCurrent.add({ days: 1 });\n    }\n    return days;\n}\n/**\n * Creates a calendar month object.\n *\n * @remarks\n * Given a date, this function returns an object containing\n * the necessary values to render a calendar month, including\n * the month's date (the first day of that month), which can be\n * used to render the name of the month, an array of all dates\n * in that month, and an array of weeks. Each week is an array\n * of dates, useful for rendering an accessible calendar grid\n * using a loop and table elements.\n *\n */\nfunction createMonth(props) {\n    const { dateObj, weekStartsOn, fixedWeeks, locale } = props;\n    const daysInMonth = getDaysInMonth(dateObj);\n    const datesArray = Array.from({ length: daysInMonth }, (_, i) => dateObj.set({ day: i + 1 }));\n    const firstDayOfMonth = startOfMonth(dateObj);\n    const lastDayOfMonth = endOfMonth(dateObj);\n    const lastSunday = getLastFirstDayOfWeek(firstDayOfMonth, weekStartsOn, locale);\n    const nextSaturday = getNextLastDayOfWeek(lastDayOfMonth, weekStartsOn, locale);\n    const lastMonthDays = getDaysBetween(lastSunday.subtract({ days: 1 }), firstDayOfMonth);\n    const nextMonthDays = getDaysBetween(lastDayOfMonth, nextSaturday.add({ days: 1 }));\n    const totalDays = lastMonthDays.length + datesArray.length + nextMonthDays.length;\n    if (fixedWeeks && totalDays < 42) {\n        const extraDays = 42 - totalDays;\n        let startFrom = nextMonthDays[nextMonthDays.length - 1];\n        if (!startFrom) {\n            startFrom = dateObj.add({ months: 1 }).set({ day: 1 });\n        }\n        const extraDaysArray = Array.from({ length: extraDays }, (_, i) => {\n            const incr = i;\n            return startFrom.add({ days: incr });\n        });\n        nextMonthDays.push(...extraDaysArray);\n    }\n    const allDays = lastMonthDays.concat(datesArray, nextMonthDays);\n    const weeks = chunk(allDays, 7);\n    return {\n        value: dateObj,\n        dates: allDays,\n        weeks,\n    };\n}\nexport function createMonths(props) {\n    const { numberOfMonths, dateObj, ...monthProps } = props;\n    const months = [];\n    if (!numberOfMonths || numberOfMonths === 1) {\n        months.push(createMonth({\n            ...monthProps,\n            dateObj,\n        }));\n        return months;\n    }\n    months.push(createMonth({\n        ...monthProps,\n        dateObj,\n    }));\n    // Create all the months, starting with the current month\n    for (let i = 1; i < numberOfMonths; i++) {\n        const nextMonth = dateObj.add({ months: i });\n        months.push(createMonth({\n            ...monthProps,\n            dateObj: nextMonth,\n        }));\n    }\n    return months;\n}\nexport function getSelectableCells(calendarId) {\n    const node = document.getElementById(calendarId);\n    if (!node)\n        return [];\n    const selectableSelector = `[data-melt-calendar-cell]:not([data-disabled]):not([data-outside-visible-months])`;\n    return Array.from(node.querySelectorAll(selectableSelector)).filter((el) => isHTMLElement(el));\n}\n/**\n * A helper function to extract the date from the `data-value`\n * attribute of a date cell and set it as the placeholder value.\n *\n * Shared between the calendar and range calendar builders.\n *\n * @param node - The node to extract the date from.\n * @param placeholder - The placeholder value store which will be set to the extracted date.\n */\nexport function setPlaceholderToNodeValue(node, placeholder) {\n    const cellValue = node.getAttribute('data-value');\n    if (!cellValue)\n        return;\n    placeholder.set(parseStringToDateValue(cellValue, get(placeholder)));\n}\n", "import { addMeltEventListener, builder, createElHelpers, effect, generateIds, isBrowser, isHTMLElement, kbd, toWritableStores, omit, executeCallbacks, styleToString, overridable, isValidIndex, } from '../../internal/helpers/index.js';\nimport { derived, get, writable } from 'svelte/store';\nimport { tick } from 'svelte';\nimport { createMonths, getAnnouncer, isCalendarCell, parseStringToDateValue, toDate, isBefore, isAfter, getSelectableCells, setPlaceholderToNodeValue, } from '../../internal/helpers/date/index.js';\nimport { getLocalTimeZone, isToday, isSameMonth, isSameDay, } from '@internationalized/date';\nimport { dateStore, createFormatter, getDefaultDate } from '../../internal/helpers/date/index.js';\nconst defaults = {\n    isDateDisabled: undefined,\n    isDateUnavailable: undefined,\n    value: undefined,\n    preventDeselect: false,\n    numberOfMonths: 1,\n    pagedNavigation: false,\n    weekStartsOn: 0,\n    fixedWeeks: false,\n    calendarLabel: 'Event Date',\n    locale: 'en',\n    minValue: undefined,\n    maxValue: undefined,\n    disabled: false,\n    readonly: false,\n    weekdayFormat: 'narrow',\n};\nconst { name } = createElHelpers('calendar');\nexport const calendarIdParts = ['calendar', 'accessibleHeading'];\nexport function createCalendar(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores({\n        ...omit(withDefaults, 'value', 'placeholder', 'multiple', 'ids'),\n        multiple: withDefaults.multiple ?? false,\n    });\n    const { preventDeselect, numberOfMonths, pagedNavigation, weekStartsOn, fixedWeeks, calendarLabel, locale, minValue, maxValue, multiple, isDateUnavailable, disabled, readonly, weekdayFormat, } = options;\n    const ids = toWritableStores({ ...generateIds(calendarIdParts), ...withDefaults.ids });\n    const defaultDate = getDefaultDate({\n        defaultPlaceholder: withDefaults.defaultPlaceholder,\n        defaultValue: withDefaults.defaultValue,\n    });\n    const formatter = createFormatter(withDefaults.locale);\n    const valueWritable = withDefaults.value ?? writable(withDefaults.defaultValue);\n    const value = overridable(valueWritable, withDefaults.onValueChange);\n    const placeholderWritable = withDefaults.placeholder ?? writable(withDefaults.defaultPlaceholder ?? defaultDate);\n    const placeholder = dateStore(overridable(placeholderWritable, withDefaults.onPlaceholderChange), withDefaults.defaultPlaceholder ?? defaultDate);\n    /**\n     * A store containing the months to display in the calendar.\n     */\n    const months = writable(createMonths({\n        dateObj: get(placeholder),\n        weekStartsOn: withDefaults.weekStartsOn,\n        locale: withDefaults.locale,\n        fixedWeeks: withDefaults.fixedWeeks,\n        numberOfMonths: withDefaults.numberOfMonths,\n    }));\n    /**\n     * A derived store that maintains the currently visible months in the calendar,\n     * which we use to determine how keyboard navigation and if we should apply\n     * `data-outside-month` to cells.\n     */\n    const visibleMonths = derived([months], ([$months]) => {\n        return $months.map((month) => {\n            return month.value;\n        });\n    });\n    const isOutsideVisibleMonths = derived([visibleMonths], ([$visibleMonths]) => {\n        return (date) => {\n            return !$visibleMonths.some((month) => isSameMonth(date, month));\n        };\n    });\n    const isNextButtonDisabled = derived([months, maxValue, disabled], ([$months, $maxValue, $disabled]) => {\n        if (!$maxValue || !$months.length)\n            return false;\n        if ($disabled)\n            return true;\n        const lastMonthInView = $months[$months.length - 1].value;\n        const firstMonthOfNextPage = lastMonthInView.add({ months: 1 }).set({ day: 1 });\n        return isAfter(firstMonthOfNextPage, $maxValue);\n    });\n    const isPrevButtonDisabled = derived([months, minValue, disabled], ([$months, $minValue, $disabled]) => {\n        if (!$minValue || !$months.length)\n            return false;\n        if ($disabled)\n            return true;\n        const firstMonthInView = $months[0].value;\n        const lastMonthOfPrevPage = firstMonthInView.subtract({ months: 1 }).set({ day: 35 });\n        return isBefore(lastMonthOfPrevPage, $minValue);\n    });\n    /**\n     * A derived store function that determines if a date is disabled based\n     * on the `isDateDisabled` prop, `minValue`, and `maxValue` props.\n     */\n    const isDateDisabled = derived([options.isDateDisabled, minValue, maxValue, disabled], ([$isDateDisabled, $minValue, $maxValue, $disabled]) => {\n        return (date) => {\n            if ($isDateDisabled?.(date) || $disabled)\n                return true;\n            if ($minValue && isBefore(date, $minValue))\n                return true;\n            if ($maxValue && isBefore($maxValue, date))\n                return true;\n            return false;\n        };\n    });\n    const isDateSelected = derived([value], ([$value]) => {\n        return (date) => {\n            if (Array.isArray($value)) {\n                return $value.some((d) => isSameDay(d, date));\n            }\n            else if (!$value) {\n                return false;\n            }\n            else {\n                return isSameDay($value, date);\n            }\n        };\n    });\n    /**\n     * A derived helper store that evaluates to true if a currently selected date is invalid.\n     */\n    const isInvalid = derived([value, isDateDisabled, options.isDateUnavailable], ([$value, $isDateDisabled, $isDateUnavailable]) => {\n        if (Array.isArray($value)) {\n            if (!$value.length)\n                return false;\n            for (const date of $value) {\n                if ($isDateDisabled?.(date))\n                    return true;\n                if ($isDateUnavailable?.(date))\n                    return true;\n            }\n        }\n        else {\n            if (!$value)\n                return false;\n            if ($isDateDisabled?.($value))\n                return true;\n            if ($isDateUnavailable?.($value))\n                return true;\n        }\n        return false;\n    });\n    /**\n     * Initialize the announcer, which currently remains inactive in this context since it will\n     * be server-side rendered, but we'll initialize it in the calendar's action.\n     *\n     * The announcer is in charge of providing `aria-live` announcements for the calendar,\n     * such as when a date is selected.\n     */\n    let announcer = getAnnouncer();\n    /**\n     * The current heading value for the calendar, meant to be utilized with\n     * the {@link heading} builder.\n     * It renders the current displayed month and year, formatted for the current locale.\n     * This value updates automatically as the user navigates the calendar, even when\n     * displaying multiple months using the `numberOfMonths` prop.\n     */\n    const headingValue = derived([months, locale], ([$months, $locale]) => {\n        if (!$months.length)\n            return '';\n        if ($locale !== formatter.getLocale()) {\n            formatter.setLocale($locale);\n        }\n        if ($months.length === 1) {\n            const month = $months[0].value;\n            return `${formatter.fullMonthAndYear(toDate(month))}`;\n        }\n        const startMonth = toDate($months[0].value);\n        const endMonth = toDate($months[$months.length - 1].value);\n        const startMonthName = formatter.fullMonth(startMonth);\n        const endMonthName = formatter.fullMonth(endMonth);\n        const startMonthYear = formatter.fullYear(startMonth);\n        const endMonthYear = formatter.fullYear(endMonth);\n        const content = startMonthYear === endMonthYear\n            ? `${startMonthName} - ${endMonthName} ${endMonthYear}`\n            : `${startMonthName} ${startMonthYear} - ${endMonthName} ${endMonthYear}`;\n        return content;\n    });\n    /**\n     * The accessible heading label for the calendar, generated by combining the `calendarLabel`\n     * prop and the `headingValue` store to create a label like `Event Date, January 2021`.\n     */\n    const fullCalendarLabel = derived([headingValue, calendarLabel], ([$headingValue, $calendarLabel]) => {\n        return `${$calendarLabel}, ${$headingValue}`;\n    });\n    /**\n     * The root element of the calendar, capable of housing multiple grids/months\n     * when using paged navigation.\n     */\n    const calendar = builder(name(), {\n        stores: [fullCalendarLabel, isInvalid, disabled, readonly, ids.calendar],\n        returned: ([$fullCalendarLabel, $isInvalid, $disabled, $readonly, $calendarId]) => {\n            return {\n                id: $calendarId,\n                role: 'application',\n                'aria-label': $fullCalendarLabel,\n                'data-invalid': $isInvalid ? '' : undefined,\n                'data-disabled': $disabled ? '' : undefined,\n                'data-readonly': $readonly ? '' : undefined,\n            };\n        },\n        action: (node) => {\n            /**\n             * Generates the accessible calendar heading when the grid is mounted.\n             * The label is dynamically updated through an effect whenever there\n             * are changes in the active date or label.\n             */\n            createAccessibleHeading(node, get(fullCalendarLabel));\n            announcer = getAnnouncer();\n            const unsubKb = addMeltEventListener(node, 'keydown', handleCalendarKeydown);\n            return {\n                destroy() {\n                    unsubKb();\n                },\n            };\n        },\n    });\n    /**\n     * The calendar heading, visually displaying the current month and year. This heading\n     * is hidden from screen readers as an accessible heading is automatically generated\n     * for the calendar.\n     *\n     * To customize the accessible heading's prefix, use the `calendarLabel` prop. By default,\n     * the accessible heading reads as `Event Date, January 2021` for January 2021. If you set\n     * the `calendarLabel` prop to 'Booking Date', the accessible heading will be 'Booking Date,\n     * January 2021' for the same month and year.\n     */\n    const heading = builder(name('heading'), {\n        stores: [disabled],\n        returned: ([$disabled]) => {\n            return {\n                'aria-hidden': true,\n                'data-disabled': $disabled ? '' : undefined,\n            };\n        },\n    });\n    /**\n     * A grid element that serves as a container for a single month in the calendar.\n     * Grids should be rendered for each month present in the `months` store returned\n     * by the `createCalendar` builder.\n     *\n     * For more details about the structure of the month object, refer to {@link Month}.\n     */\n    const grid = builder(name('grid'), {\n        stores: [readonly, disabled],\n        returned: ([$readonly, $disabled]) => {\n            return {\n                tabindex: -1,\n                role: 'grid',\n                'aria-readonly': $readonly ? 'true' : undefined,\n                'aria-disabled': $disabled ? 'true' : undefined,\n                'data-readonly': $readonly ? '' : undefined,\n                'data-disabled': $disabled ? '' : undefined,\n            };\n        },\n    });\n    /**\n     * The 'prev' button for the calendar, enabling navigation to the\n     * previous page. In paged navigation mode, it moves the calendar\n     * back by the number of months specified in the `numberOfMonths` prop.\n     * In non-paged mode, it shifts the calendar back by one month.\n     */\n    const prevButton = builder(name('prevButton'), {\n        stores: [isPrevButtonDisabled],\n        returned: ([$isPrevButtonDisabled]) => {\n            const disabled = $isPrevButtonDisabled;\n            return {\n                role: 'button',\n                'aria-label': 'Previous',\n                'aria-disabled': disabled ? 'true' : undefined,\n                'data-disabled': disabled ? '' : undefined,\n                disabled: disabled ? true : undefined,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                if (get(isPrevButtonDisabled))\n                    return;\n                prevPage();\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    /**\n     * A button element designed for navigating to the next page of the calendar.\n     * If using paged navigation, it advances the calendar by the number of months\n     * specified in the `numberOfMonths` prop. If not using paged navigation, it\n     * moves the calendar forward by one month.\n     */\n    const nextButton = builder(name('nextButton'), {\n        stores: [isNextButtonDisabled],\n        returned: ([$isNextButtonDisabled]) => {\n            const disabled = $isNextButtonDisabled;\n            return {\n                role: 'button',\n                'aria-label': 'Next',\n                'aria-disabled': disabled ? 'true' : undefined,\n                'data-disabled': disabled ? '' : undefined,\n                disabled: disabled ? true : undefined,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                if (get(isNextButtonDisabled))\n                    return;\n                nextPage();\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    /**\n     * Represents an individual date cell in the calendar grid,\n     * signifying a single day within the month. Configured with\n     * essential attributes and event handlers for accessibility\n     * and interactivity.\n     */\n    const cell = builder(name('cell'), {\n        stores: [\n            isDateSelected,\n            isDateDisabled,\n            isDateUnavailable,\n            isOutsideVisibleMonths,\n            placeholder,\n        ],\n        returned: ([$isDateSelected, $isDateDisabled, $isDateUnavailable, $isOutsideVisibleMonths, $placeholder,]) => {\n            /**\n             * Applies the appropriate attributes to each date cell in the calendar.\n             *\n             * @params cellValue - The `DateValue` for the current cell.\n             * @params monthValue - The `DateValue` for the current month, which is used\n             * to determine if the current cell is outside the current month.\n             */\n            return (cellValue, monthValue) => {\n                const cellDate = toDate(cellValue);\n                const isDisabled = $isDateDisabled?.(cellValue);\n                const isUnavailable = $isDateUnavailable?.(cellValue);\n                const isDateToday = isToday(cellValue, getLocalTimeZone());\n                const isOutsideMonth = !isSameMonth(cellValue, monthValue);\n                const isOutsideVisibleMonths = $isOutsideVisibleMonths(cellValue);\n                const isFocusedDate = isSameDay(cellValue, $placeholder);\n                const isSelectedDate = $isDateSelected(cellValue);\n                const labelText = formatter.custom(cellDate, {\n                    weekday: 'long',\n                    month: 'long',\n                    day: 'numeric',\n                    year: 'numeric',\n                });\n                return {\n                    role: 'button',\n                    'aria-label': labelText,\n                    'aria-selected': isSelectedDate ? true : undefined,\n                    'aria-disabled': isOutsideMonth || isDisabled || isUnavailable ? true : undefined,\n                    'data-selected': isSelectedDate ? true : undefined,\n                    'data-value': cellValue.toString(),\n                    'data-disabled': isDisabled || isOutsideMonth ? '' : undefined,\n                    'data-unavailable': isUnavailable ? '' : undefined,\n                    'data-today': isDateToday ? '' : undefined,\n                    'data-outside-month': isOutsideMonth ? '' : undefined,\n                    'data-outside-visible-months': isOutsideVisibleMonths ? '' : undefined,\n                    'data-focused': isFocusedDate ? '' : undefined,\n                    tabindex: isFocusedDate ? 0 : isOutsideMonth || isDisabled ? undefined : -1,\n                };\n            };\n        },\n        action: (node) => {\n            const getElArgs = () => {\n                const value = node.getAttribute('data-value');\n                const label = node.getAttribute('data-label');\n                const disabled = node.hasAttribute('data-disabled');\n                return {\n                    value,\n                    label: label ?? node.textContent ?? null,\n                    disabled: disabled ? true : false,\n                };\n            };\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                const args = getElArgs();\n                if (args.disabled)\n                    return;\n                if (!args.value)\n                    return;\n                handleCellClick(parseStringToDateValue(args.value, get(placeholder)));\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    /**\n     * Synchronize the locale used within the formatter to ensure\n     * dynamic updates are reflected in the calendar.\n     */\n    effect([locale], ([$locale]) => {\n        if (formatter.getLocale() === $locale)\n            return;\n        formatter.setLocale($locale);\n    });\n    /**\n     * Updates the displayed months based on changes in the placeholder value,\n     * which determines the months to show in the calendar.\n     */\n    effect([placeholder, weekStartsOn, locale, fixedWeeks, numberOfMonths], ([$placeholder, $weekStartsOn, $locale, $fixedWeeks, $numberOfMonths]) => {\n        if (!isBrowser || !$placeholder)\n            return;\n        const $visibleMonths = get(visibleMonths);\n        /**\n         * If the placeholder's month is already in the visible months,\n         * we don't need to do anything.\n         */\n        if ($visibleMonths.some((month) => isSameMonth(month, $placeholder))) {\n            return;\n        }\n        const defaultMonthProps = {\n            weekStartsOn: $weekStartsOn,\n            locale: $locale,\n            fixedWeeks: $fixedWeeks,\n            numberOfMonths: $numberOfMonths,\n        };\n        months.set(createMonths({\n            ...defaultMonthProps,\n            dateObj: $placeholder,\n        }));\n    });\n    /**\n     * Update the accessible heading's text content when the\n     * `fullCalendarLabel` store changes.\n     */\n    effect([fullCalendarLabel], ([$fullCalendarLabel]) => {\n        if (!isBrowser)\n            return;\n        const node = document.getElementById(get(ids.accessibleHeading));\n        if (!isHTMLElement(node))\n            return;\n        node.textContent = $fullCalendarLabel;\n    });\n    /**\n     * Synchronizing the placeholder value with the current value.\n     */\n    effect([value], ([$value]) => {\n        if (Array.isArray($value) && $value.length) {\n            const lastValue = $value[$value.length - 1];\n            if (lastValue && get(placeholder) !== lastValue) {\n                placeholder.set(lastValue);\n            }\n        }\n        else if (!Array.isArray($value) && $value && get(placeholder) !== $value) {\n            placeholder.set($value);\n        }\n    });\n    /**\n     * This derived store holds an array of localized day names for the current\n     * locale and calendar view. It dynamically syncs with the 'weekStartsOn' option,\n     * updating its content when the option changes. Using this store to render the\n     * calendar's days of the week is strongly recommended, as it guarantees that\n     * the days are correctly formatted for the current locale and calendar view.\n     *\n     * @example\n     * ```svelte\n     * <table use:melt={$grid} class=\"w-full\">\n     * \t<thead aria-hidden=\"true\">\n     * \t\t<tr>\n     * \t\t\t{#each $weekdays as day}\n     * \t\t\t\t<th class=\"text-sm font-semibold text-magnum-800\">\n     * \t\t\t\t\t<div class=\"flex h-6 w-6 items-center justify-center p-4\">\n     * \t\t\t\t\t\t{day}\n     * \t\t\t\t\t</div>\n     * \t\t\t\t</th>\n     * \t\t\t{/each}\n     * \t\t</tr>\n     * \t</thead>\n     * \t<!-- ... -->\n     * </table>\n     * ```\n     *\n     * If you prefer to format/render the days of the week yourself,\n     * you can do so by accessing the first week of the first month,\n     * and mapping over the dates to get/format each day of the week.\n     *\n     * @example\n     * ```svelte\n     * {#each $months as month}\n     * \t<table use:melt={$grid} class=\"w-full\">\n     * \t\t<thead aria-hidden=\"true\">\n     * \t\t\t<tr>\n     * \t\t\t\t{#each month.weeks[0] as dayOfWeek}\n     * \t\t\t\t\t<th class=\"text-sm font-semibold text-magnum-800\">\n     * \t\t\t\t\t\t<div class=\"flex h-6 w-6 items-center justify-center p-4\">\n     * \t\t\t\t\t\t\t{new Intl.DateTimeFormat('en', { weekday: 'long' }).format\n     * \t\t\t\t\t\t\t(dayOfWeek)}\n     * \t\t\t\t\t\t</div>\n     * \t\t\t\t\t</th>\n     * \t\t\t\t{/each}\n     * \t\t\t</tr>\n     * \t\t</thead>\n     * \t\t<!-- ... -->\n     * \t</table>\n     * {/each}\n     * ```\n     *\n     */\n    const weekdays = derived([months, weekdayFormat, locale], ([$months, $weekdayFormat, _]) => {\n        if (!$months.length)\n            return [];\n        return $months[0].weeks[0].map((date) => {\n            return formatter.dayOfWeek(toDate(date), $weekdayFormat);\n        });\n    });\n    /**\n     * Creates an accessible heading for the calendar, ensuring that\n     * when it is focused by a screen reader, the displayed date range\n     * is announced. This approach maintains accessibility for screen\n     * readers while keeping the heading hidden from the visual design\n     * of the calendar.\n     */\n    function createAccessibleHeading(node, label) {\n        if (!isBrowser)\n            return;\n        const div = document.createElement('div');\n        div.style.cssText = styleToString({\n            border: '0px',\n            clip: 'rect(0px, 0px, 0px, 0px)',\n            'clip-path': 'inset(50%)',\n            height: '1px',\n            margin: '-1px',\n            overflow: 'hidden',\n            padding: '0px',\n            position: 'absolute',\n            'white-space': 'nowrap',\n            width: '1px',\n        });\n        const h2 = document.createElement('div');\n        h2.textContent = label;\n        h2.id = get(ids.accessibleHeading);\n        h2.role = 'heading';\n        h2.ariaLevel = '2';\n        node.insertBefore(div, node.firstChild);\n        div.appendChild(h2);\n    }\n    /**\n     * Navigate to the next page of the calendar.\n     *\n     * @remarks\n     * If using paged navigation, this will move the calendar forward\n     * by the number of months specified in the `numberOfMonths` prop.\n     * If not using paged navigation, this will move the calendar forward\n     * by one month.\n     *\n     * @example\n     * ```svelte\n     * <script>\n     * \timport { createCalendar } from '@melt-ui/svelte';\n     * \tconst { { ... }, helpers: { nextPage } } = createCalendar()\n     * </script>\n     *\n     * <button on:click={nextPage} aria-label=\"Next page\"></button>\n     * ```\n     */\n    function nextPage() {\n        const $months = get(months);\n        const $numberOfMonths = get(numberOfMonths);\n        if (get(pagedNavigation)) {\n            const firstMonth = $months[0].value;\n            placeholder.set(firstMonth.add({ months: $numberOfMonths }));\n        }\n        else {\n            const firstMonth = $months[0].value;\n            const newMonths = createMonths({\n                dateObj: firstMonth.add({ months: 1 }),\n                weekStartsOn: get(weekStartsOn),\n                locale: get(locale),\n                fixedWeeks: get(fixedWeeks),\n                numberOfMonths: $numberOfMonths,\n            });\n            months.set(newMonths);\n            placeholder.set(newMonths[0].value.set({ day: 1 }));\n        }\n    }\n    /**\n     * Navigate to the previous page of the calendar.\n     *\n     * @remarks\n     * A helper function to navigate to the previous page of the calendar.\n     * If using paged navigation, this will move the calendar backwards\n     * by the number of months specified in the `numberOfMonths` prop.\n     * If not using paged navigation, this will move the calendar backwards\n     * by one month.\n     *\n     * @example\n     * ```svelte\n     * <script>\n     * \timport { createCalendar } from '@melt-ui/svelte';\n     * \tconst { { ... }, helpers: { prevPage } } = createCalendar()\n     * </script>\n     *\n     * <button on:click={prevPage} aria-label=\"Previous page\"></button>\n     * ```\n     */\n    function prevPage() {\n        const $months = get(months);\n        const $numberOfMonths = get(numberOfMonths);\n        if (get(pagedNavigation)) {\n            const firstMonth = $months[0].value;\n            placeholder.set(firstMonth.subtract({ months: $numberOfMonths }));\n        }\n        else {\n            const firstMonth = $months[0].value;\n            const newMonths = createMonths({\n                dateObj: firstMonth.subtract({ months: 1 }),\n                weekStartsOn: get(weekStartsOn),\n                locale: get(locale),\n                fixedWeeks: get(fixedWeeks),\n                numberOfMonths: $numberOfMonths,\n            });\n            months.set(newMonths);\n            placeholder.set(newMonths[0].value.set({ day: 1 }));\n        }\n    }\n    /**\n     * Navigate to the next year in the calendar.\n     *\n     * @remarks\n     * A helper function to navigate to the next year in the calendar,\n     * which is useful if you want to extend the calendar to have buttons\n     * to navigate to the next/prev year.\n     *\n     * @example\n     * ```svelte\n     * <script>\n     * \timport { createCalendar } from '@melt-ui/svelte';\n     * \tconst { { ... }, helpers: { nextYear, prevYear } } = createCalendar()\n     * </script>\n     *\n     * <button on:click={prevYear} aria-label=\"Previous year\"></button>\n     * <button on:click={nextYear} aria-label=\"Next year\"></button>\n     *\n     * ```\n     */\n    function nextYear() {\n        placeholder.add({ years: 1 });\n    }\n    /**\n     * A helper function to navigate to the previous year in the calendar,\n     * which is useful if you want to extend the calendar to have buttons\n     * to navigate to the next/prev year.\n     *\n     * @example\n     * ```svelte\n     * <script>\n     * \timport { createCalendar } from '@melt-ui/svelte';\n     * \tconst { { ... }, helpers: { nextYear, prevYear } } = createCalendar()\n     * </script>\n     *\n     * <button on:click={prevYear} aria-label=\"Previous year\"></button>\n     * <button on:click={nextYear} aria-label=\"Next year\"></button>\n     *\n     * ```\n     */\n    function prevYear() {\n        placeholder.subtract({ years: 1 });\n    }\n    const ARROW_KEYS = [kbd.ARROW_DOWN, kbd.ARROW_UP, kbd.ARROW_LEFT, kbd.ARROW_RIGHT];\n    /**\n     * Set the year of the calendar to the specified year.\n     *\n     * @remarks\n     * This is useful if you want to extend the calendar to have\n     * alternative ways to change the year, such as a select input.\n     *\n     * @example\n     * ```svelte\n     * <script>\n     * \timport { createCalendar } from '@melt-ui/svelte';\n     * \tconst { { ... }, helpers: { setYear } } = createCalendar()\n     *\n     * \tlet selectValue = 2023;\n     * \t$: setYear(selectValue);\n     * </script>\n     *\n     * <select bind:value={selectValue} aria-label='Select a year'>\n     * \t<option value={2023}>2023</option>\n     * \t<option value={2024}>2024</option>\n     * \t<option value={2025}>2025</option>\n     * \t<!-- ... -->\n     * </select>\n     * ```\n     */\n    function setYear(year) {\n        placeholder.setDate({ year: year });\n    }\n    /**\n     * Set the month of the calendar to the specified month.\n     *\n     * @remarks\n     * This is useful if you want to extend the calendar to have\n     * alternative ways to change the month, such as a select input.\n     *\n     * @example\n     * ```svelte\n     * <script>\n     * \timport { createCalendar } from '@melt-ui/svelte';\n     * \tconst { { ... }, helpers: { setMonth } } = createCalendar()\n     *\n     * \tlet selectValue = 1;\n     * \t$: setMonth(selectValue);\n     * </script>\n     *\n     * <select bind:value={selectValue} aria-label='Select a month'>\n     * \t<option value={1}>January</option>\n     * \t<option value={2}>February</option>\n     * \t<option value={3}>March</option>\n     * \t<!-- ... -->\n     * </select>\n     * ```\n     */\n    function setMonth(month) {\n        placeholder.setDate({ month: month });\n    }\n    function handleCellClick(date) {\n        const $readonly = get(readonly);\n        if ($readonly)\n            return;\n        const $isDateDisabled = get(isDateDisabled);\n        const $isUnavailable = get(options.isDateUnavailable);\n        if ($isDateDisabled?.(date) || $isUnavailable?.(date))\n            return;\n        value.update((prev) => {\n            const $multiple = get(multiple);\n            if ($multiple) {\n                return handleMultipleUpdate(prev, date);\n            }\n            else {\n                const next = handleSingleUpdate(prev, date);\n                if (!next) {\n                    announcer.announce('Selected date is now empty.', 'polite', 5000);\n                }\n                else {\n                    announcer.announce(`Selected Date: ${formatter.selectedDate(next, false)}`, 'polite');\n                }\n                return next;\n            }\n        });\n    }\n    function handleSingleUpdate(prev, date) {\n        if (Array.isArray(prev))\n            throw new Error('Invalid value for multiple prop.');\n        if (!prev)\n            return date;\n        const $preventDeselect = get(preventDeselect);\n        if (!$preventDeselect && isSameDay(prev, date)) {\n            placeholder.set(date);\n            return undefined;\n        }\n        return date;\n    }\n    function handleMultipleUpdate(prev, date) {\n        if (!prev)\n            return [date];\n        if (!Array.isArray(prev))\n            throw new Error('Invalid value for multiple prop.');\n        const index = prev.findIndex((d) => isSameDay(d, date));\n        const $preventDeselect = get(preventDeselect);\n        if (index === -1) {\n            return [...prev, date];\n        }\n        else if ($preventDeselect) {\n            return prev;\n        }\n        else {\n            const next = prev.filter((d) => !isSameDay(d, date));\n            if (!next.length) {\n                placeholder.set(date);\n                return undefined;\n            }\n            return next;\n        }\n    }\n    const SELECT_KEYS = [kbd.ENTER, kbd.SPACE];\n    function handleCalendarKeydown(e) {\n        const currentCell = e.target;\n        if (!isCalendarCell(currentCell))\n            return;\n        if (!ARROW_KEYS.includes(e.key) && !SELECT_KEYS.includes(e.key))\n            return;\n        e.preventDefault();\n        // the cell that is currently focused\n        if (e.key === kbd.ARROW_DOWN) {\n            shiftFocus(currentCell, 7);\n        }\n        if (e.key === kbd.ARROW_UP) {\n            shiftFocus(currentCell, -7);\n        }\n        if (e.key === kbd.ARROW_LEFT) {\n            shiftFocus(currentCell, -1);\n        }\n        if (e.key === kbd.ARROW_RIGHT) {\n            shiftFocus(currentCell, 1);\n        }\n        if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n            const cellValue = currentCell.getAttribute('data-value');\n            if (!cellValue)\n                return;\n            handleCellClick(parseStringToDateValue(cellValue, get(placeholder)));\n        }\n    }\n    function shiftFocus(node, add) {\n        const candidateCells = getSelectableCells(get(ids.calendar));\n        if (!candidateCells.length)\n            return;\n        const index = candidateCells.indexOf(node);\n        const nextIndex = index + add;\n        /**\n         * If the next cell is within the bounds of the\n         * displayed/rendered cells, easy day, just focus it.\n         */\n        if (isValidIndex(nextIndex, candidateCells)) {\n            const nextCell = candidateCells[nextIndex];\n            setPlaceholderToNodeValue(nextCell, placeholder);\n            return nextCell.focus();\n        }\n        /**\n         * When the next cell falls outside the displayed/rendered cells range,\n         * we update the focus to the previous or next month based on the direction,\n         * and then focus on the relevant cell.\n         */\n        if (nextIndex < 0) {\n            /**\n             * To handle negative index values, we rewind by one month,\n             * retrieve candidate cells for that month, and shift the focus\n             * by the difference between the nextIndex starting from the end\n             * of the array.\n             */\n            // shift the calendar back a month unless previous month is disabled\n            if (get(isPrevButtonDisabled))\n                return;\n            const $months = get(months);\n            const firstMonth = $months[0].value;\n            const $numberOfMonths = get(numberOfMonths);\n            placeholder.set(firstMonth.subtract({ months: $numberOfMonths }));\n            // Without a tick here, it seems to be too fast for\n            // the DOM to update, with the tick it works great\n            tick().then(() => {\n                const newCandidateCells = getSelectableCells(get(ids.calendar));\n                if (!newCandidateCells.length) {\n                    return;\n                }\n                /**\n                 * Starting at the end of the array, shift focus by the\n                 * difference between the nextIndex and the length of the\n                 * array, since the nextIndex is negative.\n                 */\n                const newIndex = newCandidateCells.length - Math.abs(nextIndex);\n                if (isValidIndex(newIndex, newCandidateCells)) {\n                    const newCell = newCandidateCells[newIndex];\n                    setPlaceholderToNodeValue(newCell, placeholder);\n                    return newCell.focus();\n                }\n            });\n        }\n        if (nextIndex >= candidateCells.length) {\n            /**\n             * Since we're in the positive index range, we need to\n             * go forward a month, refetch the candidate cells within that\n             * month, and then starting at the beginning of that array,\n             * shift focus by the nextIndex amount.\n             */\n            // shift the calendar forward a month unless next month is disabled\n            if (get(isNextButtonDisabled))\n                return;\n            const $months = get(months);\n            const firstMonth = $months[0].value;\n            const $numberOfMonths = get(numberOfMonths);\n            placeholder.set(firstMonth.add({ months: $numberOfMonths }));\n            tick().then(() => {\n                const newCandidateCells = getSelectableCells(get(ids.calendar));\n                if (!newCandidateCells.length) {\n                    return;\n                }\n                /**\n                 * We need to determine how far into the next month we need to go\n                 * to get the next index. So if we only went over the previous\n                 * month by 1, we need to go into the next month by 1 to get the\n                 * right index.\n                 */\n                const newIndex = nextIndex - candidateCells.length;\n                if (isValidIndex(newIndex, newCandidateCells)) {\n                    const nextCell = newCandidateCells[newIndex];\n                    return nextCell.focus();\n                }\n            });\n        }\n    }\n    /**\n     * A helper function to determine if a date cell is disabled,\n     * which uses the `Matcher`(s) provided via the `isDisabled`\n     * prop, as well as other internal logic, such as if it's\n     * outside of the month, or if it's before/after the min/max\n     * values.\n     *\n     * Although we set attributes on the cells themselves, for\n     * easy styling this function is useful when you want to\n     * conditionally handle something outside of the cell,\n     * such as its wrapping element.\n     *\n     * @example\n     * ```svelte\n     * {#each dates as date}\n     * \t<td role=\"gridcell\" aria-disabled={$isDisabled(date)}>\n     * \t\t<!-- ... -->\n     * \t</td>\n     * {/each}\n     * ```\n     *\n     * @param date - The `DateValue` to check\n     * @returns `true` if the date is disabled, `false` otherwise\n     */\n    const _isDateDisabled = derived([isDateDisabled, placeholder, minValue, maxValue, disabled], ([$isDateDisabled, $placeholder, $minValue, $maxValue, $disabled]) => {\n        return (date) => {\n            if ($isDateDisabled?.(date) || $disabled)\n                return true;\n            if ($minValue && isBefore(date, $minValue))\n                return true;\n            if ($maxValue && isAfter(date, $maxValue))\n                return true;\n            if (!isSameMonth(date, $placeholder))\n                return true;\n            return false;\n        };\n    });\n    /**\n     * A helper function to determine if a date is unavailable,\n     * which uses the `Matcher`(s) provided via the `unavailable`\n     * prop.\n     *\n     * Although we set attributes on the cells themselves, this\n     * function is useful when you want to conditionally handle\n     * something outside of the cell, such as its wrapping element.\n     *\n     * @example\n     * ```svelte\n     * {#each dates as date}\n     * \t<td role=\"gridcell\">\n     * \t\t{#if $isUnavailable(date)}\n     * \t\t\t<span>X</span>\n     * \t\t{/if}\n     * \t\t<!-- ... -->\n     * \t</td>\n     * {/each}\n     * ```\n     *\n     * @param date - The `DateValue` to check\n     * @returns `true` if the date is disabled, `false` otherwise\n     */\n    const _isDateUnavailable = derived(isDateUnavailable, ($isDateUnavailable) => {\n        return (date) => $isDateUnavailable?.(date);\n    });\n    return {\n        elements: {\n            calendar,\n            heading,\n            grid,\n            cell,\n            nextButton,\n            prevButton,\n        },\n        states: {\n            placeholder: placeholder.toWritable(),\n            months,\n            value,\n            weekdays,\n            headingValue,\n        },\n        helpers: {\n            nextPage,\n            prevPage,\n            nextYear,\n            prevYear,\n            setYear,\n            setMonth,\n            isDateDisabled: _isDateDisabled,\n            isDateSelected,\n            isDateUnavailable: _isDateUnavailable,\n        },\n        options,\n        ids,\n    };\n}\n", "import { builder, createElHelpers, effect, kbd, overridable, toWritableStores, omit, isHTMLElement, addMeltEventListener, executeCallbacks, isNumberString, styleToString, noop, sleep, } from '../../internal/helpers/index.js';\nimport { dateStore, getDaysInMonth, getDefaultDate, toDate, createFormatter, getAnnouncer, isBefore, getFirstSegment, } from '../../internal/helpers/date/index.js';\nimport { derived, get, writable } from 'svelte/store';\nimport { isFirstSegment, areAllSegmentsFilled, createContent, getValueFromSegments, initSegmentStates, initializeSegmentValues, isDateAndTimeSegmentObj, isDateSegmentPart, getPartFromNode, isAcceptableSegmentKey, removeDescriptionElement, syncSegmentValues, setDescription, inferGranularity, } from './_internal/helpers.js';\nimport { handleSegmentNavigation, isSegmentNavigationKey, moveToNextSegment, } from '../../internal/helpers/date/index.js';\nimport { generateIds } from '../../internal/helpers/id';\nconst defaults = {\n    isDateUnavailable: undefined,\n    value: undefined,\n    hourCycle: undefined,\n    locale: 'en',\n    granularity: undefined,\n    hideTimeZone: false,\n    disabled: false,\n    readonly: false,\n    name: undefined,\n    required: false,\n    minValue: undefined,\n    maxValue: undefined,\n};\nconst { name } = createElHelpers('dateField');\nconst dateFieldIdParts = [\n    'field',\n    'label',\n    'description',\n    'validation',\n    'day',\n    'month',\n    'year',\n    'hour',\n    'minute',\n    'second',\n    'dayPeriod',\n    'timeZoneName',\n];\nexport function createDateField(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'value', 'placeholder', 'ids'));\n    const { locale, granularity, hourCycle, hideTimeZone, isDateUnavailable, disabled, readonly, name: nameStore, required, minValue, maxValue, } = options;\n    const defaultDate = getDefaultDate({\n        defaultPlaceholder: withDefaults.defaultPlaceholder,\n        granularity: withDefaults.granularity,\n        defaultValue: withDefaults.defaultValue,\n    });\n    const valueWritable = withDefaults.value ?? writable(withDefaults.defaultValue);\n    const value = overridable(valueWritable, withDefaults.onValueChange);\n    const isInvalid = derived([value, isDateUnavailable, minValue, maxValue], ([$value, $isDateUnavailable, $minValue, $maxValue]) => {\n        if (!$value)\n            return false;\n        if ($isDateUnavailable?.($value))\n            return true;\n        if ($minValue && isBefore($value, $minValue))\n            return true;\n        if ($maxValue && isBefore($maxValue, $value))\n            return true;\n        return false;\n    });\n    const placeholderWritable = withDefaults.placeholder ?? writable(withDefaults.defaultPlaceholder ?? defaultDate);\n    const placeholder = dateStore(overridable(placeholderWritable, withDefaults.onPlaceholderChange), withDefaults.defaultPlaceholder ?? defaultDate);\n    const inferredGranularity = derived([placeholder, granularity], ([$placeholder, $granularity]) => {\n        if ($granularity) {\n            return $granularity;\n        }\n        else {\n            return inferGranularity($placeholder, $granularity);\n        }\n    });\n    const formatter = createFormatter(get(locale));\n    const initialSegments = initializeSegmentValues(get(inferredGranularity));\n    const segmentValues = writable(structuredClone(initialSegments));\n    let announcer = getAnnouncer();\n    /**\n     * Prevent a condition where the value of the date\n     * overrides the updated dayPeriod value when all\n     * segments are filled.\n     */\n    const updatingDayPeriod = writable(null);\n    const ids = toWritableStores({ ...generateIds(dateFieldIdParts), ...withDefaults.ids });\n    const idValues = derived([\n        ids.field,\n        ids.label,\n        ids.description,\n        ids.validation,\n        ids.day,\n        ids.month,\n        ids.year,\n        ids.hour,\n        ids.minute,\n        ids.second,\n        ids.dayPeriod,\n        ids.timeZoneName,\n    ], ([$fieldId, $labelId, $descriptionId, $validationId, $dayId, $monthId, $yearId, $hourId, $minuteId, $secondId, $dayPeriodId, $timeZoneNameId,]) => {\n        return {\n            field: $fieldId,\n            label: $labelId,\n            description: $descriptionId,\n            validation: $validationId,\n            day: $dayId,\n            month: $monthId,\n            year: $yearId,\n            hour: $hourId,\n            minute: $minuteId,\n            second: $secondId,\n            dayPeriod: $dayPeriodId,\n            timeZoneName: $timeZoneNameId,\n        };\n    });\n    /**\n     * The default attributes applied to the segments\n     * that are interactive.\n     */\n    const defaultSegmentAttrs = {\n        role: 'spinbutton',\n        contenteditable: true,\n        tabindex: 0,\n        spellcheck: false,\n        inputmode: 'numeric',\n        autocorrect: 'off',\n        enterkeyhint: 'next',\n        style: styleToString({\n            'caret-color': 'transparent',\n        }),\n    };\n    const states = initSegmentStates();\n    const allSegmentContent = derived([segmentValues, locale, inferredGranularity, hideTimeZone, hourCycle], ([$segmentValues, $locale, $inferredGranularity, $hideTimeZone, $hourCycle]) => {\n        return createContent({\n            segmentValues: $segmentValues,\n            formatter,\n            locale: $locale,\n            granularity: $inferredGranularity,\n            dateRef: get(placeholder),\n            hideTimeZone: $hideTimeZone,\n            hourCycle: $hourCycle,\n        });\n    });\n    const segmentContents = derived(allSegmentContent, ($allSegmentContent) => $allSegmentContent.arr);\n    const segmentContentsObj = derived(allSegmentContent, ($allSegmentContent) => $allSegmentContent.obj);\n    const label = builder(name('label'), {\n        stores: [isInvalid, disabled, ids.label],\n        returned: ([$isInvalid, $disabled, $labelId]) => {\n            return {\n                id: $labelId,\n                'data-invalid': $isInvalid ? '' : undefined,\n                'data-disabled': $disabled ? '' : undefined,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                const firstSegment = getFirstSegment(get(ids.field));\n                if (!firstSegment)\n                    return;\n                sleep(1).then(() => firstSegment.focus());\n            }), addMeltEventListener(node, 'mousedown', (e) => {\n                if (!e.defaultPrevented && e.detail > 1) {\n                    e.preventDefault();\n                }\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const validation = builder(name('validation'), {\n        stores: [isInvalid, ids.validation],\n        returned: ([$isInvalid, $validationId]) => {\n            const validStyle = styleToString({\n                display: 'none',\n            });\n            return {\n                id: $validationId,\n                'data-invalid': $isInvalid ? '' : undefined,\n                style: $isInvalid ? undefined : validStyle,\n            };\n        },\n    });\n    const hiddenInput = builder(name('hidden-input'), {\n        stores: [value, nameStore, disabled, required],\n        returned: ([$value, $nameStore, $disabled, $required]) => {\n            return {\n                name: $nameStore,\n                value: $value?.toString(),\n                'aria-hidden': 'true',\n                hidden: true,\n                disabled: $disabled,\n                required: $required,\n                tabIndex: -1,\n                style: styleToString({\n                    position: 'absolute',\n                    opacity: 0,\n                    'pointer-events': 'none',\n                    margin: 0,\n                    transform: 'translateX(-100%)',\n                }),\n            };\n        },\n    });\n    const fieldIdDeps = derived([ids.field, ids.label, ids.description, ids.label], ([$fieldId, $labelId, $descriptionId, $validationId]) => {\n        return {\n            field: $fieldId,\n            label: $labelId,\n            description: $descriptionId,\n            validation: $validationId,\n        };\n    });\n    /**\n     * The date field element which contains all the segments.\n     */\n    const field = builder(name('field'), {\n        stores: [value, isInvalid, disabled, readonly, fieldIdDeps],\n        returned: ([$value, $isInvalid, $disabled, $readonly, $ids]) => {\n            const describedBy = $value\n                ? `${$ids.description}${$isInvalid ? ` ${$ids.validation}` : ''}`\n                : `${$ids.description}`;\n            return {\n                role: 'group',\n                id: $ids.field,\n                'aria-labelledby': $ids.label,\n                'aria-describedby': describedBy,\n                'aria-disabled': $disabled ? 'true' : undefined,\n                'aria-readonly': $readonly ? 'true' : undefined,\n                'data-invalid': $isInvalid ? '' : undefined,\n                'data-disabled': $disabled ? '' : undefined,\n            };\n        },\n        // even if we don't need the element we need to specify it\n        // or TS will complain when svelte tries to pass it\n        action: (_node) => {\n            /**\n             * Initialize the announcer here, where\n             * we know we have access to the DOM.\n             */\n            announcer = getAnnouncer();\n            return {\n                destroy() {\n                    removeDescriptionElement(get(ids.description));\n                },\n            };\n        },\n    });\n    const segmentBuilders = {\n        day: {\n            attrs: daySegmentAttrs,\n            action: daySegmentAction,\n        },\n        month: {\n            attrs: monthSegmentAttrs,\n            action: monthSegmentAction,\n        },\n        year: {\n            attrs: yearSegmentAttrs,\n            action: yearSegmentAction,\n        },\n        hour: {\n            attrs: hourSegmentAttrs,\n            action: hourSegmentAction,\n        },\n        minute: {\n            attrs: minuteSegmentAttrs,\n            action: minuteSegmentAction,\n        },\n        second: {\n            attrs: secondSegmentAttrs,\n            action: secondSegmentAction,\n        },\n        dayPeriod: {\n            attrs: dayPeriodSegmentAttrs,\n            action: dayPeriodSegmentAction,\n        },\n        literal: {\n            attrs: literalSegmentAttrs,\n            action: literalSegmentAction,\n        },\n        timeZoneName: {\n            attrs: timeZoneSegmentAttrs,\n            action: timeZoneSegmentAction,\n        },\n    };\n    const segment = builder(name('segment'), {\n        stores: [\n            segmentValues,\n            hourCycle,\n            placeholder,\n            value,\n            isInvalid,\n            disabled,\n            readonly,\n            idValues,\n            locale,\n        ],\n        returned: ([$segmentValues, $hourCycle, $placeholder, $value, $isInvalid, $disabled, $readonly, $idValues, _,]) => {\n            const props = {\n                segmentValues: $segmentValues,\n                hourCycle: $hourCycle,\n                placeholder: $placeholder,\n                ids: $idValues,\n            };\n            return (part) => {\n                const defaultAttrs = {\n                    ...getSegmentAttrs(part, props),\n                    'aria-invalid': $isInvalid ? 'true' : undefined,\n                    'aria-disabled': $disabled ? 'true' : undefined,\n                    'aria-readonly': $readonly ? 'true' : undefined,\n                    'data-invalid': $isInvalid ? '' : undefined,\n                    'data-disabled': $disabled ? '' : undefined,\n                    'data-segment': `${part}`,\n                };\n                if (part === 'literal') {\n                    return defaultAttrs;\n                }\n                const id = $idValues[part];\n                const hasDescription = isFirstSegment(id, $idValues.field) || $value;\n                const describedBy = hasDescription\n                    ? `${hasDescription} ${$isInvalid ? $idValues.validation : ''}`\n                    : undefined;\n                return {\n                    ...defaultAttrs,\n                    id: $idValues[part],\n                    'aria-labelledby': getLabelledBy(part),\n                    contentEditable: $readonly || $disabled ? false : true,\n                    'aria-describedby': describedBy,\n                    tabindex: $disabled ? undefined : 0,\n                };\n            };\n        },\n        action: (node) => getSegmentAction(node),\n    });\n    function updateSegment(part, cb) {\n        if (get(disabled) || get(readonly))\n            return;\n        segmentValues.update((prev) => {\n            const dateRef = get(placeholder);\n            if (isDateAndTimeSegmentObj(prev)) {\n                const pVal = prev[part];\n                const castCb = cb;\n                if (part === 'month') {\n                    const next = castCb(pVal);\n                    if (part === 'month' && next !== null && prev.day !== null) {\n                        const date = dateRef.set({ month: next });\n                        const daysInMonth = getDaysInMonth(toDate(date));\n                        if (prev.day > daysInMonth) {\n                            prev.day = daysInMonth;\n                        }\n                    }\n                    return {\n                        ...prev,\n                        [part]: next,\n                    };\n                }\n                else if (part === 'dayPeriod') {\n                    const next = castCb(pVal);\n                    updatingDayPeriod.set(next);\n                    const date = get(placeholder);\n                    if ('hour' in date) {\n                        const trueHour = date.hour;\n                        if (next === 'AM') {\n                            if (trueHour >= 12) {\n                                prev.hour = trueHour - 12;\n                            }\n                        }\n                        else if (next === 'PM') {\n                            if (trueHour < 12) {\n                                prev.hour = trueHour + 12;\n                            }\n                        }\n                    }\n                    return {\n                        ...prev,\n                        [part]: next,\n                    };\n                }\n                else if (part === 'hour') {\n                    const next = castCb(pVal);\n                    if (next !== null && prev.dayPeriod !== null) {\n                        const dayPeriod = formatter.dayPeriod(toDate(dateRef.set({ hour: next })));\n                        if (dayPeriod === 'AM' || dayPeriod === 'PM') {\n                            prev.dayPeriod = dayPeriod;\n                        }\n                    }\n                    return {\n                        ...prev,\n                        [part]: next,\n                    };\n                }\n                const next = castCb(pVal);\n                return {\n                    ...prev,\n                    [part]: next,\n                };\n            }\n            else if (isDateSegmentPart(part)) {\n                const pVal = prev[part];\n                const castCb = cb;\n                const next = castCb(pVal);\n                if (part === 'month' && next !== null && prev.day !== null) {\n                    const date = dateRef.set({ month: next });\n                    const daysInMonth = getDaysInMonth(toDate(date));\n                    if (prev.day > daysInMonth) {\n                        prev.day = daysInMonth;\n                    }\n                }\n                return {\n                    ...prev,\n                    [part]: next,\n                };\n            }\n            return prev;\n        });\n        const $segmentValues = get(segmentValues);\n        const $fieldId = get(ids.field);\n        if (areAllSegmentsFilled($segmentValues, $fieldId)) {\n            value.set(getValueFromSegments({\n                segmentObj: $segmentValues,\n                id: $fieldId,\n                dateRef: get(placeholder),\n            }));\n            updatingDayPeriod.set(null);\n        }\n        else {\n            value.set(undefined);\n            segmentValues.set($segmentValues);\n        }\n    }\n    /**\n     * Maps the segment part to its corresponding handler function.\n     * We're using a map here to avoid a switch statement, yet\n     * still have the ability to share common logic between all\n     * the handlers.\n     */\n    function handleSegmentKeydown(e, part) {\n        const $disabled = get(disabled);\n        if (e.key !== kbd.TAB) {\n            e.preventDefault();\n        }\n        if ($disabled)\n            return;\n        const segmentKeydownHandlers = {\n            day: handleDaySegmentKeydown,\n            month: handleMonthSegmentKeydown,\n            year: handleYearSegmentKeydown,\n            hour: handleHourSegmentKeydown,\n            minute: handleMinuteSegmentKeydown,\n            second: handleSecondSegmentKeydown,\n            dayPeriod: handleDayPeriodSegmentKeydown,\n            timeZoneName: handleTimeZoneSegmentKeydown,\n        };\n        segmentKeydownHandlers[part](e);\n    }\n    /**\n     * Handles 'click' events on the segments,\n     * which prevents the default behavior of\n     * focusing the segment if the field is disabled.\n     */\n    function handleSegmentClick(e) {\n        const $disabled = get(disabled);\n        if ($disabled) {\n            e.preventDefault();\n            return;\n        }\n    }\n    /*\n     * -----------------------------------------------------\n     *\n     * DAY SEGMENT\n     *\n     * -----------------------------------------------------\n     */\n    function daySegmentAttrs(props) {\n        const { segmentValues, placeholder, ids } = props;\n        const isEmpty = segmentValues.day === null;\n        const date = segmentValues.day ? placeholder.set({ day: segmentValues.day }) : placeholder;\n        const valueNow = date.day;\n        const valueMin = 1;\n        const valueMax = getDaysInMonth(toDate(date));\n        const valueText = isEmpty ? 'Empty' : `${valueNow}`;\n        return {\n            ...defaultSegmentAttrs,\n            id: ids.day,\n            'aria-label': `day,`,\n            'aria-valuemin': valueMin,\n            'aria-valuemax': valueMax,\n            'aria-valuenow': valueNow,\n            'aria-valuetext': valueText,\n        };\n    }\n    function daySegmentAction(node) {\n        const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => handleSegmentKeydown(e, 'day')), addMeltEventListener(node, 'focusout', () => (states.day.hasLeftFocus = true)), addMeltEventListener(node, 'click', handleSegmentClick));\n        return {\n            destroy() {\n                unsubEvents();\n            },\n        };\n    }\n    function handleDaySegmentKeydown(e) {\n        if (!isAcceptableSegmentKey(e.key)) {\n            return;\n        }\n        const $segmentMonthValue = get(segmentValues).month;\n        const $placeholder = get(placeholder);\n        const daysInMonth = $segmentMonthValue\n            ? getDaysInMonth($placeholder.set({ month: $segmentMonthValue }))\n            : getDaysInMonth($placeholder);\n        if (e.key === kbd.ARROW_UP) {\n            updateSegment('day', (prev) => {\n                if (prev === null) {\n                    const next = $placeholder.day;\n                    announcer.announce(next);\n                    return next;\n                }\n                const next = $placeholder.set({ day: prev }).cycle('day', 1).day;\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        if (e.key === kbd.ARROW_DOWN) {\n            updateSegment('day', (prev) => {\n                if (prev === null) {\n                    const next = $placeholder.day;\n                    announcer.announce(next);\n                    return next;\n                }\n                const next = $placeholder.set({ day: prev }).cycle('day', -1).day;\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        const $fieldId = get(ids.field);\n        if (isNumberString(e.key)) {\n            const num = parseInt(e.key);\n            let moveToNext = false;\n            updateSegment('day', (prev) => {\n                const max = daysInMonth;\n                const maxStart = Math.floor(max / 10);\n                /**\n                 * If the user has left the segment, we want to reset the\n                 * `prev` value so that we can start the segment over again\n                 * when the user types a number.\n                 */\n                if (states.day.hasLeftFocus) {\n                    prev = null;\n                    states.day.hasLeftFocus = false;\n                }\n                if (prev === null) {\n                    /**\n                     * If the user types a 0 as the first number, we want\n                     * to keep track of that so that when they type the next\n                     * number, we can move to the next segment.\n                     */\n                    if (num === 0) {\n                        states.day.lastKeyZero = true;\n                        return null;\n                    }\n                    /**\n                     * If the last key was a 0, or if the first number is\n                     * greater than the max start digit (0-3 in most cases), then\n                     * we want to move to the next segment, since it's not possible\n                     * to continue typing a valid number in this segment.\n                     */\n                    if (states.day.lastKeyZero || num > maxStart) {\n                        moveToNext = true;\n                    }\n                    states.day.lastKeyZero = false;\n                    /**\n                     * If none of the above conditions are met, then we can just\n                     * return the number as the segment value and continue typing\n                     * in this segment.\n                     */\n                    return num;\n                }\n                /**\n                 * If the number of digits is 2, or if the total with the existing digit\n                 * and the pressed digit is greater than the maximum value for this\n                 * month, then we will reset the segment as if the user had pressed the\n                 * backspace key and then typed the number.\n                 */\n                const digits = prev.toString().length;\n                const total = parseInt(prev.toString() + num.toString());\n                /**\n                 * If the number of digits is 2, or if the total with the existing digit\n                 * and the pressed digit is greater than the maximum value for this\n                 * month, then we will reset the segment as if the user had pressed the\n                 * backspace key and then typed the number.\n                 */\n                if (digits === 2 || total > max) {\n                    /**\n                     * As we're doing elsewhere, we're checking if the number is greater\n                     * than the max start digit (0-3 in most months), and if so, we're\n                     * going to move to the next segment.\n                     */\n                    if (num > maxStart || total > max) {\n                        moveToNext = true;\n                    }\n                    announcer.announce(num);\n                    return num;\n                }\n                moveToNext = true;\n                announcer.announce(total);\n                return total;\n            });\n            if (moveToNext) {\n                moveToNextSegment(e, $fieldId);\n            }\n        }\n        if (e.key === kbd.BACKSPACE) {\n            const currentTarget = e.currentTarget;\n            if (!isHTMLElement(currentTarget))\n                return;\n            updateSegment('day', (prev) => {\n                if (prev === null)\n                    return null;\n                const str = prev.toString();\n                if (str.length === 1)\n                    return null;\n                return parseInt(str.slice(0, -1));\n            });\n        }\n        if (isSegmentNavigationKey(e.key)) {\n            handleSegmentNavigation(e, $fieldId);\n        }\n    }\n    /*\n     * -----------------------------------------------------\n     *\n     * MONTH SEGMENT\n     *\n     * -----------------------------------------------------\n     */\n    function monthSegmentAttrs(props) {\n        const { segmentValues, placeholder, ids } = props;\n        const isEmpty = segmentValues.month === null;\n        const date = segmentValues.month\n            ? placeholder.set({ month: segmentValues.month })\n            : placeholder;\n        const valueNow = date.month;\n        const valueMin = 1;\n        const valueMax = 12;\n        const valueText = isEmpty ? 'Empty' : `${valueNow} - ${formatter.fullMonth(toDate(date))}`;\n        return {\n            ...defaultSegmentAttrs,\n            id: ids.month,\n            'aria-label': 'month, ',\n            contenteditable: true,\n            'aria-valuemin': valueMin,\n            'aria-valuemax': valueMax,\n            'aria-valuenow': valueNow,\n            'aria-valuetext': valueText,\n        };\n    }\n    function monthSegmentAction(node) {\n        const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => handleSegmentKeydown(e, 'month')), addMeltEventListener(node, 'focusout', () => (states.month.hasLeftFocus = true)), addMeltEventListener(node, 'click', handleSegmentClick));\n        return {\n            destroy() {\n                unsubEvents();\n            },\n        };\n    }\n    function handleMonthSegmentKeydown(e) {\n        if (!isAcceptableSegmentKey(e.key)) {\n            return;\n        }\n        const $placeholder = get(placeholder);\n        function getMonthAnnouncement(month) {\n            return `${month} - ${formatter.fullMonth(toDate($placeholder.set({ month })))}`;\n        }\n        const max = 12;\n        states.month.hasTouched = true;\n        if (e.key === kbd.ARROW_UP) {\n            updateSegment('month', (prev) => {\n                if (prev === null) {\n                    const next = $placeholder.month;\n                    announcer.announce(getMonthAnnouncement(next));\n                    return next;\n                }\n                const next = $placeholder.set({ month: prev }).cycle('month', 1);\n                announcer.announce(getMonthAnnouncement(next.month));\n                return next.month;\n            });\n            return;\n        }\n        if (e.key === kbd.ARROW_DOWN) {\n            updateSegment('month', (prev) => {\n                if (prev === null) {\n                    const next = $placeholder.month;\n                    announcer.announce(getMonthAnnouncement(next));\n                    return next;\n                }\n                const next = $placeholder.set({ month: prev }).cycle('month', -1).month;\n                announcer.announce(getMonthAnnouncement(next));\n                return next;\n            });\n            return;\n        }\n        const $fieldId = get(ids.field);\n        if (isNumberString(e.key)) {\n            const num = parseInt(e.key);\n            let moveToNext = false;\n            updateSegment('month', (prev) => {\n                const maxStart = Math.floor(max / 10);\n                /**\n                 * If the user has left the segment, we want to reset the\n                 * `prev` value so that we can start the segment over again\n                 * when the user types a number.\n                 */\n                if (states.month.hasLeftFocus) {\n                    prev = null;\n                    states.month.hasLeftFocus = false;\n                }\n                if (prev === null) {\n                    /**\n                     * If the user types a 0 as the first number, we want\n                     * to keep track of that so that when they type the next\n                     * number, we can move to the next segment.\n                     */\n                    if (num === 0) {\n                        states.month.lastKeyZero = true;\n                        announcer.announce(null);\n                        return null;\n                    }\n                    /**\n                     * If the last key was a 0, or if the first number is\n                     * greater than the max start digit (1), then\n                     * we want to move to the next segment, since it's not possible\n                     * to continue typing a valid number in this segment.\n                     */\n                    if (states.month.lastKeyZero || num > maxStart) {\n                        moveToNext = true;\n                    }\n                    states.month.lastKeyZero = false;\n                    /**\n                     * If none of the above conditions are met, then we can just\n                     * return the number as the segment value and continue typing\n                     * in this segment.\n                     */\n                    announcer.announce(num);\n                    return num;\n                }\n                const digits = prev.toString().length;\n                const total = parseInt(prev.toString() + num.toString());\n                /**\n                 * If the number of digits is 2, or if the total with the existing digit\n                 * and the pressed digit is greater than the maximum value for this\n                 * month, then we will reset the segment as if the user had pressed the\n                 * backspace key and then typed the number.\n                 */\n                if (digits === 2 || total > max) {\n                    /**\n                     * As we're doing elsewhere, we're checking if the number is greater\n                     * than the max start digit (0-3 in most months), and if so, we're\n                     * going to move to the next segment.\n                     */\n                    if (num > maxStart) {\n                        moveToNext = true;\n                    }\n                    announcer.announce(num);\n                    return num;\n                }\n                moveToNext = true;\n                announcer.announce(total);\n                return total;\n            });\n            if (moveToNext) {\n                moveToNextSegment(e, $fieldId);\n            }\n        }\n        if (e.key === kbd.BACKSPACE) {\n            states.month.hasLeftFocus = false;\n            updateSegment('month', (prev) => {\n                if (prev === null) {\n                    announcer.announce(null);\n                    return null;\n                }\n                const str = prev.toString();\n                if (str.length === 1) {\n                    announcer.announce(null);\n                    return null;\n                }\n                const next = parseInt(str.slice(0, -1));\n                announcer.announce(getMonthAnnouncement(next));\n                return next;\n            });\n        }\n        if (isSegmentNavigationKey(e.key)) {\n            handleSegmentNavigation(e, $fieldId);\n        }\n    }\n    /*\n     * -----------------------------------------------------\n     *\n     * YEAR SEGMENT\n     *\n     * -----------------------------------------------------\n     */\n    function yearSegmentAttrs(props) {\n        const { segmentValues, placeholder, ids } = props;\n        const isEmpty = segmentValues.year === null;\n        const date = segmentValues.year ? placeholder.set({ year: segmentValues.year }) : placeholder;\n        const valueMin = 1;\n        const valueMax = 9999;\n        const valueNow = date.year;\n        const valueText = isEmpty ? 'Empty' : `${valueNow}`;\n        return {\n            ...defaultSegmentAttrs,\n            id: ids.year,\n            'aria-label': 'year, ',\n            'aria-valuemin': valueMin,\n            'aria-valuemax': valueMax,\n            'aria-valuenow': valueNow,\n            'aria-valuetext': valueText,\n        };\n    }\n    function yearSegmentAction(node) {\n        const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => handleSegmentKeydown(e, 'year')), addMeltEventListener(node, 'focusout', () => (states.year.hasLeftFocus = true)), addMeltEventListener(node, 'click', handleSegmentClick));\n        return {\n            destroy() {\n                unsubEvents();\n            },\n        };\n    }\n    function handleYearSegmentKeydown(e) {\n        if (!isAcceptableSegmentKey(e.key)) {\n            return;\n        }\n        states.year.hasTouched = true;\n        const $placeholder = get(placeholder);\n        if (e.key === kbd.ARROW_UP) {\n            updateSegment('year', (prev) => {\n                if (prev === null) {\n                    const next = $placeholder.year;\n                    announcer.announce(next);\n                    return next;\n                }\n                const next = $placeholder.set({ year: prev }).cycle('year', 1).year;\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        if (e.key === kbd.ARROW_DOWN) {\n            updateSegment('year', (prev) => {\n                if (prev === null) {\n                    const next = $placeholder.year;\n                    announcer.announce(next);\n                    return next;\n                }\n                const next = $placeholder.set({ year: prev }).cycle('year', -1).year;\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        const $fieldId = get(ids.field);\n        if (isNumberString(e.key)) {\n            let moveToNext = false;\n            const num = parseInt(e.key);\n            updateSegment('year', (prev) => {\n                if (states.year.hasLeftFocus) {\n                    prev = null;\n                    states.year.hasLeftFocus = false;\n                }\n                if (prev === null) {\n                    announcer.announce(num);\n                    return num;\n                }\n                const str = prev.toString() + num.toString();\n                if (str.length > 4) {\n                    announcer.announce(num);\n                    return num;\n                }\n                if (str.length === 4) {\n                    moveToNext = true;\n                }\n                const int = parseInt(str);\n                announcer.announce(int);\n                return int;\n            });\n            if (moveToNext) {\n                moveToNextSegment(e, $fieldId);\n            }\n        }\n        if (e.key === kbd.BACKSPACE) {\n            updateSegment('year', (prev) => {\n                if (prev === null) {\n                    announcer.announce(null);\n                    return null;\n                }\n                const str = prev.toString();\n                if (str.length === 1) {\n                    announcer.announce(null);\n                    return null;\n                }\n                const next = parseInt(str.slice(0, -1));\n                announcer.announce(next);\n                return next;\n            });\n        }\n        if (isSegmentNavigationKey(e.key)) {\n            handleSegmentNavigation(e, $fieldId);\n        }\n    }\n    /*\n     * -----------------------------------------------------\n     *\n     * HOUR SEGMENT\n     *\n     * -----------------------------------------------------\n     */\n    function hourSegmentAttrs(props) {\n        const { segmentValues, hourCycle, placeholder, ids } = props;\n        if (!('hour' in segmentValues) || !('hour' in placeholder))\n            return {};\n        const isEmpty = segmentValues.hour === null;\n        const date = segmentValues.hour ? placeholder.set({ hour: segmentValues.hour }) : placeholder;\n        const valueMin = hourCycle === 12 ? 1 : 0;\n        const valueMax = hourCycle === 12 ? 12 : 23;\n        const valueNow = date.hour;\n        const valueText = isEmpty ? 'Empty' : `${valueNow} ${segmentValues.dayPeriod ?? ''}`;\n        return {\n            ...defaultSegmentAttrs,\n            id: ids.hour,\n            'aria-label': 'hour, ',\n            'aria-valuemin': valueMin,\n            'aria-valuemax': valueMax,\n            'aria-valuenow': valueNow,\n            'aria-valuetext': valueText,\n        };\n    }\n    function hourSegmentAction(node) {\n        const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => handleSegmentKeydown(e, 'hour')), addMeltEventListener(node, 'focusout', () => (states.hour.hasLeftFocus = true)), addMeltEventListener(node, 'click', handleSegmentClick));\n        return {\n            destroy() {\n                unsubEvents();\n            },\n        };\n    }\n    function handleHourSegmentKeydown(e) {\n        const dateRef = get(placeholder);\n        if (!isAcceptableSegmentKey(e.key) || !('hour' in dateRef)) {\n            return;\n        }\n        states.hour.hasTouched = true;\n        const $hourCycle = get(hourCycle);\n        if (e.key === kbd.ARROW_UP) {\n            updateSegment('hour', (prev) => {\n                if (prev === null) {\n                    const next = dateRef.cycle('hour', 1, { hourCycle: $hourCycle }).hour;\n                    announcer.announce(next);\n                    return next;\n                }\n                const next = dateRef.set({ hour: prev }).cycle('hour', 1, { hourCycle: $hourCycle }).hour;\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        if (e.key === kbd.ARROW_DOWN) {\n            updateSegment('hour', (prev) => {\n                if (prev === null) {\n                    const next = dateRef.cycle('hour', -1, { hourCycle: $hourCycle }).hour;\n                    announcer.announce(next);\n                    return next;\n                }\n                const next = dateRef.set({ hour: prev }).cycle('hour', -1, { hourCycle: $hourCycle }).hour;\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        const $fieldId = get(ids.field);\n        if (isNumberString(e.key)) {\n            const num = parseInt(e.key);\n            let moveToNext = false;\n            updateSegment('hour', (prev) => {\n                const maxStart = Math.floor(24 / 10);\n                /**\n                 * If the user has left the segment, we want to reset the\n                 * `prev` value so that we can start the segment over again\n                 * when the user types a number.\n                 */\n                if (states.hour.hasLeftFocus) {\n                    prev = null;\n                    states.hour.hasLeftFocus = false;\n                }\n                if (prev === null) {\n                    /**\n                     * If the user types a 0 as the first number, we want\n                     * to keep track of that so that when they type the next\n                     * number, we can move to the next segment.\n                     */\n                    if (num === 0) {\n                        states.hour.lastKeyZero = true;\n                        announcer.announce(null);\n                        return null;\n                    }\n                    /**\n                     * If the last key was a 0, or if the first number is\n                     * greater than the max start digit, then we want to move\n                     * to the next segment, since it's not possible to continue\n                     * typing a valid number in this segment.\n                     */\n                    if (states.hour.lastKeyZero || num > maxStart) {\n                        moveToNext = true;\n                    }\n                    states.hour.lastKeyZero = false;\n                    announcer.announce(num);\n                    /**\n                     * If none of the above conditions are met, then we can just\n                     * return the number as the segment value and continue typing\n                     * in this segment.\n                     */\n                    return num;\n                }\n                const digits = prev.toString().length;\n                const total = parseInt(prev.toString() + num.toString());\n                /**\n                 * If the number of digits is 2, or if the total with the existing digit\n                 * and the pressed digit is greater than the maximum value, then we will\n                 * reset the segment as if the user had pressed the backspace key and then\n                 * typed a number.\n                 */\n                if (digits === 2 || total > 24) {\n                    /**\n                     * As we're doing elsewhere, we're checking if the number is greater\n                     * than the max start digit, and if so, we're moving to the next segment.\n                     */\n                    if (num > maxStart) {\n                        moveToNext = true;\n                    }\n                    announcer.announce(num);\n                    return num;\n                }\n                moveToNext = true;\n                announcer.announce(total);\n                return total;\n            });\n            if (moveToNext) {\n                moveToNextSegment(e, $fieldId);\n            }\n        }\n        if (e.key === kbd.BACKSPACE) {\n            states.hour.hasLeftFocus = false;\n            updateSegment('hour', (prev) => {\n                if (prev === null) {\n                    announcer.announce(null);\n                    return null;\n                }\n                const str = prev.toString();\n                if (str.length === 1) {\n                    announcer.announce(null);\n                    return null;\n                }\n                const next = parseInt(str.slice(0, -1));\n                announcer.announce(next);\n                return next;\n            });\n        }\n        if (isSegmentNavigationKey(e.key)) {\n            handleSegmentNavigation(e, $fieldId);\n        }\n    }\n    /*\n     * -----------------------------------------------------\n     *\n     * MINUTE SEGMENT\n     *\n     * -----------------------------------------------------\n     */\n    function minuteSegmentAttrs(props) {\n        const { segmentValues, placeholder, ids } = props;\n        if (!('minute' in segmentValues) || !('minute' in placeholder))\n            return {};\n        const isEmpty = segmentValues.minute === null;\n        const date = segmentValues.minute\n            ? placeholder.set({ minute: segmentValues.minute })\n            : placeholder;\n        const valueNow = date.minute;\n        const valueMin = 0;\n        const valueMax = 59;\n        const valueText = isEmpty ? 'Empty' : `${valueNow}`;\n        return {\n            ...defaultSegmentAttrs,\n            id: ids.minute,\n            'aria-label': 'minute, ',\n            'aria-valuemin': valueMin,\n            'aria-valuemax': valueMax,\n            'aria-valuenow': valueNow,\n            'aria-valuetext': valueText,\n        };\n    }\n    function minuteSegmentAction(node) {\n        const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => handleSegmentKeydown(e, 'minute')), addMeltEventListener(node, 'focusout', () => (states.minute.hasLeftFocus = true)), addMeltEventListener(node, 'click', handleSegmentClick));\n        return {\n            destroy() {\n                unsubEvents();\n            },\n        };\n    }\n    function handleMinuteSegmentKeydown(e) {\n        const dateRef = get(placeholder);\n        if (!isAcceptableSegmentKey(e.key) || !('minute' in dateRef)) {\n            return;\n        }\n        states.minute.hasTouched = true;\n        const min = 0;\n        const max = 59;\n        if (e.key === kbd.ARROW_UP) {\n            updateSegment('minute', (prev) => {\n                if (prev === null) {\n                    announcer.announce(min);\n                    return min;\n                }\n                const next = dateRef.set({ minute: prev }).cycle('minute', 1).minute;\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        if (e.key === kbd.ARROW_DOWN) {\n            updateSegment('minute', (prev) => {\n                if (prev === null) {\n                    announcer.announce(max);\n                    return max;\n                }\n                const next = dateRef.set({ minute: prev }).cycle('minute', -1).minute;\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        const $fieldId = get(ids.field);\n        if (isNumberString(e.key)) {\n            const num = parseInt(e.key);\n            let moveToNext = false;\n            updateSegment('minute', (prev) => {\n                const maxStart = Math.floor(max / 10);\n                /**\n                 * If the user has left the segment, we want to reset the\n                 * `prev` value so that we can start the segment over again\n                 * when the user types a number.\n                 */\n                if (states.minute.hasLeftFocus) {\n                    prev = null;\n                    states.minute.hasLeftFocus = false;\n                }\n                if (prev === null) {\n                    /**\n                     * If the user types a 0 as the first number, we want\n                     * to keep track of that so that when they type the next\n                     * number, we can move to the next segment.\n                     */\n                    if (num === 0) {\n                        states.minute.lastKeyZero = true;\n                        announcer.announce(null);\n                        return null;\n                    }\n                    /**\n                     * If the last key was a 0, or if the first number is\n                     * greater than the max start digit, then we want to move\n                     * to the next segment, since it's not possible to continue\n                     * typing a valid number in this segment.\n                     */\n                    if (states.minute.lastKeyZero || num > maxStart) {\n                        moveToNext = true;\n                    }\n                    states.minute.lastKeyZero = false;\n                    announcer.announce(num);\n                    /**\n                     * If none of the above conditions are met, then we can just\n                     * return the number as the segment value and continue typing\n                     * in this segment.\n                     */\n                    return num;\n                }\n                const digits = prev.toString().length;\n                const total = parseInt(prev.toString() + num.toString());\n                /**\n                 * If the number of digits is 2, or if the total with the existing digit\n                 * and the pressed digit is greater than the maximum value, then we will\n                 * reset the segment as if the user had pressed the backspace key and then\n                 * typed a number.\n                 */\n                if (digits === 2 || total > max) {\n                    /**\n                     * As we're doing elsewhere, we're checking if the number is greater\n                     * than the max start digit, and if so, we're moving to the next segment.\n                     */\n                    if (num > maxStart) {\n                        moveToNext = true;\n                    }\n                    announcer.announce(num);\n                    return num;\n                }\n                moveToNext = true;\n                announcer.announce(total);\n                return total;\n            });\n            if (moveToNext) {\n                moveToNextSegment(e, $fieldId);\n            }\n        }\n        if (e.key === kbd.BACKSPACE) {\n            states.minute.hasLeftFocus = false;\n            updateSegment('minute', (prev) => {\n                if (prev === null) {\n                    announcer.announce('Empty');\n                    return null;\n                }\n                const str = prev.toString();\n                if (str.length === 1) {\n                    announcer.announce('Empty');\n                    return null;\n                }\n                const next = parseInt(str.slice(0, -1));\n                announcer.announce(next);\n                return next;\n            });\n        }\n        if (isSegmentNavigationKey(e.key)) {\n            handleSegmentNavigation(e, $fieldId);\n        }\n    }\n    /*\n     * -----------------------------------------------------\n     *\n     * SECOND SEGMENT\n     *\n     * -----------------------------------------------------\n     */\n    function secondSegmentAttrs(props) {\n        const { segmentValues, placeholder, ids } = props;\n        if (!('second' in segmentValues) || !('second' in placeholder))\n            return {};\n        const isEmpty = segmentValues.second === null;\n        const date = segmentValues.second\n            ? placeholder.set({ second: segmentValues.second })\n            : placeholder;\n        const valueNow = date.second;\n        const valueMin = 0;\n        const valueMax = 59;\n        const valueText = isEmpty ? 'Empty' : `${valueNow}`;\n        return {\n            ...defaultSegmentAttrs,\n            id: ids.second,\n            'aria-label': 'second, ',\n            'aria-valuemin': valueMin,\n            'aria-valuemax': valueMax,\n            'aria-valuenow': valueNow,\n            'aria-valuetext': valueText,\n        };\n    }\n    function secondSegmentAction(node) {\n        const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => handleSegmentKeydown(e, 'second')), addMeltEventListener(node, 'focusout', () => (states.second.hasLeftFocus = true)), addMeltEventListener(node, 'click', handleSegmentClick));\n        return {\n            destroy() {\n                unsubEvents();\n            },\n        };\n    }\n    function handleSecondSegmentKeydown(e) {\n        const dateRef = get(placeholder);\n        if (!isAcceptableSegmentKey(e.key)) {\n            return;\n        }\n        states.second.hasTouched = true;\n        const min = 0;\n        const max = 59;\n        if (!('second' in dateRef))\n            return;\n        if (e.key === kbd.ARROW_UP) {\n            updateSegment('second', (prev) => {\n                if (prev === null) {\n                    announcer.announce(min);\n                    return min;\n                }\n                const next = dateRef.set({ second: prev }).cycle('second', 1).second;\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        if (e.key === kbd.ARROW_DOWN) {\n            updateSegment('second', (prev) => {\n                if (prev === null) {\n                    announcer.announce(max);\n                    return max;\n                }\n                const next = dateRef.set({ second: prev }).cycle('second', -1).second;\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        const $fieldId = get(ids.field);\n        if (isNumberString(e.key)) {\n            const num = parseInt(e.key);\n            let moveToNext = false;\n            updateSegment('second', (prev) => {\n                const maxStart = Math.floor(max / 10);\n                /**\n                 * If the user has left the segment, we want to reset the\n                 * `prev` value so that we can start the segment over again\n                 * when the user types a number.\n                 */\n                if (states.second.hasLeftFocus) {\n                    prev = null;\n                    states.second.hasLeftFocus = false;\n                }\n                if (prev === null) {\n                    /**\n                     * If the user types a 0 as the first number, we want\n                     * to keep track of that so that when they type the next\n                     * number, we can move to the next segment.\n                     */\n                    if (num === 0) {\n                        states.second.lastKeyZero = true;\n                        announcer.announce(null);\n                        return null;\n                    }\n                    /**\n                     * If the last key was a 0, or if the first number is\n                     * greater than the max start digit, then we want to move\n                     * to the next segment, since it's not possible to continue\n                     * typing a valid number in this segment.\n                     */\n                    if (states.second.lastKeyZero || num > maxStart) {\n                        moveToNext = true;\n                    }\n                    states.second.lastKeyZero = false;\n                    /**\n                     * If none of the above conditions are met, then we can just\n                     * return the number as the segment value and continue typing\n                     * in this segment.\n                     */\n                    announcer.announce(num);\n                    return num;\n                }\n                const digits = prev.toString().length;\n                const total = parseInt(prev.toString() + num.toString());\n                /**\n                 * If the number of digits is 2, or if the total with the existing digit\n                 * and the pressed digit is greater than the maximum value, then we will\n                 * reset the segment as if the user had pressed the backspace key and then\n                 * typed a number.\n                 */\n                if (digits === 2 || total > max) {\n                    /**\n                     * As we're doing elsewhere, we're checking if the number is greater\n                     * than the max start digit, and if so, we're moving to the next segment.\n                     */\n                    if (num > maxStart) {\n                        moveToNext = true;\n                    }\n                    announcer.announce(num);\n                    return num;\n                }\n                moveToNext = true;\n                announcer.announce(total);\n                return total;\n            });\n            if (moveToNext) {\n                moveToNextSegment(e, $fieldId);\n            }\n        }\n        if (e.key === kbd.BACKSPACE) {\n            states.second.hasLeftFocus = false;\n            updateSegment('second', (prev) => {\n                if (prev === null) {\n                    announcer.announce(null);\n                    return null;\n                }\n                const str = prev.toString();\n                if (str.length === 1) {\n                    announcer.announce(null);\n                    return null;\n                }\n                const next = parseInt(str.slice(0, -1));\n                announcer.announce(next);\n                return next;\n            });\n        }\n        if (isSegmentNavigationKey(e.key)) {\n            handleSegmentNavigation(e, $fieldId);\n        }\n    }\n    /*\n     * -----------------------------------------------------\n     *\n     * DAY PERIOD SEGMENT\n     *\n     * -----------------------------------------------------\n     */\n    function dayPeriodSegmentAttrs(props) {\n        const { segmentValues, ids } = props;\n        if (!('dayPeriod' in segmentValues))\n            return {};\n        const valueMin = 0;\n        const valueMax = 12;\n        const valueNow = segmentValues.dayPeriod ?? 0;\n        const valueText = segmentValues.dayPeriod ?? 'AM';\n        return {\n            ...defaultSegmentAttrs,\n            inputmode: 'text',\n            id: ids.dayPeriod,\n            'aria-label': 'AM/PM',\n            'aria-valuemin': valueMin,\n            'aria-valuemax': valueMax,\n            'aria-valuenow': valueNow,\n            'aria-valuetext': valueText,\n        };\n    }\n    function dayPeriodSegmentAction(node) {\n        const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => handleSegmentKeydown(e, 'dayPeriod')), addMeltEventListener(node, 'click', handleSegmentClick));\n        return {\n            destroy() {\n                unsubEvents();\n            },\n        };\n    }\n    /**\n     * The event handler responsible for handling keydown events\n     * on the minute segment.\n     */\n    function handleDayPeriodSegmentKeydown(e) {\n        if (!isAcceptableSegmentKey(e.key) && e.key !== kbd.A && e.key !== kbd.P) {\n            return;\n        }\n        if (e.key === kbd.ARROW_UP || e.key === kbd.ARROW_DOWN) {\n            updateSegment('dayPeriod', (prev) => {\n                if (prev === 'AM') {\n                    const next = 'PM';\n                    announcer.announce(next);\n                    return next;\n                }\n                const next = 'AM';\n                announcer.announce(next);\n                return next;\n            });\n            return;\n        }\n        if (e.key === kbd.BACKSPACE) {\n            states.second.hasLeftFocus = false;\n            updateSegment('dayPeriod', () => {\n                const next = 'AM';\n                announcer.announce(next);\n                return 'AM';\n            });\n        }\n        if (e.key === 'a') {\n            updateSegment('dayPeriod', () => {\n                const next = 'AM';\n                announcer.announce(next);\n                return 'AM';\n            });\n        }\n        if (e.key === 'p') {\n            updateSegment('dayPeriod', () => {\n                const next = 'PM';\n                announcer.announce(next);\n                return 'PM';\n            });\n        }\n        if (isSegmentNavigationKey(e.key)) {\n            handleSegmentNavigation(e, get(ids.field));\n        }\n    }\n    /*\n     * -----------------------------------------------------\n     *\n     * LITERAL SEGMENT\n     *\n     * -----------------------------------------------------\n     */\n    function literalSegmentAttrs(_) {\n        return {\n            'aria-hidden': true,\n            'data-segment': 'literal',\n        };\n    }\n    function literalSegmentAction(_) {\n        return {\n            destroy: noop,\n        };\n    }\n    /*\n     * -----------------------------------------------------\n     *\n     * TIMEZONE SEGMENT\n     *\n     * -----------------------------------------------------\n     */\n    function timeZoneSegmentAttrs(_) {\n        return {\n            role: 'textbox',\n            'aria-label': 'timezone, ',\n            'data-readonly': true,\n            'data-segment': 'timeZoneName',\n            tabindex: 0,\n            style: styleToString({\n                'caret-color': 'transparent',\n            }),\n        };\n    }\n    function timeZoneSegmentAction(node) {\n        const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => handleSegmentKeydown(e, 'timeZoneName')), addMeltEventListener(node, 'click', handleSegmentClick));\n        return {\n            destroy() {\n                unsubEvents();\n            },\n        };\n    }\n    function handleTimeZoneSegmentKeydown(e) {\n        if (isSegmentNavigationKey(e.key)) {\n            handleSegmentNavigation(e, get(ids.field));\n        }\n    }\n    function getSegmentAttrs(part, props) {\n        return segmentBuilders[part]?.attrs(props);\n    }\n    function getSegmentAction(node) {\n        const part = getPartFromNode(node);\n        if (!part) {\n            throw new Error('No segment part found');\n        }\n        return segmentBuilders[part].action(node);\n    }\n    /**\n     * Gets the `aria-labelledby` value for a given segment part.\n     */\n    function getLabelledBy(part) {\n        return `${get(ids[part])} ${get(ids.label)}`;\n    }\n    /**\n     * Keeping the locale used in the formatter in sync\n     * with the locale option store.\n     */\n    effect(locale, ($locale) => {\n        if (formatter.getLocale() === $locale)\n            return;\n        formatter.setLocale($locale);\n    });\n    effect(value, ($value) => {\n        if ($value) {\n            // Set the description of the field for screen readers\n            setDescription(get(ids.description), formatter, $value);\n        }\n        if ($value && get(placeholder) !== $value) {\n            placeholder.set($value);\n        }\n    });\n    effect([value, locale], ([$value, _]) => {\n        // using `locale` as a dep so that we can reconvert\n        // when using a different hour cycle\n        if ($value) {\n            syncSegmentValues({\n                value: $value,\n                segmentValues,\n                formatter,\n                updatingDayPeriod,\n            });\n        }\n        else {\n            segmentValues.set(structuredClone(initialSegments));\n        }\n    });\n    const _isDateUnavailable = derived(isDateUnavailable, ($isDateUnavailable) => {\n        return (date) => $isDateUnavailable?.(date);\n    });\n    return {\n        elements: {\n            field,\n            segment,\n            label,\n            hiddenInput,\n            validation,\n        },\n        states: {\n            value,\n            segmentValues,\n            segmentContents,\n            segmentContentsObj,\n            placeholder: placeholder.toWritable(),\n            isInvalid,\n        },\n        helpers: {\n            isDateUnavailable: _isDateUnavailable,\n        },\n        options,\n        ids,\n    };\n}\n", "import { isHTMLElement } from '../index.js';\nexport function pickerOpenFocus(defaultEl) {\n    const el = document.querySelector('[data-melt-calendar-cell][data-focused]');\n    if (isHTMLElement(el)) {\n        return el;\n    }\n    if (isHTMLElement(defaultEl)) {\n        return defaultEl;\n    }\n    return null;\n}\n", "import { effect, toWritableStores, omit, builder, addMeltEventListener, } from '../../internal/helpers/index.js';\nimport { get } from 'svelte/store';\nimport { createCalendar, createDateField, createPopover } from '../index.js';\nimport { handleSegmentNavigation, isSegmentNavigationKey, } from '../../internal/helpers/date/index.js';\nimport { dateStore, createFormatter, getDefaultDate } from '../../internal/helpers/date/index.js';\nimport { pickerOpenFocus } from '../../internal/helpers/date/focus.js';\nconst defaults = {\n    isDateDisabled: undefined,\n    isDateUnavailable: undefined,\n    value: undefined,\n    positioning: {\n        placement: 'bottom',\n    },\n    closeOnEscape: true,\n    closeOnOutsideClick: true,\n    preventScroll: false,\n    forceVisible: false,\n    locale: 'en',\n    granularity: undefined,\n    disabled: false,\n    readonly: false,\n    minValue: undefined,\n    maxValue: undefined,\n    weekdayFormat: 'narrow',\n};\nexport function createDatePicker(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'value', 'placeholder'));\n    const dateField = createDateField({\n        ...withDefaults,\n        ids: withDefaults.dateFieldIds,\n    });\n    const { states: { value, placeholder: dfPlaceholder }, } = dateField;\n    const calendar = createCalendar({\n        ...omit(withDefaults, 'onValueChange'),\n        placeholder: dfPlaceholder,\n        value: value,\n        ids: withDefaults.calendarIds,\n    });\n    const popover = createPopover({\n        positioning: withDefaults.positioning,\n        arrowSize: withDefaults.arrowSize,\n        defaultOpen: withDefaults.defaultOpen,\n        open: withDefaults.open,\n        disableFocusTrap: withDefaults.disableFocusTrap,\n        closeOnEscape: withDefaults.closeOnEscape,\n        preventScroll: withDefaults.preventScroll,\n        onOpenChange: withDefaults.onOpenChange,\n        closeOnOutsideClick: withDefaults.closeOnOutsideClick,\n        portal: withDefaults.portal,\n        forceVisible: withDefaults.forceVisible,\n        openFocus: pickerOpenFocus,\n        ids: withDefaults.popoverIds,\n    });\n    const trigger = builder('popover-trigger', {\n        stores: [popover.elements.trigger],\n        returned: ([$trigger]) => {\n            return {\n                ...omit($trigger, 'action'),\n                'aria-label': 'Open date picker',\n                'data-segment': 'trigger',\n            };\n        },\n        action: (node) => {\n            const unsubKeydown = addMeltEventListener(node, 'keydown', handleTriggerKeydown);\n            const { destroy } = popover.elements.trigger(node);\n            return {\n                destroy() {\n                    destroy?.();\n                    unsubKeydown();\n                },\n            };\n        },\n    });\n    const formatter = createFormatter(get(options.locale));\n    effect([options.locale], ([$locale]) => {\n        dateField.options.locale.set($locale);\n        calendar.options.locale.set($locale);\n        if (formatter.getLocale() === $locale)\n            return;\n        formatter.setLocale($locale);\n    });\n    effect([options.weekdayFormat], ([$weekdayFormat]) => {\n        calendar.options.weekdayFormat.set($weekdayFormat);\n    });\n    effect([options.disabled], ([$disabled]) => {\n        dateField.options.disabled.set($disabled);\n        calendar.options.disabled.set($disabled);\n    });\n    effect([options.readonly], ([$readonly]) => {\n        dateField.options.readonly.set($readonly);\n        calendar.options.readonly.set($readonly);\n    });\n    effect([options.minValue], ([$minValue]) => {\n        dateField.options.minValue.set($minValue);\n        calendar.options.minValue.set($minValue);\n    });\n    effect([options.maxValue], ([$maxValue]) => {\n        dateField.options.maxValue.set($maxValue);\n        calendar.options.maxValue.set($maxValue);\n    });\n    const dateFieldOptions = omit(dateField.options, 'locale', 'disabled', 'readonly', 'minValue', 'maxValue');\n    const calendarOptions = omit(calendar.options, 'locale', 'disabled', 'readonly', 'minValue', 'maxValue');\n    const { states: { open }, } = popover;\n    const defaultDate = getDefaultDate({\n        defaultPlaceholder: withDefaults.defaultPlaceholder,\n        defaultValue: withDefaults.defaultValue,\n        granularity: withDefaults.granularity,\n    });\n    const placeholder = dateStore(dfPlaceholder, withDefaults.defaultPlaceholder ?? defaultDate);\n    effect([open], ([$open]) => {\n        if (!$open) {\n            const $value = get(value);\n            if ($value) {\n                placeholder.set($value);\n            }\n            else {\n                placeholder.reset();\n            }\n        }\n    });\n    function handleTriggerKeydown(e) {\n        if (isSegmentNavigationKey(e.key)) {\n            e.preventDefault();\n            handleSegmentNavigation(e, get(dateField.ids.field));\n        }\n    }\n    return {\n        elements: {\n            ...calendar.elements,\n            ...dateField.elements,\n            ...popover.elements,\n            trigger,\n        },\n        states: {\n            ...dateField.states,\n            ...calendar.states,\n            placeholder: placeholder.toWritable(),\n            value,\n            ...popover.states,\n        },\n        helpers: {\n            ...calendar.helpers,\n        },\n        options: {\n            ...dateFieldOptions,\n            ...calendarOptions,\n            ...options,\n            ...popover.options,\n        },\n        ids: {\n            dateField: dateField.ids,\n            calendar: calendar.ids,\n            popover: popover.ids,\n        },\n    };\n}\n", "import { isBrowser } from '../../../internal/helpers/index.js';\nexport function removeDescriptionElement(id) {\n    if (!isBrowser)\n        return;\n    const el = document.getElementById(id);\n    if (!el)\n        return;\n    document.body.removeChild(el);\n}\n", "import { builder, createElHelpers, overridable, toWritableStores, omit, effect, styleToString, executeCallbacks, addMeltEventListener, sleep, } from '../../internal/helpers/index.js';\nimport { dateStore, getDefaultDate, getAnnouncer, isBefore, areAllDaysBetweenValid, getFirstSegment, } from '../../internal/helpers/date/index.js';\nimport { derived, get, writable } from 'svelte/store';\nimport { removeDescriptionElement } from './_internal/helpers.js';\nimport { createDateField } from '../../index.js';\nimport { generateIds } from '../../internal/helpers/id';\nconst defaults = {\n    isDateUnavailable: undefined,\n    value: undefined,\n    hourCycle: undefined,\n    locale: 'en',\n    granularity: undefined,\n    hideTimeZone: false,\n    defaultValue: {\n        start: undefined,\n        end: undefined,\n    },\n    startName: undefined,\n    endName: undefined,\n    disabled: false,\n    readonly: false,\n    minValue: undefined,\n    maxValue: undefined,\n};\nconst { name } = createElHelpers('dateField');\nconst rangeFieldIdParts = ['field', 'label', 'description', 'validation'];\nexport function createDateRangeField(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'value', 'placeholder'));\n    const generatedIds = generateIds(rangeFieldIdParts);\n    const ids = toWritableStores({ ...generatedIds, ...withDefaults.ids });\n    const defaultDate = getDefaultDate({\n        defaultValue: withDefaults.defaultValue?.start,\n        defaultPlaceholder: withDefaults.defaultPlaceholder,\n        granularity: withDefaults.granularity,\n    });\n    const valueWritable = withDefaults.value ?? writable(withDefaults.defaultValue);\n    const value = overridable(valueWritable, withDefaults.onValueChange);\n    const defaultStart = withDefaults.value ? get(withDefaults.value)?.start : undefined;\n    const startValue = writable(defaultStart ?? withDefaults.defaultValue?.start);\n    const defaultEnd = withDefaults.value ? get(withDefaults.value)?.end : undefined;\n    const endValue = writable(defaultEnd ?? withDefaults.defaultValue?.end);\n    const isCompleted = derived(value, ($value) => {\n        return $value?.start && $value?.end;\n    });\n    const placeholderWritable = withDefaults.placeholder ?? writable(withDefaults.defaultPlaceholder ?? defaultDate);\n    const placeholder = dateStore(overridable(placeholderWritable, withDefaults.onPlaceholderChange), withDefaults.defaultPlaceholder ?? defaultDate);\n    const startField = createDateField({\n        ...omit(withDefaults, 'defaultValue', 'onValueChange', 'startName', 'endName'),\n        value: startValue,\n        name: withDefaults.startName,\n        ids: {\n            ...generatedIds,\n            ...withDefaults.ids,\n            ...withDefaults.startIds,\n        },\n    });\n    const endField = createDateField({\n        ...omit(withDefaults, 'defaultValue', 'onValueChange', 'endName', 'startName'),\n        value: endValue,\n        name: withDefaults.endName,\n        ids: {\n            ...generatedIds,\n            ...withDefaults.ids,\n            ...withDefaults.endIds,\n        },\n    });\n    const { elements: { segment: startSegment, hiddenInput: startHiddenInput }, states: { isInvalid: isStartInvalid, segmentContents: startSegmentContents, segmentValues: startSegmentValues, }, options: { name: startName }, } = startField;\n    const { elements: { segment: endSegment, hiddenInput: endHiddenInput }, states: { isInvalid: isEndInvalid, segmentContents: endSegmentContents, segmentValues: endSegmentValues, }, options: { name: endName }, } = endField;\n    const isInvalid = derived([value, isStartInvalid, isEndInvalid, options.isDateUnavailable], ([$value, $isStartInvalid, $isEndInvalid, $isDateUnavailable]) => {\n        if ($isStartInvalid || $isEndInvalid) {\n            return true;\n        }\n        if (!$value?.start || !$value?.end) {\n            return false;\n        }\n        if (!isBefore($value?.start, $value?.end)) {\n            return true;\n        }\n        if ($isDateUnavailable !== undefined) {\n            const allValid = areAllDaysBetweenValid($value?.start, $value?.end, $isDateUnavailable, undefined);\n            if (!allValid) {\n                return true;\n            }\n        }\n        return false;\n    });\n    const label = builder(name('label'), {\n        stores: [isInvalid, options.disabled, ids.label],\n        returned: ([$isInvalid, $disabled, $labelId]) => {\n            return {\n                id: $labelId,\n                'data-invalid': $isInvalid ? '' : undefined,\n                'data-disabled': $disabled ? '' : undefined,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                const firstSegment = getFirstSegment(get(ids.field));\n                if (!firstSegment)\n                    return;\n                sleep(1).then(() => firstSegment.focus());\n            }), addMeltEventListener(node, 'mousedown', (e) => {\n                if (!e.defaultPrevented && e.detail > 1) {\n                    e.preventDefault();\n                }\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const fieldIdDeps = derived([ids.field, ids.label, ids.description, ids.validation], ([$fieldId, $labelId, $descriptionId, $validationId]) => {\n        return {\n            field: $fieldId,\n            label: $labelId,\n            description: $descriptionId,\n            validation: $validationId,\n        };\n    });\n    const field = builder(name('field'), {\n        stores: [isCompleted, isInvalid, fieldIdDeps],\n        returned: ([$isCompleted, $isInvalid, $ids]) => {\n            const describedBy = $isCompleted\n                ? `${$ids.description}${$isInvalid ? ` ${$ids.validation}` : ''}`\n                : `${$ids.description}`;\n            return {\n                role: 'group',\n                id: $ids.field,\n                'aria-labelledby': $ids.label,\n                'aria-describedby': describedBy,\n                'data-invalid': $isInvalid ? '' : undefined,\n            };\n        },\n        action: () => {\n            getAnnouncer();\n            return {\n                destroy() {\n                    removeDescriptionElement(get(ids.description));\n                },\n            };\n        },\n    });\n    const validation = builder(name('validation'), {\n        stores: [isInvalid, ids.validation],\n        returned: ([$isInvalid, $validationId]) => {\n            const validStyle = styleToString({\n                display: 'none',\n            });\n            return {\n                id: $validationId,\n                'data-invalid': $isInvalid ? '' : undefined,\n                style: $isInvalid ? undefined : validStyle,\n            };\n        },\n    });\n    /**\n     * Combine the `startSegmentContents` and `endSegmentContents` stores\n     * into a single store that can be used to render the contents of the\n     * date range field.\n     *\n     * Since contents are generated automatically based on the locale\n     * and granularity props, this is not a writable store. If you wish\n     * to control the contents of the field, you should use the\n     * `startSegmentValues` and `endSegmentValues` stores returned\n     * from this builder instead.\n     */\n    const segmentContents = derived([startSegmentContents, endSegmentContents], ([$startSegmentContents, $endSegmentContents]) => {\n        return {\n            start: $startSegmentContents,\n            end: $endSegmentContents,\n        };\n    });\n    /**\n     * Synchronize the `value` store with the individual `startValue`\n     * and `endValue` stores that are used by the individual date fields.\n     *\n     * We only want to update the `value` store when both the `startValue`\n     * and `endValue` stores are not `undefined`. This is because the\n     * `value` store is used to determine if the date field is completed,\n     * and we don't want to mark the date field as completed until both\n     * the start and end dates have been selected.\n     */\n    effect([value], ([$value]) => {\n        const $startValue = get(startValue);\n        const $endValue = get(endValue);\n        if ($value?.start && $value?.end) {\n            if ($value.start !== $startValue) {\n                startValue.set($value.start);\n            }\n            if ($value.end !== $endValue) {\n                endValue.set($value.end);\n            }\n            return;\n        }\n    });\n    effect([startValue, endValue], ([$startValue, $endValue]) => {\n        const $value = get(value);\n        if ($value && $value?.start === $startValue && $value?.end === $endValue)\n            return;\n        if ($startValue && $endValue) {\n            value.update((prev) => {\n                if (prev?.start === $startValue && prev?.end === $endValue) {\n                    return prev;\n                }\n                return {\n                    start: $startValue,\n                    end: $endValue,\n                };\n            });\n        }\n        else if ($value && $value?.start && $value?.end) {\n            value.set({\n                start: undefined,\n                end: undefined,\n            });\n        }\n    });\n    effect([options.disabled], ([$disabled]) => {\n        startField.options.disabled.set($disabled);\n        endField.options.disabled.set($disabled);\n    });\n    effect([options.readonly], ([$readonly]) => {\n        startField.options.readonly.set($readonly);\n        endField.options.readonly.set($readonly);\n    });\n    effect([options.minValue], ([$minValue]) => {\n        startField.options.minValue.set($minValue);\n        endField.options.minValue.set($minValue);\n    });\n    effect([options.maxValue], ([$maxValue]) => {\n        startField.options.maxValue.set($maxValue);\n        endField.options.maxValue.set($maxValue);\n    });\n    effect([options.granularity], ([$granularity]) => {\n        startField.options.granularity.set($granularity);\n        endField.options.granularity.set($granularity);\n    });\n    effect([options.hideTimeZone], ([$hideTimeZone]) => {\n        startField.options.hideTimeZone.set($hideTimeZone);\n        endField.options.hideTimeZone.set($hideTimeZone);\n    });\n    effect([options.hourCycle], ([$hourCycle]) => {\n        startField.options.hourCycle.set($hourCycle);\n        endField.options.hourCycle.set($hourCycle);\n    });\n    effect([options.locale], ([$locale]) => {\n        startField.options.locale.set($locale);\n        endField.options.locale.set($locale);\n    });\n    return {\n        elements: {\n            field,\n            label,\n            startSegment,\n            endSegment,\n            startHiddenInput,\n            endHiddenInput,\n            validation,\n        },\n        states: {\n            value,\n            placeholder: placeholder.toWritable(),\n            segmentContents,\n            endSegmentValues,\n            startSegmentValues,\n            isInvalid,\n        },\n        options: {\n            ...options,\n            endName,\n            startName,\n        },\n        ids: {\n            field: ids,\n            start: startField.ids,\n            end: endField.ids,\n        },\n    };\n}\n", "import { effect, toWritableStores, omit, builder, addMeltEventListener, } from '../../internal/helpers/index.js';\nimport { get } from 'svelte/store';\nimport { createRangeCalendar, createPopover } from '../index.js';\nimport { handleSegmentNavigation, isSegmentNavigationKey, } from '../../internal/helpers/date/index.js';\nimport { dateStore, createFormatter, getDefaultDate } from '../../internal/helpers/date/index.js';\nimport { createDateRangeField } from '../date-range-field/create.js';\nimport { pickerOpenFocus } from '../../internal/helpers/date/focus.js';\nconst defaults = {\n    isDateDisabled: undefined,\n    isDateUnavailable: undefined,\n    value: undefined,\n    positioning: {\n        placement: 'bottom',\n    },\n    closeOnEscape: true,\n    closeOnOutsideClick: true,\n    preventScroll: false,\n    forceVisible: false,\n    locale: 'en',\n    granularity: undefined,\n    disabled: false,\n    readonly: false,\n    minValue: undefined,\n    maxValue: undefined,\n    weekdayFormat: 'narrow',\n};\nexport function createDateRangePicker(props) {\n    const withDefaults = { ...defaults, ...props };\n    const rangeField = createDateRangeField(withDefaults);\n    const { states: { value, placeholder: rfPlaceholder }, } = rangeField;\n    const calendar = createRangeCalendar({\n        ...omit(withDefaults, 'onValueChange'),\n        placeholder: rfPlaceholder,\n        value: value,\n        ids: withDefaults.calendarIds,\n    });\n    const popover = createPopover({\n        positioning: withDefaults.positioning,\n        arrowSize: withDefaults.arrowSize,\n        defaultOpen: withDefaults.defaultOpen,\n        open: withDefaults.open,\n        disableFocusTrap: withDefaults.disableFocusTrap,\n        closeOnEscape: withDefaults.closeOnEscape,\n        preventScroll: withDefaults.preventScroll,\n        onOpenChange: withDefaults.onOpenChange,\n        closeOnOutsideClick: withDefaults.closeOnOutsideClick,\n        portal: withDefaults.portal,\n        forceVisible: withDefaults.forceVisible,\n        openFocus: pickerOpenFocus,\n    });\n    const options = toWritableStores({\n        ...omit(withDefaults, 'value', 'placeholder'),\n    });\n    const { locale } = options;\n    const defaultDate = getDefaultDate({\n        defaultValue: withDefaults.defaultValue?.start,\n        defaultPlaceholder: withDefaults.defaultPlaceholder,\n        granularity: withDefaults.granularity,\n    });\n    const formatter = createFormatter(get(locale));\n    const placeholder = dateStore(rfPlaceholder, withDefaults.defaultPlaceholder ?? defaultDate);\n    const trigger = builder('popover-trigger', {\n        stores: [popover.elements.trigger],\n        returned: ([$trigger]) => {\n            return {\n                ...omit($trigger, 'action'),\n                'aria-label': 'Open date picker',\n                'data-segment': 'trigger',\n            };\n        },\n        action: (node) => {\n            const unsubKeydown = addMeltEventListener(node, 'keydown', handleTriggerKeydown);\n            const { destroy } = popover.elements.trigger(node);\n            return {\n                destroy() {\n                    destroy?.();\n                    unsubKeydown();\n                },\n            };\n        },\n    });\n    effect([options.locale], ([$locale]) => {\n        rangeField.options.locale.set($locale);\n        calendar.options.locale.set($locale);\n        if (formatter.getLocale() === $locale)\n            return;\n        formatter.setLocale($locale);\n    });\n    effect([options.weekdayFormat], ([$weekdayFormat]) => {\n        calendar.options.weekdayFormat.set($weekdayFormat);\n    });\n    effect([options.disabled], ([$disabled]) => {\n        rangeField.options.disabled.set($disabled);\n        calendar.options.disabled.set($disabled);\n    });\n    effect([options.readonly], ([$readonly]) => {\n        rangeField.options.readonly.set($readonly);\n        calendar.options.readonly.set($readonly);\n    });\n    effect([options.minValue], ([$minValue]) => {\n        rangeField.options.minValue.set($minValue);\n        calendar.options.minValue.set($minValue);\n    });\n    effect([options.maxValue], ([$maxValue]) => {\n        rangeField.options.maxValue.set($maxValue);\n        calendar.options.maxValue.set($maxValue);\n    });\n    effect([popover.states.open], ([$open]) => {\n        if (!$open) {\n            const $value = get(value);\n            if ($value?.start) {\n                placeholder.set($value.start);\n            }\n            else {\n                placeholder.reset();\n            }\n        }\n    });\n    const rangeFieldOptions = omit(rangeField.options, 'locale', 'disabled', 'readonly', 'minValue', 'maxValue');\n    const rangeCalendarOptions = omit(calendar.options, 'locale', 'disabled', 'readonly', 'minValue', 'maxValue');\n    function handleTriggerKeydown(e) {\n        if (isSegmentNavigationKey(e.key)) {\n            e.preventDefault();\n            handleSegmentNavigation(e, get(rangeField.ids.field.field));\n        }\n    }\n    return {\n        elements: {\n            ...calendar.elements,\n            ...rangeField.elements,\n            ...popover.elements,\n            trigger,\n        },\n        states: {\n            ...rangeField.states,\n            ...calendar.states,\n            placeholder: placeholder.toWritable(),\n            value,\n            ...popover.states,\n        },\n        helpers: {\n            ...calendar.helpers,\n        },\n        options: {\n            ...rangeFieldOptions,\n            ...rangeCalendarOptions,\n            ...options,\n            ...popover.options,\n        },\n        ids: {\n            rangeField: rangeField.ids,\n            calendar: calendar.ids,\n            popover: popover.ids,\n        },\n    };\n}\n", "import { createFocusTrap, useClickOutside, useEscapeKeydown, usePortal, } from '../../internal/actions/index.js';\nimport { addMeltEventListener, builder, createElHelpers, effect, executeCallbacks, generateIds, getPortalDestination, handleFocus, isBrowser, isHTMLElement, kbd, last, noop, overridable, removeScroll, sleep, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { tick } from 'svelte';\nimport { derived, get, writable } from 'svelte/store';\nimport { omit } from '../../internal/helpers/object';\nconst { name } = createElHelpers('dialog');\nconst defaults = {\n    preventScroll: true,\n    closeOnEscape: true,\n    closeOnOutsideClick: true,\n    role: 'dialog',\n    defaultOpen: false,\n    portal: 'body',\n    forceVisible: false,\n    openFocus: undefined,\n    closeFocus: undefined,\n};\nconst openDialogIds = writable([]);\nexport const dialogIdParts = ['content', 'title', 'description'];\nexport function createDialog(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'ids'));\n    const { preventScroll, closeOnEscape, closeOnOutsideClick, role, portal, forceVisible, openFocus, closeFocus, } = options;\n    const activeTrigger = writable(null);\n    const ids = toWritableStores({\n        ...generateIds(dialogIdParts),\n        ...withDefaults.ids,\n    });\n    const openWritable = withDefaults.open ?? writable(withDefaults.defaultOpen);\n    const open = overridable(openWritable, withDefaults?.onOpenChange);\n    const isVisible = derived([open, forceVisible], ([$open, $forceVisible]) => {\n        return $open || $forceVisible;\n    });\n    let unsubScroll = noop;\n    function handleOpen(e) {\n        const el = e.currentTarget;\n        const triggerEl = e.currentTarget;\n        if (!isHTMLElement(el) || !isHTMLElement(triggerEl))\n            return;\n        open.set(true);\n        activeTrigger.set(triggerEl);\n    }\n    function handleClose() {\n        open.set(false);\n        handleFocus({\n            prop: get(closeFocus),\n            defaultEl: get(activeTrigger),\n        });\n    }\n    effect([open], ([$open]) => {\n        // Prevent double clicks from closing multiple dialogs\n        sleep(100).then(() => {\n            if ($open) {\n                openDialogIds.update((prev) => {\n                    prev.push(get(ids.content));\n                    return prev;\n                });\n            }\n            else {\n                openDialogIds.update((prev) => prev.filter((id) => id !== get(ids.content)));\n            }\n        });\n    });\n    const trigger = builder(name('trigger'), {\n        stores: [open],\n        returned: ([$open]) => {\n            return {\n                'aria-haspopup': 'dialog',\n                'aria-expanded': $open,\n                type: 'button',\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', (e) => {\n                handleOpen(e);\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                if (e.key !== kbd.ENTER && e.key !== kbd.SPACE)\n                    return;\n                e.preventDefault();\n                handleOpen(e);\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const overlay = builder(name('overlay'), {\n        stores: [isVisible],\n        returned: ([$isVisible]) => {\n            return {\n                hidden: $isVisible ? undefined : true,\n                tabindex: -1,\n                style: styleToString({\n                    display: $isVisible ? undefined : 'none',\n                }),\n                'aria-hidden': true,\n                'data-state': $isVisible ? 'open' : 'closed',\n            };\n        },\n        action: (node) => {\n            let unsubEscapeKeydown = noop;\n            if (get(closeOnEscape)) {\n                const escapeKeydown = useEscapeKeydown(node, {\n                    handler: () => {\n                        handleClose();\n                    },\n                });\n                if (escapeKeydown && escapeKeydown.destroy) {\n                    unsubEscapeKeydown = escapeKeydown.destroy;\n                }\n            }\n            return {\n                destroy() {\n                    unsubEscapeKeydown();\n                },\n            };\n        },\n    });\n    const content = builder(name('content'), {\n        stores: [isVisible, ids.content, ids.description, ids.title],\n        returned: ([$isVisible, $contentId, $descriptionId, $titleId]) => {\n            return {\n                id: $contentId,\n                role: get(role),\n                'aria-describedby': $descriptionId,\n                'aria-labelledby': $titleId,\n                'aria-modal': $isVisible ? 'true' : undefined,\n                'data-state': $isVisible ? 'open' : 'closed',\n                tabindex: -1,\n                hidden: $isVisible ? undefined : true,\n                style: styleToString({\n                    display: $isVisible ? undefined : 'none',\n                }),\n            };\n        },\n        action: (node) => {\n            let activate = noop;\n            let deactivate = noop;\n            const destroy = executeCallbacks(effect([open], ([$open]) => {\n                if (!$open)\n                    return;\n                const focusTrap = createFocusTrap({\n                    immediate: false,\n                    escapeDeactivates: true,\n                    clickOutsideDeactivates: true,\n                    returnFocusOnDeactivate: false,\n                    fallbackFocus: node,\n                });\n                activate = focusTrap.activate;\n                deactivate = focusTrap.deactivate;\n                const ac = focusTrap.useFocusTrap(node);\n                if (ac && ac.destroy) {\n                    return ac.destroy;\n                }\n                else {\n                    return focusTrap.deactivate;\n                }\n            }), effect([closeOnOutsideClick, open], ([$closeOnOutsideClick, $open]) => {\n                return useClickOutside(node, {\n                    enabled: $open,\n                    handler: (e) => {\n                        if (e.defaultPrevented)\n                            return;\n                        const $openDialogIds = get(openDialogIds);\n                        const isLast = last($openDialogIds) === get(ids.content);\n                        if ($closeOnOutsideClick && isLast) {\n                            handleClose();\n                        }\n                    },\n                }).destroy;\n            }), effect([closeOnEscape], ([$closeOnEscape]) => {\n                if (!$closeOnEscape)\n                    return noop;\n                const escapeKeydown = useEscapeKeydown(node, {\n                    handler: () => {\n                        handleClose();\n                    },\n                });\n                if (escapeKeydown && escapeKeydown.destroy) {\n                    return escapeKeydown.destroy;\n                }\n                return noop;\n            }), effect([isVisible], ([$isVisible]) => {\n                tick().then(() => {\n                    if (!$isVisible) {\n                        deactivate();\n                    }\n                    else {\n                        activate();\n                    }\n                });\n            }));\n            return {\n                destroy: () => {\n                    unsubScroll();\n                    destroy();\n                },\n            };\n        },\n    });\n    const portalled = builder(name('portalled'), {\n        stores: portal,\n        returned: ($portal) => ({\n            'data-portal': $portal ? '' : undefined,\n        }),\n        action: (node) => {\n            const unsubPortal = effect([portal], ([$portal]) => {\n                if (!$portal)\n                    return noop;\n                const portalDestination = getPortalDestination(node, $portal);\n                if (portalDestination === null)\n                    return noop;\n                const portalAction = usePortal(node, portalDestination);\n                if (portalAction && portalAction.destroy) {\n                    return portalAction.destroy;\n                }\n                else {\n                    return noop;\n                }\n            });\n            return {\n                destroy() {\n                    unsubPortal();\n                },\n            };\n        },\n    });\n    const title = builder(name('title'), {\n        stores: [ids.title],\n        returned: ([$titleId]) => ({\n            id: $titleId,\n        }),\n    });\n    const description = builder(name('description'), {\n        stores: [ids.description],\n        returned: ([$descriptionId]) => ({\n            id: $descriptionId,\n        }),\n    });\n    const close = builder(name('close'), {\n        returned: () => ({\n            type: 'button',\n        }),\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                handleClose();\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                if (e.key !== kbd.SPACE && e.key !== kbd.ENTER)\n                    return;\n                e.preventDefault();\n                handleClose();\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    effect([open, preventScroll], ([$open, $preventScroll]) => {\n        if (!isBrowser)\n            return;\n        if ($preventScroll && $open)\n            unsubScroll = removeScroll();\n        if ($open) {\n            const contentEl = document.getElementById(get(ids.content));\n            handleFocus({ prop: get(openFocus), defaultEl: contentEl });\n        }\n        return () => {\n            // we only want to remove the scroll lock if the dialog is not forced visible\n            // otherwise the scroll removal is handled in the `destroy` of the `content` builder\n            if (!get(forceVisible)) {\n                unsubScroll();\n            }\n        };\n    });\n    return {\n        ids,\n        elements: {\n            content,\n            trigger,\n            title,\n            description,\n            overlay,\n            close,\n            portalled,\n        },\n        states: {\n            open,\n        },\n        options,\n    };\n}\n", "import { overridable, toWritableStores } from '../../internal/helpers/index.js';\nimport { writable } from 'svelte/store';\nimport { createMenuBuilder } from '../menu/index.js';\nimport { omit } from '../../internal/helpers/object';\nconst defaults = {\n    arrowSize: 8,\n    positioning: {\n        placement: 'bottom',\n    },\n    preventScroll: true,\n    closeOnEscape: true,\n    closeOnOutsideClick: true,\n    portal: undefined,\n    loop: false,\n    dir: 'ltr',\n    defaultOpen: false,\n    forceVisible: false,\n    typeahead: true,\n    closeFocus: undefined,\n    disableFocusFirstItem: false,\n    closeOnItemClick: true,\n};\nexport function createDropdownMenu(props) {\n    const withDefaults = { ...defaults, ...props };\n    const rootOptions = toWritableStores(omit(withDefaults, 'ids'));\n    const openWritable = withDefaults.open ?? writable(withDefaults.defaultOpen);\n    const rootOpen = overridable(openWritable, withDefaults?.onOpenChange);\n    const rootActiveTrigger = writable(null);\n    const nextFocusable = writable(null);\n    const prevFocusable = writable(null);\n    const { trigger, menu, item, arrow, createSubmenu, createCheckboxItem, createMenuRadioGroup, separator, group, groupLabel, ids, } = createMenuBuilder({\n        rootOptions,\n        rootOpen,\n        rootActiveTrigger,\n        nextFocusable,\n        prevFocusable,\n        selector: 'dropdown-menu',\n        removeScroll: true,\n        ids: withDefaults.ids,\n    });\n    return {\n        ids,\n        elements: {\n            trigger,\n            menu,\n            item,\n            arrow,\n            separator,\n            group,\n            groupLabel,\n        },\n        states: {\n            open: rootOpen,\n        },\n        builders: {\n            createCheckboxItem,\n            createSubmenu,\n            createMenuRadioGroup,\n        },\n        options: rootOptions,\n    };\n}\n", "import { usePopper } from '../../internal/actions/index.js';\nimport { addMeltEventListener, builder, createElHelpers, derivedVisible, effect, executeCallbacks, getPortalDestination, getTabbableNodes, isBrowser, isElement, isFocusVisible, isHTMLElement, isTouch, noop, overridable, sleep, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { safeOnMount } from '../../internal/helpers/lifecycle';\nimport { derived, get, writable } from 'svelte/store';\nimport { generateIds } from '../../internal/helpers/id';\nimport { omit } from '../../internal/helpers/object';\nconst { name } = createElHelpers('hover-card');\nconst defaults = {\n    defaultOpen: false,\n    openDelay: 1000,\n    closeDelay: 100,\n    positioning: {\n        placement: 'bottom',\n    },\n    arrowSize: 8,\n    closeOnOutsideClick: true,\n    forceVisible: false,\n    portal: 'body',\n    closeOnEscape: true,\n};\nexport const linkPreviewIdParts = ['trigger', 'content'];\nexport function createLinkPreview(props = {}) {\n    const withDefaults = { ...defaults, ...props };\n    const openWritable = withDefaults.open ?? writable(withDefaults.defaultOpen);\n    const open = overridable(openWritable, withDefaults?.onOpenChange);\n    const hasSelection = writable(false);\n    const isPointerDownOnContent = writable(false);\n    const containSelection = writable(false);\n    const activeTrigger = writable(null);\n    // type OpenReason = 'pointer' | 'focus';\n    // const openReason = writable<null | OpenReason>(null);\n    const options = toWritableStores(omit(withDefaults, 'ids'));\n    const { openDelay, closeDelay, positioning, arrowSize, closeOnOutsideClick, forceVisible, portal, closeOnEscape, } = options;\n    const ids = toWritableStores({ ...generateIds(linkPreviewIdParts), ...withDefaults.ids });\n    let timeout = null;\n    let originalBodyUserSelect;\n    const handleOpen = derived(openDelay, ($openDelay) => {\n        return () => {\n            if (timeout) {\n                window.clearTimeout(timeout);\n                timeout = null;\n            }\n            timeout = window.setTimeout(() => {\n                open.set(true);\n            }, $openDelay);\n        };\n    });\n    const handleClose = derived([closeDelay, isPointerDownOnContent, hasSelection], ([$closeDelay, $isPointerDownOnContent, $hasSelection]) => {\n        return () => {\n            if (timeout) {\n                window.clearTimeout(timeout);\n                timeout = null;\n            }\n            if (!$isPointerDownOnContent && !$hasSelection) {\n                timeout = window.setTimeout(() => {\n                    open.set(false);\n                }, $closeDelay);\n            }\n        };\n    });\n    const trigger = builder(name('trigger'), {\n        stores: [open, ids.trigger, ids.content],\n        returned: ([$open, $triggerId, $contentId]) => {\n            return {\n                role: 'button',\n                'aria-haspopup': 'dialog',\n                'aria-expanded': $open,\n                'data-state': $open ? 'open' : 'closed',\n                'aria-controls': $contentId,\n                id: $triggerId,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'pointerenter', (e) => {\n                if (isTouch(e))\n                    return;\n                get(handleOpen)();\n            }), addMeltEventListener(node, 'pointerleave', (e) => {\n                if (isTouch(e))\n                    return;\n                get(handleClose)();\n            }), addMeltEventListener(node, 'focus', (e) => {\n                if (!isElement(e.currentTarget) || !isFocusVisible(e.currentTarget))\n                    return;\n                get(handleOpen)();\n            }), addMeltEventListener(node, 'blur', () => get(handleClose)()));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const isVisible = derivedVisible({ open, forceVisible, activeTrigger });\n    const content = builder(name('content'), {\n        stores: [isVisible, portal, ids.content],\n        returned: ([$isVisible, $portal, $contentId]) => {\n            return {\n                hidden: $isVisible ? undefined : true,\n                tabindex: -1,\n                style: styleToString({\n                    'pointer-events': $isVisible ? undefined : 'none',\n                    opacity: $isVisible ? 1 : 0,\n                    userSelect: 'text',\n                    WebkitUserSelect: 'text',\n                }),\n                id: $contentId,\n                'data-state': $isVisible ? 'open' : 'closed',\n                'data-portal': $portal ? '' : undefined,\n            };\n        },\n        action: (node) => {\n            let unsub = noop;\n            const unsubTimers = () => {\n                if (timeout) {\n                    window.clearTimeout(timeout);\n                }\n            };\n            let unsubPopper = noop;\n            const unsubDerived = effect([isVisible, activeTrigger, positioning, closeOnOutsideClick, portal, closeOnEscape], ([$isVisible, $activeTrigger, $positioning, $closeOnOutsideClick, $portal, $closeOnEscape,]) => {\n                unsubPopper();\n                if (!$isVisible || !$activeTrigger)\n                    return;\n                const popper = usePopper(node, {\n                    anchorElement: $activeTrigger,\n                    open: open,\n                    options: {\n                        floating: $positioning,\n                        clickOutside: $closeOnOutsideClick ? undefined : null,\n                        portal: getPortalDestination(node, $portal),\n                        focusTrap: null,\n                        escapeKeydown: $closeOnEscape ? undefined : null,\n                    },\n                });\n                if (popper && popper.destroy) {\n                    unsubPopper = popper.destroy;\n                }\n            });\n            unsub = executeCallbacks(addMeltEventListener(node, 'pointerdown', (e) => {\n                const currentTarget = e.currentTarget;\n                const target = e.target;\n                if (!isHTMLElement(currentTarget) || !isHTMLElement(target))\n                    return;\n                if (currentTarget.contains(target)) {\n                    containSelection.set(true);\n                }\n                hasSelection.set(false);\n                isPointerDownOnContent.set(true);\n            }), addMeltEventListener(node, 'pointerenter', (e) => {\n                if (isTouch(e))\n                    return;\n                get(handleOpen)();\n            }), addMeltEventListener(node, 'pointerleave', (e) => {\n                if (isTouch(e))\n                    return;\n                get(handleClose)();\n            }), addMeltEventListener(node, 'focusout', (e) => {\n                e.preventDefault();\n            }));\n            return {\n                destroy() {\n                    unsub();\n                    unsubPopper();\n                    unsubTimers();\n                    unsubDerived();\n                },\n            };\n        },\n    });\n    const arrow = builder(name('arrow'), {\n        stores: arrowSize,\n        returned: ($arrowSize) => ({\n            'data-arrow': true,\n            style: styleToString({\n                position: 'absolute',\n                width: `var(--arrow-size, ${$arrowSize}px)`,\n                height: `var(--arrow-size, ${$arrowSize}px)`,\n            }),\n        }),\n    });\n    effect([containSelection], ([$containSelection]) => {\n        if (!isBrowser || !$containSelection)\n            return;\n        const body = document.body;\n        const contentElement = document.getElementById(get(ids.content));\n        if (!contentElement)\n            return;\n        // prefix for safari\n        originalBodyUserSelect = body.style.userSelect || body.style.webkitUserSelect;\n        const originalContentUserSelect = contentElement.style.userSelect || contentElement.style.webkitUserSelect;\n        body.style.userSelect = 'none';\n        body.style.webkitUserSelect = 'none';\n        contentElement.style.userSelect = 'text';\n        contentElement.style.webkitUserSelect = 'text';\n        return () => {\n            body.style.userSelect = originalBodyUserSelect;\n            body.style.webkitUserSelect = originalBodyUserSelect;\n            contentElement.style.userSelect = originalContentUserSelect;\n            contentElement.style.webkitUserSelect = originalContentUserSelect;\n        };\n    });\n    safeOnMount(() => {\n        const triggerEl = document.getElementById(get(ids.trigger));\n        if (!triggerEl)\n            return;\n        activeTrigger.set(triggerEl);\n    });\n    effect([open], ([$open]) => {\n        if (!isBrowser || !$open) {\n            hasSelection.set(false);\n            return;\n        }\n        const handlePointerUp = () => {\n            containSelection.set(false);\n            isPointerDownOnContent.set(false);\n            sleep(1).then(() => {\n                const isSelection = document.getSelection()?.toString() !== '';\n                if (isSelection) {\n                    hasSelection.set(true);\n                }\n            });\n        };\n        document.addEventListener('pointerup', handlePointerUp);\n        const contentElement = document.getElementById(get(ids.content));\n        if (!contentElement)\n            return;\n        const tabbables = getTabbableNodes(contentElement);\n        tabbables.forEach((tabbable) => tabbable.setAttribute('tabindex', '-1'));\n        return () => {\n            document.removeEventListener('pointerup', handlePointerUp);\n            hasSelection.set(false);\n            isPointerDownOnContent.set(false);\n        };\n    });\n    return {\n        ids,\n        elements: {\n            trigger,\n            content,\n            arrow,\n        },\n        states: {\n            open,\n        },\n        options,\n    };\n}\n", "import { usePopper } from '../../internal/actions/index.js';\nimport { FIRST_LAST_KEYS, SELECTION_KEYS, addEventListener, addHighlight, addMeltEventListener, builder, createElHelpers, derivedVisible, effect, executeCallbacks, getNextFocusable, getPortalDestination, getPreviousFocusable, handleRovingFocus, isBrowser, isElement, isHTMLElement, kbd, noop, removeHighlight, removeScroll, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { safeOnDestroy, safeOnMount } from '../../internal/helpers/lifecycle.js';\nimport { tick } from 'svelte';\nimport { get, writable } from 'svelte/store';\nimport { generateIds } from '../../internal/helpers/id';\nimport { omit } from '../../internal/helpers/object';\nimport { applyAttrsIfDisabled, createMenuBuilder, getMenuItems, handleMenuNavigation, handleTabNavigation, } from '../menu/index.js';\nconst MENUBAR_NAV_KEYS = [kbd.ARROW_LEFT, kbd.ARROW_RIGHT, kbd.HOME, kbd.END];\nconst { name } = createElHelpers('menubar');\nconst defaults = {\n    loop: true,\n    closeOnEscape: true,\n};\nexport const menubarIdParts = ['menubar'];\nexport function createMenubar(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'ids'));\n    const { loop, closeOnEscape } = options;\n    const activeMenu = writable('');\n    const nextFocusable = writable(null);\n    const prevFocusable = writable(null);\n    const lastFocusedMenuTrigger = writable(null);\n    const closeTimer = writable(0);\n    let scrollRemoved = false;\n    const ids = toWritableStores({ ...generateIds(menubarIdParts), ...withDefaults.ids });\n    const menubar = builder(name(), {\n        stores: [ids.menubar],\n        returned([$menubarId]) {\n            return {\n                role: 'menubar',\n                'data-melt-menubar': '',\n                'data-orientation': 'horizontal',\n                id: $menubarId,\n            };\n        },\n        action: (node) => {\n            const menuTriggers = Array.from(node.querySelectorAll('[data-melt-menubar-trigger]'));\n            if (!isHTMLElement(menuTriggers[0]))\n                return {};\n            menuTriggers[0].tabIndex = 0;\n            return {\n                destroy: noop,\n            };\n        },\n    });\n    const menuDefaults = {\n        positioning: {\n            placement: 'bottom-start',\n        },\n        preventScroll: true,\n        arrowSize: 8,\n        dir: 'ltr',\n        loop: false,\n        closeOnEscape: true,\n        closeOnOutsideClick: true,\n        portal: undefined,\n        forceVisible: false,\n        defaultOpen: false,\n        typeahead: true,\n        closeFocus: undefined,\n        disableFocusFirstItem: false,\n        closeOnItemClick: true,\n    };\n    const createMenu = (props) => {\n        const withDefaults = { ...menuDefaults, ...props };\n        const rootOpen = writable(false);\n        const rootActiveTrigger = writable(null);\n        // options\n        const options = toWritableStores(withDefaults);\n        const { positioning, portal, forceVisible } = options;\n        const m = createMenuBuilder({\n            rootOptions: options,\n            rootOpen,\n            rootActiveTrigger,\n            nextFocusable,\n            prevFocusable,\n            selector: 'menubar-menu',\n            removeScroll: false,\n        });\n        const isVisible = derivedVisible({\n            open: rootOpen,\n            forceVisible,\n            activeTrigger: rootActiveTrigger,\n        });\n        const menu = builder(name('menu'), {\n            stores: [isVisible, portal, m.ids.menu, m.ids.trigger, ids.menubar],\n            returned: ([$isVisible, $portal, $menuId, $triggerId, $menubarId]) => {\n                return {\n                    role: 'menu',\n                    hidden: $isVisible ? undefined : true,\n                    style: styleToString({\n                        display: $isVisible ? undefined : 'none',\n                    }),\n                    id: $menuId,\n                    'aria-labelledby': $triggerId,\n                    'data-state': $isVisible ? 'open' : 'closed',\n                    'data-melt-scope': $menubarId,\n                    'data-portal': $portal ? '' : undefined,\n                    tabindex: -1,\n                };\n            },\n            action: (node) => {\n                let unsubPopper = noop;\n                const unsubDerived = effect([rootOpen, rootActiveTrigger, positioning, portal], ([$rootOpen, $rootActiveTrigger, $positioning, $portal]) => {\n                    unsubPopper();\n                    if (!($rootOpen && $rootActiveTrigger))\n                        return;\n                    tick().then(() => {\n                        const popper = usePopper(node, {\n                            anchorElement: $rootActiveTrigger,\n                            open: rootOpen,\n                            options: {\n                                floating: $positioning,\n                                portal: getPortalDestination(node, $portal),\n                                clickOutside: {\n                                    ignore: (e) => {\n                                        const target = e.target;\n                                        const menubarEl = document.getElementById(get(ids.menubar));\n                                        if (!menubarEl || !isElement(target))\n                                            return false;\n                                        return menubarEl.contains(target);\n                                    },\n                                    handler: () => {\n                                        activeMenu.set('');\n                                    },\n                                },\n                            },\n                        });\n                        if (popper && popper.destroy) {\n                            unsubPopper = popper.destroy;\n                        }\n                    });\n                });\n                const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => {\n                    const target = e.target;\n                    const menuEl = e.currentTarget;\n                    if (!isHTMLElement(menuEl) || !isHTMLElement(target))\n                        return;\n                    if (MENUBAR_NAV_KEYS.includes(e.key)) {\n                        handleCrossMenuNavigation(e);\n                    }\n                    /**\n                     * Submenu key events bubble through portals and\n                     * we only care about key events that happen inside this menu.\n                     */\n                    const isKeyDownInside = target.closest('[role=\"menu\"]') === menuEl;\n                    if (!isKeyDownInside)\n                        return;\n                    if (FIRST_LAST_KEYS.includes(e.key)) {\n                        handleMenuNavigation(e);\n                    }\n                    /**\n                     * Menus should not be navigated using tab, so we prevent it.\n                     * @see https://www.w3.org/WAI/ARIA/apg/practices/keyboard-interface/#kbd_general_within\n                     */\n                    if (e.key === kbd.TAB) {\n                        e.preventDefault();\n                        rootActiveTrigger.set(null);\n                        rootOpen.set(false);\n                        handleTabNavigation(e, nextFocusable, prevFocusable);\n                    }\n                    /**\n                     * Check for typeahead search and handle it.\n                     */\n                    const isCharacterKey = e.key.length === 1;\n                    const isModifierKey = e.ctrlKey || e.altKey || e.metaKey;\n                    if (!isModifierKey && isCharacterKey) {\n                        m.handleTypeaheadSearch(e.key, getMenuItems(menuEl));\n                    }\n                }));\n                return {\n                    destroy() {\n                        unsubDerived();\n                        unsubEvents();\n                        unsubPopper();\n                    },\n                };\n            },\n        });\n        const trigger = builder(name('trigger'), {\n            stores: [rootOpen, m.ids.menu, m.ids.trigger],\n            returned: ([$rootOpen, $menuId, $triggerId]) => {\n                return {\n                    'aria-controls': $menuId,\n                    'aria-expanded': $rootOpen,\n                    'data-state': $rootOpen ? 'open' : 'closed',\n                    id: $triggerId,\n                    'aria-haspopup': 'menu',\n                    'data-orientation': 'horizontal',\n                    role: 'menuitem',\n                };\n            },\n            action: (node) => {\n                applyAttrsIfDisabled(node);\n                const menubarEl = document.getElementById(get(ids.menubar));\n                if (!menubarEl)\n                    return {};\n                const menubarTriggers = Array.from(menubarEl.querySelectorAll('[data-melt-menubar-trigger]'));\n                if (!menubarTriggers.length)\n                    return {};\n                const unsubEffect = effect([lastFocusedMenuTrigger], ([$lastFocusedMenuTrigger]) => {\n                    if (!$lastFocusedMenuTrigger && menubarTriggers[0] === node) {\n                        node.tabIndex = 0;\n                    }\n                    else if ($lastFocusedMenuTrigger === node) {\n                        node.tabIndex = 0;\n                    }\n                    else {\n                        node.tabIndex = -1;\n                    }\n                });\n                if (menubarTriggers[0] === node) {\n                    node.tabIndex = 0;\n                }\n                else {\n                    node.tabIndex = -1;\n                }\n                const unsub = executeCallbacks(addMeltEventListener(node, 'click', (e) => {\n                    const $rootOpen = get(rootOpen);\n                    const triggerEl = e.currentTarget;\n                    if (!isHTMLElement(triggerEl))\n                        return;\n                    handleOpen(triggerEl);\n                    if (!$rootOpen)\n                        e.preventDefault();\n                }), addMeltEventListener(node, 'keydown', (e) => {\n                    const triggerEl = e.currentTarget;\n                    if (!isHTMLElement(triggerEl))\n                        return;\n                    if (SELECTION_KEYS.includes(e.key) || e.key === kbd.ARROW_DOWN) {\n                        e.preventDefault();\n                        handleOpen(triggerEl);\n                        const menuId = triggerEl.getAttribute('aria-controls');\n                        if (!menuId)\n                            return;\n                        const menu = document.getElementById(menuId);\n                        if (!menu)\n                            return;\n                        const menuItems = getMenuItems(menu);\n                        if (!menuItems.length)\n                            return;\n                        handleRovingFocus(menuItems[0]);\n                    }\n                }), addMeltEventListener(node, 'pointerenter', (e) => {\n                    const triggerEl = e.currentTarget;\n                    if (!isHTMLElement(triggerEl))\n                        return;\n                    const $activeMenu = get(activeMenu);\n                    const $rootOpen = get(rootOpen);\n                    if ($activeMenu && !$rootOpen) {\n                        rootOpen.set(true);\n                        activeMenu.set(get(m.ids.menu));\n                        rootActiveTrigger.set(triggerEl);\n                    }\n                }));\n                return {\n                    destroy() {\n                        unsub();\n                        unsubEffect();\n                    },\n                };\n            },\n        });\n        function handleOpen(triggerEl) {\n            rootOpen.update((prev) => {\n                const isOpen = !prev;\n                if (isOpen) {\n                    nextFocusable.set(getNextFocusable(triggerEl));\n                    prevFocusable.set(getPreviousFocusable(triggerEl));\n                    rootActiveTrigger.set(triggerEl);\n                    activeMenu.set(get(m.ids.menu));\n                }\n                else {\n                    rootActiveTrigger.set(null);\n                }\n                return isOpen;\n            });\n        }\n        effect([activeMenu], ([$activeMenu]) => {\n            if (!isBrowser)\n                return;\n            if ($activeMenu === get(m.ids.menu)) {\n                if (get(rootOpen))\n                    return;\n                const triggerEl = document.getElementById(get(m.ids.trigger));\n                if (!triggerEl)\n                    return;\n                rootActiveTrigger.set(triggerEl);\n                addHighlight(triggerEl);\n                rootOpen.set(true);\n                return;\n            }\n            if ($activeMenu !== get(m.ids.menu)) {\n                if (!isBrowser)\n                    return;\n                if (get(rootOpen)) {\n                    const triggerEl = document.getElementById(get(m.ids.trigger));\n                    if (!triggerEl)\n                        return;\n                    rootActiveTrigger.set(null);\n                    rootOpen.set(false);\n                    removeHighlight(triggerEl);\n                }\n                return;\n            }\n        });\n        effect([rootOpen], ([$rootOpen]) => {\n            if (!isBrowser)\n                return;\n            const triggerEl = document.getElementById(get(m.ids.trigger));\n            if (!triggerEl)\n                return;\n            if (!$rootOpen && get(activeMenu) === get(m.ids.menu)) {\n                rootActiveTrigger.set(null);\n                activeMenu.set('');\n                removeHighlight(triggerEl);\n                return;\n            }\n            if ($rootOpen) {\n                lastFocusedMenuTrigger.set(triggerEl);\n                addHighlight(triggerEl);\n            }\n        });\n        safeOnMount(() => {\n            if (!isBrowser)\n                return;\n            const triggerEl = document.getElementById(get(m.ids.trigger));\n            if (isHTMLElement(triggerEl) && get(rootOpen)) {\n                rootActiveTrigger.set(triggerEl);\n            }\n        });\n        return {\n            ids: m.ids,\n            elements: {\n                menu,\n                trigger,\n                item: m.item,\n                arrow: m.arrow,\n                separator: m.separator,\n                group: m.group,\n                groupLabel: m.groupLabel,\n            },\n            builders: {\n                createCheckboxItem: m.createCheckboxItem,\n                createSubmenu: m.createSubmenu,\n                createMenuRadioGroup: m.createMenuRadioGroup,\n            },\n            states: {\n                open: rootOpen,\n            },\n            options,\n        };\n    };\n    /* -------- */\n    /* Helpers */\n    /* -------- */\n    /**\n     * KBD Navigation handler for moving between menus in the menu bar.\n     */\n    function handleCrossMenuNavigation(e) {\n        if (!isBrowser)\n            return;\n        e.preventDefault();\n        // menu element being navigated\n        const currentTarget = e.currentTarget;\n        const target = e.target;\n        if (!isHTMLElement(target) || !isHTMLElement(currentTarget))\n            return;\n        const targetIsSubTrigger = target.hasAttribute('data-melt-menubar-menu-subtrigger');\n        const isKeyDownInsideSubMenu = target.closest('[role=\"menu\"]') !== currentTarget;\n        const prevMenuKey = kbd.ARROW_LEFT;\n        const isPrevKey = e.key === prevMenuKey;\n        const isNextKey = !isPrevKey;\n        // prevent navigation when opening a submenu\n        if (isNextKey && targetIsSubTrigger)\n            return;\n        // prevent navigation when closing a submenu\n        if (isPrevKey && isKeyDownInsideSubMenu)\n            return;\n        // Index of the currently focused item in the candidate nodes array\n        const menubarEl = document.getElementById(get(ids.menubar));\n        if (!isHTMLElement(menubarEl))\n            return;\n        const triggers = getMenuTriggers(menubarEl);\n        const currTriggerId = currentTarget.getAttribute('aria-labelledby');\n        const currIndex = triggers.findIndex((trigger) => trigger.id === currTriggerId);\n        let nextIndex;\n        switch (e.key) {\n            case kbd.ARROW_RIGHT:\n                nextIndex = currIndex < triggers.length - 1 ? currIndex + 1 : 0;\n                break;\n            case kbd.ARROW_LEFT:\n                nextIndex = currIndex > 0 ? currIndex - 1 : triggers.length - 1;\n                break;\n            case kbd.HOME:\n                nextIndex = 0;\n                break;\n            case kbd.END:\n                nextIndex = triggers.length - 1;\n                break;\n            default:\n                return;\n        }\n        const nextFocusedTrigger = triggers[nextIndex];\n        const menuId = nextFocusedTrigger.getAttribute('aria-controls');\n        menuId && activeMenu.set(menuId);\n    }\n    function getMenuTriggers(el) {\n        const menuEl = el.closest('[role=\"menubar\"]');\n        if (!isHTMLElement(menuEl))\n            return [];\n        return Array.from(menuEl.querySelectorAll('[data-melt-menubar-trigger]')).filter((el) => isHTMLElement(el));\n    }\n    /**\n     * Keyboard event handler for menubar navigation.\n     * @param e The keyboard event\n     */\n    function handleMenubarNavigation(e) {\n        e.preventDefault();\n        // currently focused menu item\n        const currentFocusedItem = document.activeElement;\n        // menu element being navigated\n        const currentTarget = e.currentTarget;\n        if (!isHTMLElement(currentTarget) || !isHTMLElement(currentFocusedItem))\n            return;\n        // menu items of the current menu\n        const menuTriggers = getMenuTriggers(currentTarget);\n        if (!menuTriggers.length)\n            return;\n        const candidateNodes = menuTriggers.filter((item) => {\n            if (item.hasAttribute('data-disabled')) {\n                return false;\n            }\n            if (item.getAttribute('disabled') === 'true') {\n                return false;\n            }\n            return true;\n        });\n        // Index of the currently focused item in the candidate nodes array\n        const currentIndex = candidateNodes.indexOf(currentFocusedItem);\n        // Calculate the index of the next menu item\n        let nextIndex;\n        const $loop = get(loop);\n        switch (e.key) {\n            case kbd.ARROW_RIGHT:\n                nextIndex =\n                    currentIndex < candidateNodes.length - 1 ? currentIndex + 1 : $loop ? 0 : currentIndex;\n                break;\n            case kbd.ARROW_LEFT:\n                nextIndex = currentIndex > 0 ? currentIndex - 1 : $loop ? candidateNodes.length - 1 : 0;\n                break;\n            case kbd.HOME:\n                nextIndex = 0;\n                break;\n            case kbd.END:\n                nextIndex = candidateNodes.length - 1;\n                break;\n            default:\n                return;\n        }\n        handleRovingFocus(candidateNodes[nextIndex]);\n    }\n    /* --------------------*/\n    /* Lifecycle & Effects */\n    /* --------------------*/\n    safeOnMount(() => {\n        if (!isBrowser)\n            return;\n        const menubarEl = document.getElementById(get(ids.menubar));\n        if (!menubarEl)\n            return;\n        const unsubEvents = executeCallbacks(addMeltEventListener(menubarEl, 'keydown', (e) => {\n            const target = e.target;\n            const menuEl = e.currentTarget;\n            if (!isHTMLElement(menuEl) || !isHTMLElement(target))\n                return;\n            /**\n             * Submenu key events bubble through portals and\n             * we only care about key events that happen inside this menu.\n             */\n            const isTargetTrigger = target.hasAttribute('data-melt-menubar-trigger');\n            if (!isTargetTrigger)\n                return;\n            if (MENUBAR_NAV_KEYS.includes(e.key)) {\n                handleMenubarNavigation(e);\n            }\n        }), addEventListener(document, 'keydown', (e) => {\n            if (get(closeOnEscape) && e.key === kbd.ESCAPE) {\n                window.clearTimeout(get(closeTimer));\n                activeMenu.set('');\n            }\n        }));\n        return () => {\n            unsubEvents();\n        };\n    });\n    const unsubs = [];\n    effect([activeMenu], ([$activeMenu]) => {\n        if (!isBrowser)\n            return;\n        /**\n         * To prevent adding/removing the scroll as we cycle through\n         * menus (which causes horrible performance issues), we only\n         * want to remove the scroll when the first menu is opened, and\n         * remove it when no menus are open.\n         */\n        if (!$activeMenu) {\n            unsubs.forEach((unsub) => unsub());\n            scrollRemoved = false;\n        }\n        else if (!scrollRemoved) {\n            unsubs.push(removeScroll());\n            scrollRemoved = true;\n        }\n    });\n    safeOnDestroy(() => {\n        unsubs.forEach((unsub) => unsub());\n    });\n    return {\n        ids,\n        elements: {\n            menubar,\n        },\n        builders: {\n            createMenu,\n        },\n        options,\n    };\n}\n", "export function getPageItems({ page = 1, totalPages, siblingCount = 1, }) {\n    const pageItems = [];\n    const pagesToShow = new Set([1, totalPages]);\n    const firstItemWithSiblings = 3 + siblingCount;\n    const lastItemWithSiblings = totalPages - 2 - siblingCount;\n    if (firstItemWithSiblings > lastItemWithSiblings) {\n        for (let p = 2; p <= totalPages - 1; p++) {\n            pagesToShow.add(p);\n        }\n    }\n    else if (page < firstItemWithSiblings) {\n        for (let p = 2; p <= Math.min(firstItemWithSiblings, totalPages); p++) {\n            pagesToShow.add(p);\n        }\n    }\n    else if (page > lastItemWithSiblings) {\n        for (let p = totalPages - 1; p >= Math.max(lastItemWithSiblings, 2); p--) {\n            pagesToShow.add(p);\n        }\n    }\n    else {\n        for (let p = Math.max(page - siblingCount, 2); p <= Math.min(page + siblingCount, totalPages); p++) {\n            pagesToShow.add(p);\n        }\n    }\n    const addPage = (value) => {\n        pageItems.push({ type: 'page', value, key: `page-${value}` });\n    };\n    const addEllipsis = () => {\n        pageItems.push({ type: 'ellipsis', key: `ellipsis-${pageItems.length}` });\n    };\n    let lastNumber = 0;\n    for (const page of Array.from(pagesToShow).sort((a, b) => a - b)) {\n        if (page - lastNumber > 1) {\n            addEllipsis();\n        }\n        addPage(page);\n        lastNumber = page;\n    }\n    return pageItems;\n}\n", "import { builder, createElHelpers, executeCallbacks, isHTMLElement, kbd, omit, overridable, toWritableStores, addMeltEventListener, } from '../../internal/helpers/index.js';\nimport { derived, get, writable, readonly } from 'svelte/store';\nimport { getPageItems } from './helpers.js';\nconst defaults = {\n    perPage: 1,\n    siblingCount: 1,\n    defaultPage: 1,\n};\nconst { name, selector } = createElHelpers('pagination');\nexport function createPagination(props) {\n    const withDefaults = { ...defaults, ...props };\n    const pageWritable = withDefaults.page ?? writable(withDefaults.defaultPage);\n    const page = overridable(pageWritable, withDefaults?.onPageChange);\n    // options\n    const options = toWritableStores(omit(withDefaults, 'page', 'onPageChange', 'defaultPage'));\n    const { perPage, siblingCount, count } = options;\n    const totalPages = derived([count, perPage], ([$count, $perPage]) => {\n        return Math.ceil($count / $perPage);\n    });\n    const range = derived([page, perPage, count], ([$page, $perPage, $count]) => {\n        const start = ($page - 1) * $perPage;\n        const end = Math.min(start + $perPage, $count);\n        return { start, end };\n    });\n    const root = builder(name(), {\n        returned: () => ({\n            'data-scope': 'pagination',\n        }),\n    });\n    const pages = derived([page, totalPages, siblingCount], ([$page, $totalPages, $siblingCount]) => {\n        return getPageItems({ page: $page, totalPages: $totalPages, siblingCount: $siblingCount });\n    });\n    const keydown = (e) => {\n        const thisEl = e.target;\n        if (!isHTMLElement(thisEl))\n            return;\n        const rootEl = thisEl.closest('[data-scope=\"pagination\"]');\n        if (!isHTMLElement(rootEl))\n            return;\n        const triggers = Array.from(rootEl.querySelectorAll(selector('page'))).filter((el) => isHTMLElement(el));\n        const prevButton = rootEl.querySelector(selector('prev'));\n        const nextButton = rootEl.querySelector(selector('next'));\n        if (isHTMLElement(prevButton)) {\n            triggers.unshift(prevButton);\n        }\n        if (isHTMLElement(nextButton)) {\n            triggers.push(nextButton);\n        }\n        const index = triggers.indexOf(thisEl);\n        if (e.key === kbd.ARROW_LEFT && index !== 0) {\n            e.preventDefault();\n            triggers[index - 1].focus();\n        }\n        else if (e.key === kbd.ARROW_RIGHT && index !== triggers.length - 1) {\n            e.preventDefault();\n            triggers[index + 1].focus();\n        }\n        else if (e.key === kbd.HOME) {\n            e.preventDefault();\n            triggers[0].focus();\n        }\n        else if (e.key === kbd.END) {\n            e.preventDefault();\n            triggers[triggers.length - 1].focus();\n        }\n    };\n    const pageTrigger = builder(name('page'), {\n        stores: page,\n        returned: ($page) => {\n            return (pageItem) => {\n                return {\n                    'aria-label': `Page ${pageItem.value}`,\n                    'data-value': pageItem.value,\n                    'data-selected': pageItem.value === $page ? '' : undefined,\n                };\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                const value = node.dataset.value;\n                if (!value || Number.isNaN(+value))\n                    return;\n                page.set(Number(value));\n            }), addMeltEventListener(node, 'keydown', keydown));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const prevButton = builder(name('prev'), {\n        stores: page,\n        returned: ($page) => {\n            return {\n                'aria-label': 'Previous',\n                disabled: $page <= 1,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                page.update((p) => Math.max(p - 1, 1));\n            }), addMeltEventListener(node, 'keydown', keydown));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const nextButton = builder(name('next'), {\n        stores: [page, totalPages],\n        returned: ([$page, $totalPages]) => {\n            return {\n                'aria-label': 'Next',\n                disabled: $page >= $totalPages,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                const $totalPages = get(totalPages);\n                page.update((p) => Math.min(p + 1, $totalPages));\n            }), addMeltEventListener(node, 'keydown', keydown));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    return {\n        elements: {\n            root,\n            pageTrigger,\n            prevButton,\n            nextButton,\n        },\n        states: {\n            range: readonly(range),\n            page: page,\n            pages: readonly(pages),\n            totalPages: readonly(totalPages),\n        },\n        options,\n    };\n}\n", "import { addMeltEventListener, builder, createElHelpers, disabledAttr, executeCallbacks, hiddenInputAttrs, isBrowser, isHTMLElement, isHTMLInputElement, last, next, omit, overridable, prev, toWritableStores, } from '../../internal/helpers/index.js';\nimport { tick } from 'svelte';\nimport { derived, get, readonly, writable } from 'svelte/store';\nimport { generateIds } from '../../internal/helpers/id';\nconst { name, selector } = createElHelpers('pin-input');\nconst getInputs = (node) => {\n    const rootEl = node.closest(selector());\n    if (!isHTMLElement(rootEl)) {\n        return { inputs: null, el: node, elIndex: -1 };\n    }\n    const inputs = Array.from(rootEl.querySelectorAll(selector('input'))).filter((input) => isHTMLInputElement(input));\n    return {\n        elIndex: inputs.indexOf(node),\n        inputs,\n    };\n};\nconst defaults = {\n    placeholder: '',\n    disabled: false,\n    type: 'text',\n    name: undefined,\n    defaultValue: [],\n};\nexport const pinInputIdParts = ['root'];\nexport function createPinInput(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'value', 'ids'));\n    const { placeholder, disabled, type, name: nameStore } = options;\n    const valueWritable = withDefaults.value ?? writable(withDefaults.defaultValue);\n    const value = overridable(valueWritable, withDefaults?.onValueChange);\n    const valueStr = derived(value, (v) => v.join(''));\n    const ids = toWritableStores({ ...generateIds(pinInputIdParts), ...withDefaults.ids });\n    const root = builder(name(), {\n        stores: [value, ids.root],\n        returned: ([$value, $rootId]) => {\n            return {\n                id: $rootId,\n                'data-complete': $value.length && $value.every((v) => v.length > 0) ? '' : undefined,\n            };\n        },\n    });\n    let index = 0;\n    const getTotalItems = () => {\n        if (!isBrowser)\n            return Infinity;\n        const rootEl = document.getElementById(get(ids.root));\n        if (!rootEl)\n            return Infinity;\n        const inputs = Array.from(rootEl.querySelectorAll(selector('input')));\n        return inputs.length;\n    };\n    const input = builder(name('input'), {\n        stores: [value, placeholder, disabled, type],\n        returned: ([$value, $placeholder, $disabled, $type]) => {\n            return () => {\n                const totalItems = getTotalItems();\n                const currIndex = index % totalItems;\n                index = (index + 1) % totalItems;\n                const currValue = $value[currIndex] ?? '';\n                return {\n                    'data-complete': $value.length && $value.every((v) => v.length > 0) ? '' : undefined,\n                    placeholder: $placeholder,\n                    disabled: disabledAttr($disabled),\n                    type: $type,\n                    value: currValue,\n                };\n            };\n        },\n        action: (node) => {\n            const { elIndex } = getInputs(node);\n            value.update((v) => {\n                v[elIndex] = node.value;\n                return v;\n            });\n            const unsub = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => {\n                const { inputs, elIndex } = getInputs(node);\n                if (!inputs)\n                    return;\n                if (e.key === 'Backspace') {\n                    e.preventDefault();\n                    if (node.value) {\n                        node.value = '';\n                        tick().then(() => (node.placeholder = ''));\n                        value.set(inputs.map((input) => input.value.slice(-1) ?? undefined));\n                    }\n                    else {\n                        const prevEl = prev(inputs, elIndex, false);\n                        prevEl.focus();\n                        prevEl.value = '';\n                        tick().then(() => (prevEl.placeholder = ''));\n                        value.set(inputs.map((input) => input.value.slice(-1) ?? undefined));\n                    }\n                }\n                if (e.key === 'Delete') {\n                    e.preventDefault();\n                    node.value = '';\n                    tick().then(() => (node.placeholder = ''));\n                    value.set(inputs.map((input) => input.value.slice(-1) ?? undefined));\n                }\n                if (e.key === 'ArrowLeft') {\n                    e.preventDefault();\n                    const prevEl = prev(inputs, elIndex, false);\n                    prevEl.focus();\n                }\n                if (e.key === 'ArrowRight') {\n                    e.preventDefault();\n                    const nextEl = next(inputs, elIndex, false);\n                    nextEl.focus();\n                }\n                if (e.key === 'Home') {\n                    e.preventDefault();\n                    inputs[0].focus();\n                }\n                if (e.key === 'End') {\n                    e.preventDefault();\n                    last(inputs).focus();\n                }\n            }), addMeltEventListener(node, 'input', (e) => {\n                const { inputs, elIndex } = getInputs(node);\n                if (!inputs)\n                    return;\n                const getInputted = (el) => {\n                    const $value = get(value);\n                    const prevElValue = $value[elIndex];\n                    const selectionStart = el.selectionStart ?? 1;\n                    if (!prevElValue)\n                        return el.value;\n                    return selectionStart > 1\n                        ? el.value.slice(1)\n                        : el.value.slice(0, Math.max(el.value.length - 2, 1));\n                };\n                const inputted = getInputted(node);\n                const inputEvent = e;\n                if (inputEvent.inputType === 'insertFromPaste') {\n                    return;\n                }\n                // Only allow 1 character, get last\n                node.value = inputted.slice(-1);\n                if (node.value.length !== 0) {\n                    const nextEl = next(inputs, elIndex, false);\n                    nextEl.focus();\n                }\n                value.set(inputs.map((input) => input.value.slice(-1) ?? undefined));\n            }), addMeltEventListener(node, 'paste', (e) => {\n                e.preventDefault();\n                const { inputs, elIndex } = getInputs(node);\n                if (!inputs)\n                    return;\n                const inputEvent = e;\n                const clipboardData = inputEvent.clipboardData;\n                if (!clipboardData)\n                    return;\n                const pasted = clipboardData.getData('text');\n                const initialIndex = pasted.length >= inputs.length ? 0 : elIndex;\n                const lastIndex = Math.min(initialIndex + pasted.length, inputs.length);\n                for (let i = initialIndex; i < lastIndex; i++) {\n                    const input = inputs[i];\n                    input.value = pasted[i - initialIndex];\n                    input.focus();\n                }\n                inputs[lastIndex]?.focus();\n                value.set(inputs.map((input) => input.value.slice(-1) ?? undefined));\n            }), addMeltEventListener(node, 'change', () => {\n                const { inputs } = getInputs(node);\n                if (!inputs)\n                    return;\n                value.set(inputs.map((input) => input.value.slice(-1) ?? undefined));\n            }), addMeltEventListener(node, 'focus', () => {\n                node.setSelectionRange(1, 1);\n                node.placeholder = '';\n                tick().then(() => {\n                    node.placeholder = '';\n                });\n            }), addMeltEventListener(node, 'blur', () => {\n                node.placeholder = get(placeholder);\n            }));\n            return {\n                destroy() {\n                    unsub();\n                },\n            };\n        },\n    });\n    const hiddenInput = builder(name('hidden-input'), {\n        stores: [valueStr, nameStore],\n        returned: ([$valueStr, $nameStore]) => ({\n            ...hiddenInputAttrs,\n            value: $valueStr,\n            name: $nameStore,\n        }),\n    });\n    const clear = () => {\n        value.update((v) => {\n            v.forEach((_, i) => (v[i] = ''));\n            return v;\n        });\n    };\n    return {\n        ids,\n        elements: {\n            root,\n            input,\n            hiddenInput,\n        },\n        states: {\n            value,\n            valueStr: readonly(valueStr),\n        },\n        helpers: {\n            clear,\n        },\n        options,\n    };\n}\n", "import { addMeltEventListener, builder, createElHelpers, derivedVisible, effect, executeCallbacks, getPortalDestination, handleFocus, isBrowser, isElement, isHTMLElement, kbd, noop, omit, overridable, removeScroll, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { usePopper } from '../../internal/actions/index.js';\nimport { safeOnMount } from '../../internal/helpers/lifecycle.js';\nimport { tick } from 'svelte';\nimport { get, writable } from 'svelte/store';\nimport { generateIds } from '../../internal/helpers/id';\nconst defaults = {\n    positioning: {\n        placement: 'bottom',\n    },\n    arrowSize: 8,\n    defaultOpen: false,\n    disableFocusTrap: false,\n    closeOnEscape: true,\n    preventScroll: false,\n    onOpenChange: undefined,\n    closeOnOutsideClick: true,\n    portal: undefined,\n    forceVisible: false,\n    openFocus: undefined,\n    closeFocus: undefined,\n};\nconst { name } = createElHelpers('popover');\nexport const popoverIdParts = ['trigger', 'content'];\nexport function createPopover(args) {\n    const withDefaults = { ...defaults, ...args };\n    const options = toWritableStores(omit(withDefaults, 'open', 'ids'));\n    const { positioning, arrowSize, disableFocusTrap, preventScroll, closeOnEscape, closeOnOutsideClick, portal, forceVisible, openFocus, closeFocus, } = options;\n    const openWritable = withDefaults.open ?? writable(withDefaults.defaultOpen);\n    const open = overridable(openWritable, withDefaults?.onOpenChange);\n    const activeTrigger = writable(null);\n    const ids = toWritableStores({ ...generateIds(popoverIdParts), ...withDefaults.ids });\n    safeOnMount(() => {\n        activeTrigger.set(document.getElementById(get(ids.trigger)));\n    });\n    function handleClose() {\n        open.set(false);\n        const triggerEl = document.getElementById(get(ids.trigger));\n        handleFocus({ prop: get(closeFocus), defaultEl: triggerEl });\n    }\n    const isVisible = derivedVisible({ open, activeTrigger, forceVisible });\n    const content = builder(name('content'), {\n        stores: [isVisible, portal, ids.content],\n        returned: ([$isVisible, $portal, $contentId]) => {\n            return {\n                hidden: $isVisible && isBrowser ? undefined : true,\n                tabindex: -1,\n                style: styleToString({\n                    display: $isVisible ? undefined : 'none',\n                }),\n                id: $contentId,\n                'data-state': $isVisible ? 'open' : 'closed',\n                'data-portal': $portal ? '' : undefined,\n            };\n        },\n        action: (node) => {\n            let unsubPopper = noop;\n            const unsubDerived = effect([\n                isVisible,\n                activeTrigger,\n                positioning,\n                disableFocusTrap,\n                closeOnEscape,\n                closeOnOutsideClick,\n                portal,\n            ], ([$isVisible, $activeTrigger, $positioning, $disableFocusTrap, $closeOnEscape, $closeOnOutsideClick, $portal,]) => {\n                unsubPopper();\n                if (!$isVisible || !$activeTrigger)\n                    return;\n                const popper = usePopper(node, {\n                    anchorElement: $activeTrigger,\n                    open,\n                    options: {\n                        floating: $positioning,\n                        focusTrap: $disableFocusTrap\n                            ? null\n                            : {\n                                returnFocusOnDeactivate: false,\n                                clickOutsideDeactivates: true,\n                                escapeDeactivates: true,\n                            },\n                        clickOutside: $closeOnOutsideClick\n                            ? {\n                                handler: handleClickOutside,\n                            }\n                            : null,\n                        escapeKeydown: $closeOnEscape\n                            ? {\n                                handler: () => {\n                                    handleClose();\n                                },\n                            }\n                            : null,\n                        portal: getPortalDestination(node, $portal),\n                    },\n                });\n                if (popper && popper.destroy) {\n                    unsubPopper = popper.destroy;\n                }\n            });\n            return {\n                destroy() {\n                    unsubDerived();\n                    unsubPopper();\n                },\n            };\n        },\n    });\n    function toggleOpen(triggerEl) {\n        open.update((prev) => {\n            return !prev;\n        });\n        if (triggerEl) {\n            activeTrigger.set(triggerEl);\n        }\n    }\n    function handleClickOutside(e) {\n        const target = e.target;\n        const triggerEl = document.getElementById(get(ids.trigger));\n        if (triggerEl && isElement(target)) {\n            if (target === triggerEl || triggerEl.contains(target))\n                return;\n        }\n        handleClose();\n    }\n    const trigger = builder(name('trigger'), {\n        stores: [open, ids.content, ids.trigger],\n        returned: ([$open, $contentId, $triggerId]) => {\n            return {\n                role: 'button',\n                'aria-haspopup': 'dialog',\n                'aria-expanded': $open,\n                'data-state': $open ? 'open' : 'closed',\n                'aria-controls': $contentId,\n                id: $triggerId,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                toggleOpen(node);\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                if (e.key !== kbd.ENTER && e.key !== kbd.SPACE)\n                    return;\n                e.preventDefault();\n                toggleOpen(node);\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const arrow = builder(name('arrow'), {\n        stores: arrowSize,\n        returned: ($arrowSize) => ({\n            'data-arrow': true,\n            style: styleToString({\n                position: 'absolute',\n                width: `var(--arrow-size, ${$arrowSize}px)`,\n                height: `var(--arrow-size, ${$arrowSize}px)`,\n            }),\n        }),\n    });\n    const close = builder(name('close'), {\n        returned: () => ({\n            type: 'button',\n        }),\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', (e) => {\n                if (e.defaultPrevented)\n                    return;\n                handleClose();\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                if (e.defaultPrevented)\n                    return;\n                if (e.key !== kbd.ENTER && e.key !== kbd.SPACE)\n                    return;\n                e.preventDefault();\n                toggleOpen();\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    effect([open, activeTrigger, preventScroll], ([$open, $activeTrigger, $preventScroll]) => {\n        if (!isBrowser)\n            return;\n        const unsubs = [];\n        if ($open) {\n            if (!$activeTrigger) {\n                tick().then(() => {\n                    const triggerEl = document.getElementById(get(ids.trigger));\n                    if (!isHTMLElement(triggerEl))\n                        return;\n                    activeTrigger.set(triggerEl);\n                });\n            }\n            if ($preventScroll) {\n                unsubs.push(removeScroll());\n            }\n            const triggerEl = $activeTrigger ?? document.getElementById(get(ids.trigger));\n            handleFocus({ prop: get(openFocus), defaultEl: triggerEl });\n        }\n        return () => {\n            unsubs.forEach((unsub) => unsub());\n        };\n    });\n    return {\n        ids,\n        elements: {\n            trigger,\n            content,\n            arrow,\n            close,\n        },\n        states: {\n            open,\n        },\n        options,\n    };\n}\n", "import { builder, createElHelpers, omit, overridable, toWritableStores, } from '../../internal/helpers/index.js';\nimport { writable } from 'svelte/store';\nconst defaults = {\n    defaultValue: 0,\n    max: 100,\n};\nconst { name } = createElHelpers('progress');\nexport const createProgress = (props) => {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'value'));\n    const { max } = options;\n    const valueWritable = withDefaults.value ?? writable(withDefaults.defaultValue);\n    const value = overridable(valueWritable, withDefaults?.onValueChange);\n    const root = builder(name(), {\n        stores: [value, max],\n        returned: ([$value, $max]) => {\n            return {\n                value: $value,\n                max: $max,\n                role: 'meter',\n                'aria-valuemin': 0,\n                'aria-valuemax': $max,\n                'aria-valuenow': $value,\n                'data-value': $value,\n                'data-state': $value === null ? 'indeterminate' : $value === $max ? 'complete' : 'loading',\n                'data-max': $max,\n            };\n        },\n    });\n    return {\n        elements: {\n            root,\n        },\n        states: {\n            value,\n        },\n        options,\n    };\n};\n", "import { addEventListener, addMeltEventListener, builder, createElHelpers, disabledAttr, effect, executeCallbacks, getDirectionalKeys, getElemDirection, hiddenInputAttrs, isHTMLElement, kbd, omit, overridable, toWritableStores, } from '../../internal/helpers/index.js';\nimport { safeOnMount } from '../../internal/helpers/lifecycle.js';\nimport { derived, get, writable } from 'svelte/store';\nconst defaults = {\n    orientation: 'vertical',\n    loop: true,\n    disabled: false,\n    required: false,\n    defaultValue: undefined,\n};\nconst { name, selector } = createElHelpers('radio-group');\nexport function createRadioGroup(props) {\n    const withDefaults = { ...defaults, ...props };\n    // options\n    const options = toWritableStores(omit(withDefaults, 'value'));\n    const { disabled, required, loop, orientation } = options;\n    const valueWritable = withDefaults.value ?? writable(withDefaults.defaultValue);\n    const value = overridable(valueWritable, withDefaults?.onValueChange);\n    /** Lifecycle & Effects */\n    const focusedHistory = {\n        prev: null,\n        curr: null,\n    };\n    safeOnMount(() => {\n        return addEventListener(document, 'focus', (e) => {\n            const focusedItem = e.target;\n            if (!isHTMLElement(focusedItem))\n                return;\n            focusedHistory.prev = focusedHistory.curr;\n            focusedHistory.curr = focusedItem;\n        });\n    });\n    let hasActiveTabIndex = false;\n    effect(value, ($value) => {\n        if ($value === undefined) {\n            hasActiveTabIndex = false;\n        }\n        else {\n            hasActiveTabIndex = true;\n        }\n    });\n    /* Helpers */\n    const selectItem = (item) => {\n        const disabled = item.dataset.disabled === 'true';\n        const itemValue = item.dataset.value;\n        if (disabled || itemValue === undefined)\n            return;\n        value.set(itemValue);\n    };\n    /** Elements */\n    const root = builder(name(), {\n        stores: [required, orientation],\n        returned: ([$required, $orientation]) => {\n            return {\n                role: 'radiogroup',\n                'aria-required': $required,\n                'data-orientation': $orientation,\n            };\n        },\n    });\n    const item = builder(name('item'), {\n        stores: [value, orientation, disabled],\n        returned: ([$value, $orientation, $disabled]) => {\n            return (props) => {\n                const itemValue = typeof props === 'string' ? props : props.value;\n                const argDisabled = typeof props === 'string' ? false : !!props.disabled;\n                const disabled = $disabled || argDisabled;\n                const checked = $value === itemValue;\n                const tabindex = !hasActiveTabIndex ? 0 : checked ? 0 : -1;\n                hasActiveTabIndex = true;\n                return {\n                    disabled,\n                    'data-value': itemValue,\n                    'data-orientation': $orientation,\n                    'data-disabled': disabledAttr(disabled),\n                    'data-state': checked ? 'checked' : 'unchecked',\n                    'aria-checked': checked,\n                    type: 'button',\n                    role: 'radio',\n                    tabindex,\n                };\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                selectItem(node);\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                const el = e.currentTarget;\n                if (!isHTMLElement(el))\n                    return;\n                const root = el.closest(selector());\n                if (!isHTMLElement(root))\n                    return;\n                const items = Array.from(root.querySelectorAll(selector('item'))).filter((el) => isHTMLElement(el));\n                const currentIndex = items.indexOf(el);\n                const dir = getElemDirection(root);\n                const { nextKey, prevKey } = getDirectionalKeys(dir, get(orientation));\n                const $loop = get(loop);\n                let itemToFocus = null;\n                if (e.key === nextKey) {\n                    e.preventDefault();\n                    const nextIndex = currentIndex + 1;\n                    if (nextIndex >= items.length && $loop) {\n                        itemToFocus = items[0];\n                    }\n                    else {\n                        itemToFocus = items[nextIndex];\n                    }\n                }\n                else if (e.key === prevKey) {\n                    e.preventDefault();\n                    const prevIndex = currentIndex - 1;\n                    if (prevIndex < 0 && $loop) {\n                        itemToFocus = items[items.length - 1];\n                    }\n                    else {\n                        itemToFocus = items[prevIndex];\n                    }\n                }\n                else if (e.key === kbd.HOME) {\n                    e.preventDefault();\n                    itemToFocus = items[0];\n                }\n                else if (e.key === kbd.END) {\n                    e.preventDefault();\n                    itemToFocus = items[items.length - 1];\n                }\n                if (itemToFocus) {\n                    itemToFocus.focus();\n                    selectItem(itemToFocus);\n                }\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const hiddenInput = builder(name('hidden-input'), {\n        stores: [disabled, value, required],\n        returned: ([$disabled, $value, $required]) => {\n            return {\n                ...hiddenInputAttrs,\n                disabled: disabledAttr($disabled),\n                value: $value,\n                required: $required,\n            };\n        },\n        action: (_node) => {\n            _node;\n            // no-op, just to enforce the type of the element\n        },\n    });\n    const isChecked = derived(value, ($value) => {\n        return (itemValue) => {\n            return $value === itemValue;\n        };\n    });\n    return {\n        elements: {\n            root,\n            item,\n            hiddenInput,\n        },\n        states: {\n            value,\n        },\n        helpers: {\n            isChecked,\n        },\n        options,\n    };\n}\n", "import { addMeltEventListener, builder, createElHelpers, effect, generateIds, isBrowser, isHTMLElement, kbd, toWritableStores, omit, executeCallbacks, styleToString, overridable, isValidIndex, } from '../../internal/helpers/index.js';\nimport { derived, get, writable } from 'svelte/store';\nimport { tick } from 'svelte';\nimport { getAnnouncer, isBefore, isBetweenInclusive, toDate, dateStore, createFormatter, getDefaultDate, parseStringToDateValue, areAllDaysBetweenValid, isCalendarCell, createMonths, getSelectableCells, isAfter, setPlaceholderToNodeValue, } from '../../internal/helpers/date/index.js';\nimport { getLocalTimeZone, isToday, isSameMonth, isSameDay, } from '@internationalized/date';\nconst defaults = {\n    isDateDisabled: undefined,\n    isDateUnavailable: undefined,\n    value: undefined,\n    defaultValue: {\n        start: undefined,\n        end: undefined,\n    },\n    preventDeselect: false,\n    numberOfMonths: 1,\n    pagedNavigation: false,\n    weekStartsOn: 0,\n    fixedWeeks: false,\n    calendarLabel: 'Event Date',\n    locale: 'en',\n    minValue: undefined,\n    maxValue: undefined,\n    disabled: false,\n    readonly: false,\n    weekdayFormat: 'narrow',\n};\nconst { name } = createElHelpers('calendar');\nexport const rangeCalendarIdParts = ['calendar', 'accessibleHeading'];\nexport function createRangeCalendar(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores({\n        ...omit(withDefaults, 'value', 'placeholder'),\n    });\n    const { preventDeselect, numberOfMonths, pagedNavigation, weekStartsOn, fixedWeeks, calendarLabel, locale, minValue, maxValue, disabled, readonly, weekdayFormat, } = options;\n    const ids = toWritableStores({ ...generateIds(rangeCalendarIdParts), ...withDefaults.ids });\n    const defaultDate = getDefaultDate({\n        defaultValue: withDefaults.defaultValue?.start,\n        defaultPlaceholder: withDefaults.defaultPlaceholder,\n    });\n    const formatter = createFormatter(get(locale));\n    const valueWritable = withDefaults.value ?? writable(withDefaults.defaultValue);\n    const value = overridable(valueWritable, withDefaults.onValueChange);\n    const defaultStart = withDefaults.value ? get(withDefaults.value)?.start : undefined;\n    const startValue = writable(defaultStart ?? withDefaults.defaultValue?.start);\n    const defaultEnd = withDefaults.value ? get(withDefaults.value)?.end : undefined;\n    const endValue = writable(defaultEnd ?? withDefaults.defaultValue?.end);\n    const placeholderWritable = withDefaults.placeholder ?? writable(withDefaults.defaultPlaceholder ?? defaultDate);\n    const placeholder = dateStore(overridable(placeholderWritable, withDefaults.onPlaceholderChange), withDefaults.defaultPlaceholder ?? defaultDate);\n    const focusedValue = writable(null);\n    const lastPressedDateValue = writable(null);\n    const months = writable(createMonths({\n        dateObj: get(placeholder),\n        weekStartsOn: withDefaults.weekStartsOn,\n        locale: withDefaults.locale,\n        fixedWeeks: withDefaults.fixedWeeks,\n        numberOfMonths: withDefaults.numberOfMonths,\n    }));\n    /**\n     * A derived store that maintains the currently visible months in the calendar,\n     * which we use to determine how keyboard navigation and if we should apply\n     * `data-outside-month` to cells.\n     */\n    const visibleMonths = derived([months], ([$months]) => {\n        return $months.map((month) => {\n            return month.value;\n        });\n    });\n    const isOutsideVisibleMonths = derived([visibleMonths], ([$visibleMonths]) => {\n        return (date) => {\n            return !$visibleMonths.some((month) => isSameMonth(date, month));\n        };\n    });\n    const isDateDisabled = derived([options.isDateDisabled, minValue, maxValue], ([$isDateDisabled, $minValue, $maxValue]) => {\n        return (date) => {\n            if ($isDateDisabled?.(date))\n                return true;\n            if ($minValue && isBefore(date, $minValue))\n                return true;\n            if ($maxValue && isAfter(date, $maxValue))\n                return true;\n            return false;\n        };\n    });\n    const isDateUnavailable = derived([options.isDateUnavailable], ([$isDateUnavailable]) => {\n        return (date) => {\n            if ($isDateUnavailable?.(date))\n                return true;\n            return false;\n        };\n    });\n    const isStartInvalid = derived([startValue, isDateUnavailable, isDateDisabled], ([$startValue, $isDateUnavailable, $isDateDisabled]) => {\n        if (!$startValue)\n            return false;\n        return $isDateUnavailable($startValue) || $isDateDisabled($startValue);\n    });\n    const isEndInvalid = derived([endValue, isDateUnavailable, isDateDisabled], ([$endValue, $isDateUnavailable, $isDateDisabled]) => {\n        if (!$endValue)\n            return false;\n        return $isDateUnavailable($endValue) || $isDateDisabled($endValue);\n    });\n    const isInvalid = derived([startValue, endValue, isEndInvalid, isStartInvalid], ([$startValue, $endValue, $isEndInvalid, $isStartInvalid]) => {\n        if ($isStartInvalid || $isEndInvalid) {\n            return true;\n        }\n        if ($endValue && $startValue && isBefore($endValue, $startValue)) {\n            return true;\n        }\n        return false;\n    });\n    const isNextButtonDisabled = derived([months, maxValue, disabled], ([$months, $maxValue, $disabled]) => {\n        if (!$maxValue || !$months.length)\n            return false;\n        if ($disabled)\n            return true;\n        const lastMonthInView = $months[$months.length - 1].value;\n        const firstMonthOfNextPage = lastMonthInView.add({ months: 1 }).set({ day: 1 });\n        return isAfter(firstMonthOfNextPage, $maxValue);\n    });\n    const isPrevButtonDisabled = derived([months, minValue, disabled], ([$months, $minValue, $disabled]) => {\n        if (!$minValue || !$months.length)\n            return false;\n        if ($disabled)\n            return true;\n        const firstMonthInView = $months[0].value;\n        const lastMonthOfPrevPage = firstMonthInView.subtract({ months: 1 }).set({ day: 35 });\n        return isBefore(lastMonthOfPrevPage, $minValue);\n    });\n    let announcer = getAnnouncer();\n    const headingValue = derived([months, locale], ([$months, $locale]) => {\n        if (!$months.length)\n            return '';\n        if ($locale !== formatter.getLocale()) {\n            formatter.setLocale($locale);\n        }\n        if ($months.length === 1) {\n            const month = toDate($months[0].value);\n            return `${formatter.fullMonthAndYear(month)}`;\n        }\n        const startMonth = toDate($months[0].value);\n        const endMonth = toDate($months[$months.length - 1].value);\n        const startMonthName = formatter.fullMonth(startMonth);\n        const endMonthName = formatter.fullMonth(endMonth);\n        const startMonthYear = formatter.fullYear(startMonth);\n        const endMonthYear = formatter.fullYear(endMonth);\n        const content = startMonthYear === endMonthYear\n            ? `${startMonthName} - ${endMonthName} ${endMonthYear}`\n            : `${startMonthName} ${startMonthYear} - ${endMonthName} ${endMonthYear}`;\n        return content;\n    });\n    const fullCalendarLabel = derived([headingValue, calendarLabel], ([$headingValue, $calendarLabel]) => {\n        return `${$calendarLabel}, ${$headingValue}`;\n    });\n    const calendar = builder(name(), {\n        stores: [fullCalendarLabel, isInvalid, ids.calendar, disabled, readonly],\n        returned: ([$fullCalendarLabel, $isInvalid, $calendarId, $disabled, $readonly]) => {\n            return {\n                id: $calendarId,\n                role: 'application',\n                'aria-label': $fullCalendarLabel,\n                'data-invalid': $isInvalid ? '' : undefined,\n                'data-disabled': $disabled ? '' : undefined,\n                'data-readonly': $readonly ? '' : undefined,\n            };\n        },\n        action: (node) => {\n            /**\n             * Create the accessible heading for the calendar\n             * when the grid is mounted. The label is updated\n             * via an effect when the active date or label changes.\n             */\n            createAccessibleHeading(node, get(fullCalendarLabel));\n            announcer = getAnnouncer();\n            const unsubKb = addMeltEventListener(node, 'keydown', handleCalendarKeydown);\n            return {\n                destroy() {\n                    unsubKb();\n                },\n            };\n        },\n    });\n    const heading = builder(name('heading'), {\n        stores: [disabled],\n        returned: ([$disabled]) => {\n            return {\n                'aria-hidden': true,\n                'data-disabled': $disabled ? '' : undefined,\n            };\n        },\n    });\n    const grid = builder(name('grid'), {\n        stores: [readonly, disabled],\n        returned: ([$readonly, $disabled]) => ({\n            tabindex: -1,\n            role: 'grid',\n            'aria-readonly': $readonly ? 'true' : undefined,\n            'aria-disabled': $disabled ? 'true' : undefined,\n            'data-readonly': $readonly ? '' : undefined,\n            'data-disabled': $disabled ? '' : undefined,\n        }),\n    });\n    const prevButton = builder(name('prevButton'), {\n        stores: [isPrevButtonDisabled],\n        returned: ([$isPrevButtonDisabled]) => {\n            const disabled = $isPrevButtonDisabled;\n            return {\n                role: 'button',\n                'aria-label': 'Previous',\n                'aria-disabled': disabled ? 'true' : undefined,\n                disabled: disabled ? true : undefined,\n                'data-disabled': disabled ? '' : undefined,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                prevPage();\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const nextButton = builder(name('nextButton'), {\n        stores: [isNextButtonDisabled],\n        returned: ([$isNextButtonDisabled]) => {\n            const disabled = $isNextButtonDisabled;\n            return {\n                role: 'button',\n                'aria-label': 'Next',\n                'aria-disabled': disabled ? 'true' : undefined,\n                disabled: disabled ? true : undefined,\n                'data-disabled': disabled ? '' : undefined,\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                nextPage();\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const isSelectionStart = derived([startValue], ([$startValue]) => {\n        return (date) => {\n            if (!$startValue)\n                return false;\n            return isSameDay($startValue, date);\n        };\n    });\n    const isSelectionEnd = derived([endValue], ([$endValue]) => {\n        return (date) => {\n            if (!$endValue)\n                return false;\n            return isSameDay($endValue, date);\n        };\n    });\n    const isSelected = derived([startValue, endValue], ([$startValue, $endValue]) => {\n        return (date) => {\n            if ($startValue && isSameDay($startValue, date))\n                return true;\n            if ($endValue && isSameDay($endValue, date))\n                return true;\n            if ($endValue && $startValue) {\n                return isBetweenInclusive(date, $startValue, $endValue);\n            }\n            return false;\n        };\n    });\n    const highlightedRange = derived([startValue, endValue, focusedValue, isDateDisabled, isDateUnavailable], ([$startValue, $endValue, $focusedValue, $isDateDisabled, $isDateUnavailable]) => {\n        if ($startValue && $endValue)\n            return null;\n        if (!$startValue || !$focusedValue)\n            return null;\n        const isStartBeforeFocused = isBefore($startValue, $focusedValue);\n        const start = isStartBeforeFocused ? $startValue : $focusedValue;\n        const end = isStartBeforeFocused ? $focusedValue : $startValue;\n        if (isSameDay(start.add({ days: 1 }), end)) {\n            return {\n                start: start,\n                end: end,\n            };\n        }\n        const isValid = areAllDaysBetweenValid(start, end, $isDateUnavailable, $isDateDisabled);\n        if (isValid) {\n            return {\n                start: start,\n                end: end,\n            };\n        }\n        return null;\n    });\n    /**\n     * An individual date cell in the calendar grid, which represents a\n     * single day in the month.\n     */\n    const cell = builder(name('cell'), {\n        stores: [\n            isSelected,\n            isSelectionEnd,\n            isSelectionStart,\n            highlightedRange,\n            isDateDisabled,\n            isDateUnavailable,\n            placeholder,\n            isOutsideVisibleMonths,\n        ],\n        returned: ([$isSelected, $isSelectionEnd, $isSelectionStart, $highlightedRange, $isDateDisabled, $isDateUnavailable, $placeholder, $isOutsideVisibleMonths,]) => {\n            return (cellValue, monthValue) => {\n                const cellDate = toDate(cellValue);\n                const isDisabled = $isDateDisabled(cellValue);\n                const isUnavailable = $isDateUnavailable(cellValue);\n                const isDateToday = isToday(cellValue, getLocalTimeZone());\n                const isOutsideMonth = !isSameMonth(cellValue, monthValue);\n                const isFocusedDate = isSameDay(cellValue, $placeholder);\n                const isOutsideVisibleMonths = $isOutsideVisibleMonths(cellValue);\n                const isSelectedDate = $isSelected(cellValue);\n                const isSelectionStart = $isSelectionStart(cellValue);\n                const isSelectionEnd = $isSelectionEnd(cellValue);\n                const isHighlighted = $highlightedRange\n                    ? isBetweenInclusive(cellValue, $highlightedRange.start, $highlightedRange.end)\n                    : false;\n                const labelText = formatter.custom(cellDate, {\n                    weekday: 'long',\n                    month: 'long',\n                    day: 'numeric',\n                    year: 'numeric',\n                });\n                return {\n                    role: 'button',\n                    'aria-label': labelText,\n                    'aria-selected': isSelectedDate ? true : undefined,\n                    'aria-disabled': isOutsideMonth || isDisabled || isUnavailable ? true : undefined,\n                    'data-selected': isSelectedDate ? true : undefined,\n                    'data-selection-start': isSelectionStart ? true : undefined,\n                    'data-selection-end': isSelectionEnd ? true : undefined,\n                    'data-value': cellValue.toString(),\n                    'data-disabled': isDisabled || isOutsideMonth ? '' : undefined,\n                    'data-unavailable': isUnavailable ? '' : undefined,\n                    'data-today': isDateToday ? '' : undefined,\n                    'data-outside-month': isOutsideMonth ? '' : undefined,\n                    'data-outside-visible-months': isOutsideVisibleMonths ? '' : undefined,\n                    'data-focused': isFocusedDate ? '' : undefined,\n                    'data-highlighted': isHighlighted ? '' : undefined,\n                    tabindex: isFocusedDate ? 0 : isOutsideMonth || isDisabled ? undefined : -1,\n                };\n            };\n        },\n        action: (node) => {\n            const getElArgs = () => {\n                const value = node.getAttribute('data-value');\n                const label = node.getAttribute('data-label');\n                const disabled = node.hasAttribute('data-disabled');\n                return {\n                    value,\n                    label: label ?? node.textContent ?? null,\n                    disabled: disabled ? true : false,\n                };\n            };\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', (e) => {\n                const args = getElArgs();\n                if (args.disabled)\n                    return;\n                if (!args.value)\n                    return;\n                handleCellClick(e, parseStringToDateValue(args.value, get(placeholder)));\n            }), addMeltEventListener(node, 'mouseenter', () => {\n                const args = getElArgs();\n                if (args.disabled)\n                    return;\n                if (!args.value)\n                    return;\n                focusedValue.set(parseStringToDateValue(args.value, get(placeholder)));\n            }), addMeltEventListener(node, 'focusin', () => {\n                const args = getElArgs();\n                if (args.disabled)\n                    return;\n                if (!args.value)\n                    return;\n                focusedValue.set(parseStringToDateValue(args.value, get(placeholder)));\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    effect([locale], ([$locale]) => {\n        if (formatter.getLocale() === $locale)\n            return;\n        formatter.setLocale($locale);\n    });\n    /**\n     * Updates the displayed months based on changes in the placeholder value,\n     * which determines the months to show in the calendar.\n     */\n    effect([placeholder, weekStartsOn, locale, fixedWeeks, numberOfMonths], ([$placeholder, $weekStartsOn, $locale, $fixedWeeks, $numberOfMonths]) => {\n        if (!isBrowser || !$placeholder)\n            return;\n        const $visibleMonths = get(visibleMonths);\n        /**\n         * If the placeholder's month is already in the visible months,\n         * we don't need to do anything.\n         */\n        if ($visibleMonths.some((month) => isSameMonth(month, $placeholder))) {\n            return;\n        }\n        const defaultMonthProps = {\n            weekStartsOn: $weekStartsOn,\n            locale: $locale,\n            fixedWeeks: $fixedWeeks,\n            numberOfMonths: $numberOfMonths,\n        };\n        months.set(createMonths({\n            ...defaultMonthProps,\n            dateObj: $placeholder,\n        }));\n    });\n    /**\n     * Update the accessible heading's text content when the\n     * `fullCalendarLabel` store changes.\n     */\n    effect([fullCalendarLabel], ([$fullCalendarLabel]) => {\n        if (!isBrowser)\n            return;\n        const node = document.getElementById(get(ids.accessibleHeading));\n        if (!isHTMLElement(node))\n            return;\n        node.textContent = $fullCalendarLabel;\n    });\n    effect([startValue], ([$startValue]) => {\n        if ($startValue && get(placeholder) !== $startValue) {\n            placeholder.set($startValue);\n        }\n    });\n    /**\n     * A derived store whose value is an array days of the week\n     * for the current locale and calendar view.\n     *\n     * This remains in sync with the `weekStartsOn` prop, so if it is\n     * changed, this store and the calendar will update accordingly.\n     *\n     * If you prefer to format/render the days of the week yourself,\n     * you can do so by accessing the first week of the first month,\n     * and mapping over the dates to get/format each day of the week.\n     */\n    const weekdays = derived([months, weekdayFormat, locale], ([$months, $weekdayFormat, _]) => {\n        if (!$months.length)\n            return [];\n        return $months[0].weeks[0].map((date) => {\n            return formatter.dayOfWeek(toDate(date), $weekdayFormat);\n        });\n    });\n    /**\n     * Creates an accessible heading for the calendar so when it\n     * is focused by a screen reader, the date range being displayed\n     * is announced.\n     */\n    function createAccessibleHeading(node, label) {\n        if (!isBrowser)\n            return;\n        const div = document.createElement('div');\n        div.style.cssText = styleToString({\n            border: '0px',\n            clip: 'rect(0px, 0px, 0px, 0px)',\n            'clip-path': 'inset(50%)',\n            height: '1px',\n            margin: '-1px',\n            overflow: 'hidden',\n            padding: '0px',\n            position: 'absolute',\n            'white-space': 'nowrap',\n            width: '1px',\n        });\n        const h2 = document.createElement('div');\n        h2.textContent = label;\n        h2.id = get(ids.accessibleHeading);\n        h2.role = 'heading';\n        h2.ariaLevel = '2';\n        node.insertBefore(div, node.firstChild);\n        div.appendChild(h2);\n    }\n    /**\n     * Navigate to the next page of the calendar.\n     *\n     * @remarks\n     * If using paged navigation, this will move the calendar forward\n     * by the number of months specified in the `numberOfMonths` prop.\n     * If not using paged navigation, this will move the calendar forward\n     * by one month.\n     *\n     * @example\n     * ```svelte\n     * <script>\n     * \timport { createCalendar } from '@melt-ui/svelte';\n     *  import { prev } from '../../internal/helpers/array'\n     * \tconst { { ... }, helpers: { nextPage } } = createCalendar()\n     * </script>\n     *\n     * <button on:click={nextPage} aria-label=\"Next page\"></button>\n     * ```\n     */\n    function nextPage() {\n        const $months = get(months);\n        const $numberOfMonths = get(numberOfMonths);\n        if (get(pagedNavigation)) {\n            const firstMonth = $months[0].value;\n            placeholder.set(firstMonth.add({ months: $numberOfMonths }));\n        }\n        else {\n            const firstMonth = $months[0].value;\n            const newMonths = createMonths({\n                dateObj: firstMonth.add({ months: 1 }),\n                weekStartsOn: get(weekStartsOn),\n                locale: get(locale),\n                fixedWeeks: get(fixedWeeks),\n                numberOfMonths: $numberOfMonths,\n            });\n            months.set(newMonths);\n            placeholder.set(newMonths[0].value.set({ day: 1 }));\n        }\n    }\n    /**\n     * Navigate to the previous page of the calendar.\n     *\n     * @remarks\n     * A helper function to navigate to the previous page of the calendar.\n     * If using paged navigation, this will move the calendar backwards\n     * by the number of months specified in the `numberOfMonths` prop.\n     * If not using paged navigation, this will move the calendar backwards\n     * by one month.\n     *\n     * @example\n     * ```svelte\n     * <script>\n     * \timport { createCalendar } from '@melt-ui/svelte';\n     * \tconst { { ... }, helpers: { prevPage } } = createCalendar()\n     * </script>\n     *\n     * <button on:click={prevPage} aria-label=\"Previous page\"></button>\n     * ```\n     */\n    function prevPage() {\n        const $months = get(months);\n        const $numberOfMonths = get(numberOfMonths);\n        if (get(pagedNavigation)) {\n            const firstMonth = $months[0].value;\n            placeholder.set(firstMonth.subtract({ months: $numberOfMonths }));\n        }\n        else {\n            const firstMonth = $months[0].value;\n            const newMonths = createMonths({\n                dateObj: firstMonth.subtract({ months: 1 }),\n                weekStartsOn: get(weekStartsOn),\n                locale: get(locale),\n                fixedWeeks: get(fixedWeeks),\n                numberOfMonths: $numberOfMonths,\n            });\n            months.set(newMonths);\n            placeholder.set(newMonths[0].value.set({ day: 1 }));\n        }\n    }\n    /**\n     * Navigate to the previous year of the calendar.\n     */\n    function nextYear() {\n        placeholder.add({ years: 1 });\n    }\n    /**\n     * Navigate to the next year of the calendar.\n     */\n    function prevYear() {\n        placeholder.subtract({ years: 1 });\n    }\n    const ARROW_KEYS = [kbd.ARROW_DOWN, kbd.ARROW_UP, kbd.ARROW_LEFT, kbd.ARROW_RIGHT];\n    /**\n     * A helper function to set the year of the active date. This is\n     * useful when the user wants to have a select input to change the\n     * year of the calendar.\n     */\n    function setYear(year) {\n        placeholder.setDate({ year: year });\n    }\n    /**\n     * A helper function to set the month of the active date. This is\n     * useful when the user wants to have a select input to change the\n     * month of the calendar.\n     */\n    function setMonth(month) {\n        if (month < 0 || month > 11)\n            throw new Error('Month must be between 0 and 11');\n        placeholder.setDate({ month: month });\n    }\n    function handleCellClick(e, date) {\n        const $isDateDisabled = get(isDateDisabled);\n        const $isDateUnavailable = get(isDateUnavailable);\n        if ($isDateDisabled(date) || $isDateUnavailable(date))\n            return;\n        const $lastPressedDate = get(lastPressedDateValue);\n        lastPressedDateValue.set(date);\n        const $startValue = get(startValue);\n        const $endValue = get(endValue);\n        const $highlightedRange = get(highlightedRange);\n        if ($startValue && $highlightedRange === null) {\n            if (isSameDay($startValue, date) && !get(preventDeselect) && !$endValue) {\n                startValue.set(undefined);\n                placeholder.set(date);\n                announcer.announce('Selected date is now empty.', 'polite');\n                return;\n            }\n            else if (!$endValue) {\n                e.preventDefault();\n                if ($lastPressedDate && isSameDay($lastPressedDate, date)) {\n                    startValue.set(date);\n                    announcer.announce(`Selected Date: ${formatter.selectedDate(date, false)}`, 'polite');\n                }\n                return;\n            }\n        }\n        if ($startValue && isSameDay($startValue, date) && !get(preventDeselect) && !$endValue) {\n            startValue.set(undefined);\n            placeholder.set(date);\n            announcer.announce('Selected date is now empty.', 'polite');\n            return;\n        }\n        if (!$startValue) {\n            startValue.update(() => {\n                announcer.announce(`Selected Date: ${formatter.selectedDate(date, false)}`, 'polite');\n                return date;\n            });\n        }\n        else if (!$endValue) {\n            endValue.update(() => {\n                announcer.announce(`Selected Dates: ${formatter.selectedDate($startValue, false)} to ${formatter.selectedDate(date, false)}`, 'polite');\n                return date;\n            });\n        }\n        else if ($endValue && $startValue) {\n            endValue.set(undefined);\n            startValue.update(() => {\n                announcer.announce(`Selected Date: ${formatter.selectedDate(date, false)}`, 'polite');\n                return date;\n            });\n        }\n    }\n    const SELECT_KEYS = [kbd.ENTER, kbd.SPACE];\n    function handleCalendarKeydown(e) {\n        const currentCell = e.target;\n        if (!isCalendarCell(currentCell))\n            return;\n        if (!ARROW_KEYS.includes(e.key) && !SELECT_KEYS.includes(e.key))\n            return;\n        e.preventDefault();\n        // the cell that is currently focused\n        if (e.key === kbd.ARROW_DOWN) {\n            shiftFocus(currentCell, 7);\n        }\n        if (e.key === kbd.ARROW_UP) {\n            shiftFocus(currentCell, -7);\n        }\n        if (e.key === kbd.ARROW_LEFT) {\n            shiftFocus(currentCell, -1);\n        }\n        if (e.key === kbd.ARROW_RIGHT) {\n            shiftFocus(currentCell, 1);\n        }\n        if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n            const cellValue = currentCell.getAttribute('data-value');\n            if (!cellValue)\n                return;\n            handleCellClick(e, parseStringToDateValue(cellValue, get(placeholder)));\n        }\n    }\n    function shiftFocus(node, add) {\n        const $calendarId = get(ids.calendar);\n        const candidateCells = getSelectableCells($calendarId);\n        if (!candidateCells.length) {\n            return;\n        }\n        const index = candidateCells.indexOf(node);\n        const nextIndex = index + add;\n        /**\n         * If the next cell is within the bounds of the\n         * displayed/rendered cells, easy day, just focus it.\n         */\n        if (isValidIndex(nextIndex, candidateCells)) {\n            const nextCell = candidateCells[nextIndex];\n            setPlaceholderToNodeValue(nextCell, placeholder);\n            return nextCell.focus();\n        }\n        /**\n         * If the next cell is outside the bounds of the\n         * displayed/rendered cells, we need to updated the focused\n         * value to the prev/next month depending on the direction,\n         * and then focus the appropriate cell.\n         */\n        if (nextIndex < 0) {\n            /**\n             * Since we're in the negative index range, we need to\n             * go back a month, refetch the candidate cells within that\n             * month, and then starting at the end of that array, shift\n             * focus by the difference between the nextIndex\n             */\n            // shift the calendar back a month unless previous month is disabled\n            if (get(isPrevButtonDisabled))\n                return;\n            const $months = get(months);\n            const firstMonth = $months[0].value;\n            const $numberOfMonths = get(numberOfMonths);\n            placeholder.set(firstMonth.subtract({ months: $numberOfMonths }));\n            // Without a tick here, it seems to be too fast for\n            // the DOM to update, with the tick it works great\n            tick().then(() => {\n                const newCandidateCells = getSelectableCells($calendarId);\n                if (!newCandidateCells.length) {\n                    return;\n                }\n                // starting at the end of the array, shift focus by the nextIndex amount\n                // since in this case, nextIndex is negative, we'll convert it to a positive\n                // before subtracting it from the length of the array\n                const newIndex = newCandidateCells.length - Math.abs(nextIndex);\n                if (isValidIndex(newIndex, newCandidateCells)) {\n                    const newCell = newCandidateCells[newIndex];\n                    setPlaceholderToNodeValue(newCell, placeholder);\n                    return newCell.focus();\n                }\n            });\n        }\n        if (nextIndex >= candidateCells.length) {\n            /**\n             * Since we're in the positive index range, we need to\n             * go forward a month, refetch the candidate cells within that\n             * month, and then starting at the beginning of that array,\n             * shift focus by the nextIndex amount.\n             */\n            // shift the calendar forward a month unless next month is disabled\n            if (get(isNextButtonDisabled))\n                return;\n            const $months = get(months);\n            const firstMonth = $months[0].value;\n            const $numberOfMonths = get(numberOfMonths);\n            placeholder.set(firstMonth.add({ months: $numberOfMonths }));\n            tick().then(() => {\n                const newCandidateCells = getSelectableCells($calendarId);\n                if (!newCandidateCells.length) {\n                    return;\n                }\n                /**\n                 * We need to determine how far into the next month we need to go\n                 * to get the next index. So if we only went over the previous month\n                 * by 1, we need to go into the next month by 1 to get the right index.\n                 */\n                const newIndex = nextIndex - candidateCells.length;\n                if (isValidIndex(newIndex, newCandidateCells)) {\n                    const nextCell = newCandidateCells[newIndex];\n                    return nextCell.focus();\n                }\n            });\n        }\n    }\n    /**\n     * A helper function to determine if a date is disabled,\n     * which uses the `Matcher`(s) provided via the `disabled`\n     * prop, as well as other internal logic, such as if the\n     * date is outside of the current month.\n     *\n     * Although we set attributes on the cells themselves, this\n     * function is useful when you want to conditionally handle\n     * something outside of the cell, such as its wrapping element.\n     *\n     * @example\n     * ```svelte\n     * {#each dates as date}\n     * \t<td role=\"gridcell\" aria-disabled={$isDisabled(date)}>\n     * \t\t<!-- ... -->\n     * \t</td>\n     * {/each}\n     * ```\n     *\n     * @param date - The `DateValue` to check\n     * @returns `true` if the date is disabled, `false` otherwise\n     */\n    const _isDateDisabled = derived([isDateDisabled, placeholder, minValue, maxValue], ([$isDateDisabled, $placeholder, $minValue, $maxValue]) => {\n        return (date) => {\n            if ($isDateDisabled(date))\n                return true;\n            if ($minValue && isBefore(date, $minValue))\n                return true;\n            if ($maxValue && isAfter(date, $maxValue))\n                return true;\n            if (!isSameMonth(date, $placeholder))\n                return true;\n            return false;\n        };\n    });\n    /**\n     * Synchronize the `value` store with the individual `startValue`\n     * and `endValue` stores that are used by the individual date fields.\n     *\n     * We only want to update the `value` store when both the `startValue`\n     * and `endValue` stores are not `undefined`. This is because the\n     * `value` store is used to determine if the date field is completed,\n     * and we don't want to mark the date field as completed until both\n     * the start and end dates have been selected.\n     */\n    effect([value], ([$value]) => {\n        const $startValue = get(startValue);\n        const $endValue = get(endValue);\n        if ($value?.start && $value?.end) {\n            if ($value.start !== $startValue) {\n                startValue.set($value.start);\n            }\n            if ($value.end !== $endValue) {\n                endValue.set($value.end);\n            }\n            return;\n        }\n    });\n    effect([startValue, endValue], ([$startValue, $endValue]) => {\n        const $value = get(value);\n        if ($value && $value?.start === $startValue && $value?.end === $endValue)\n            return;\n        if ($startValue && $endValue) {\n            value.update((prev) => {\n                if (prev?.start === $startValue && prev?.end === $endValue) {\n                    return prev;\n                }\n                if (isBefore($endValue, $startValue)) {\n                    return {\n                        start: $endValue,\n                        end: $startValue,\n                    };\n                }\n                else {\n                    return {\n                        start: $startValue,\n                        end: $endValue,\n                    };\n                }\n            });\n        }\n        else if ($value && $value.start && $value.end) {\n            value.set({\n                start: undefined,\n                end: undefined,\n            });\n        }\n    });\n    return {\n        elements: {\n            calendar,\n            heading,\n            grid,\n            cell,\n            nextButton,\n            prevButton,\n        },\n        states: {\n            placeholder: placeholder.toWritable(),\n            months,\n            weekdays,\n            headingValue,\n            value,\n            startValue,\n            endValue,\n        },\n        helpers: {\n            nextPage,\n            prevPage,\n            nextYear,\n            prevYear,\n            setYear,\n            setMonth,\n            isDateDisabled: _isDateDisabled,\n            isDateUnavailable,\n        },\n        options,\n        ids,\n    };\n}\n", "import { builder, createElHelpers } from '../../internal/helpers/index.js';\nimport { derived } from 'svelte/store';\nimport { createListbox } from '../listbox/create.js';\nconst { name } = createElHelpers('select');\nexport function createSelect(props) {\n    const listbox = createListbox({ ...props, builder: 'select' });\n    const group = builder(name('group'), {\n        returned: () => {\n            return (groupId) => ({\n                role: 'group',\n                'aria-labelledby': groupId,\n            });\n        },\n    });\n    const groupLabel = builder(name('group-label'), {\n        returned: () => {\n            return (groupId) => ({\n                id: groupId,\n            });\n        },\n    });\n    const selectedLabel = derived(listbox.states.selected, ($selected) => {\n        if (Array.isArray($selected)) {\n            return $selected.map((o) => o.label).join(', ');\n        }\n        return $selected?.label ?? '';\n    });\n    return {\n        ...listbox,\n        elements: {\n            ...listbox.elements,\n            group,\n            groupLabel,\n        },\n        states: {\n            ...listbox.states,\n            selectedLabel,\n        },\n    };\n}\n", "import { builder, toWritableStores } from '../../internal/helpers/index.js';\nconst defaults = {\n    orientation: 'horizontal',\n    decorative: false,\n};\nexport const createSeparator = (props) => {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(withDefaults);\n    const { orientation, decorative } = options;\n    const root = builder('separator', {\n        stores: [orientation, decorative],\n        returned: ([$orientation, $decorative]) => {\n            const ariaOrientation = $orientation === 'vertical' ? $orientation : undefined;\n            return {\n                role: $decorative ? 'none' : 'separator',\n                'aria-orientation': ariaOrientation,\n                'aria-hidden': $decorative,\n                'data-orientation': $orientation,\n            };\n        },\n    });\n    return {\n        elements: {\n            root,\n        },\n        options,\n    };\n};\n", "import { addEventListener, addMeltEventListener, builder, createElHelpers, disabledAttr, effect, executeCallbacks, generateIds, getElementByMeltId, isBrowser, isHTMLElement, kbd, omit, overridable, snapValueToStep, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { derived, get, writable } from 'svelte/store';\nconst defaults = {\n    defaultValue: [],\n    min: 0,\n    max: 100,\n    step: 1,\n    orientation: 'horizontal',\n    dir: 'ltr',\n    disabled: false,\n};\nconst { name } = createElHelpers('slider');\nexport const createSlider = (props) => {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'value', 'onValueChange', 'defaultValue'));\n    const { min, max, step, orientation, dir, disabled } = options;\n    const valueWritable = withDefaults.value ?? writable(withDefaults.defaultValue);\n    const value = overridable(valueWritable, withDefaults?.onValueChange);\n    const isActive = writable(false);\n    const currentThumbIndex = writable(0);\n    const activeThumb = writable(null);\n    const meltIds = generateIds(['root']);\n    // Helpers\n    const updatePosition = (val, index) => {\n        value.update((prev) => {\n            if (!prev)\n                return [val];\n            if (prev[index] === val)\n                return prev;\n            const newValue = [...prev];\n            const direction = newValue[index] > val ? -1 : +1;\n            function swap() {\n                newValue[index] = newValue[index + direction];\n                newValue[index + direction] = val;\n                const thumbs = getAllThumbs();\n                if (thumbs) {\n                    thumbs[index + direction].focus();\n                    activeThumb.set({ thumb: thumbs[index + direction], index: index + direction });\n                }\n            }\n            if (direction === -1 && val < newValue[index - 1]) {\n                swap();\n                return newValue;\n            }\n            else if (direction === 1 && val > newValue[index + 1]) {\n                swap();\n                return newValue;\n            }\n            const $min = get(min);\n            const $max = get(max);\n            const $step = get(step);\n            newValue[index] = snapValueToStep(val, $min, $max, $step);\n            return newValue;\n        });\n    };\n    const getAllThumbs = () => {\n        const root = getElementByMeltId(meltIds.root);\n        if (!root)\n            return null;\n        return Array.from(root.querySelectorAll('[data-melt-part=\"thumb\"]')).filter((thumb) => isHTMLElement(thumb));\n    };\n    // States\n    const position = derived([min, max], ([$min, $max]) => {\n        return (val) => {\n            const pos = ((val - $min) / ($max - $min)) * 100;\n            return pos;\n        };\n    });\n    const direction = derived([orientation, dir], ([$orientation, $dir]) => {\n        if ($orientation === 'horizontal') {\n            return $dir === 'rtl' ? 'rl' : 'lr';\n        }\n        else {\n            return $dir === 'rtl' ? 'tb' : 'bt';\n        }\n    });\n    const ticks = derived([min, max, step], ([$min, $max, $step]) => {\n        const difference = $max - $min;\n        // min = 0, max = 8, step = 3:\n        // ----------------------------\n        // 0, 3, 6\n        // (8 - 0) / 3 = 2.666... = 3 ceiled\n        let count = Math.ceil(difference / $step);\n        // min = 0, max = 9, step = 3:\n        // ---------------------------\n        // 0, 3, 6, 9\n        // (9 - 0) / 3 = 3\n        // We need to add 1 because `difference` is a multiple of `step`.\n        if (difference % $step == 0) {\n            count++;\n        }\n        return count;\n    });\n    // Elements\n    const root = builder(name(), {\n        stores: [disabled, orientation, dir],\n        returned: ([$disabled, $orientation, $dir]) => {\n            return {\n                dir: $dir,\n                disabled: disabledAttr($disabled),\n                'data-disabled': disabledAttr($disabled),\n                'data-orientation': $orientation,\n                style: $disabled\n                    ? undefined\n                    : `touch-action: ${$orientation === 'horizontal' ? 'pan-y' : 'pan-x'}`,\n                'data-melt-id': meltIds.root,\n            };\n        },\n    });\n    const range = builder(name('range'), {\n        stores: [value, direction, position],\n        returned: ([$value, $direction, $position]) => {\n            const minimum = $value.length > 1 ? $position(Math.min(...$value) ?? 0) : 0;\n            const maximum = 100 - $position(Math.max(...$value) ?? 0);\n            const style = {\n                position: 'absolute',\n            };\n            switch ($direction) {\n                case 'lr': {\n                    style.left = `${minimum}%`;\n                    style.right = `${maximum}%`;\n                    break;\n                }\n                case 'rl': {\n                    style.right = `${minimum}%`;\n                    style.left = `${maximum}%`;\n                    break;\n                }\n                case 'bt': {\n                    style.bottom = `${minimum}%`;\n                    style.top = `${maximum}%`;\n                    break;\n                }\n                case 'tb': {\n                    style.top = `${minimum}%`;\n                    style.bottom = `${maximum}%`;\n                    break;\n                }\n            }\n            return {\n                style: styleToString(style),\n            };\n        },\n    });\n    const thumb = builder(name('thumb'), {\n        stores: [value, position, min, max, disabled, orientation, direction],\n        returned: ([$value, $position, $min, $max, $disabled, $orientation, $direction]) => {\n            let index = -1;\n            return () => {\n                index++;\n                const currentThumb = get(currentThumbIndex);\n                if (currentThumb < $value.length) {\n                    currentThumbIndex.update((prev) => prev + 1);\n                }\n                const thumbValue = $value[index];\n                const thumbPosition = `${$position(thumbValue)}%`;\n                const style = {\n                    position: 'absolute',\n                };\n                switch ($direction) {\n                    case 'lr': {\n                        style.left = thumbPosition;\n                        style.translate = '-50% 0';\n                        break;\n                    }\n                    case 'rl': {\n                        style.right = thumbPosition;\n                        style.translate = '50% 0';\n                        break;\n                    }\n                    case 'bt': {\n                        style.bottom = thumbPosition;\n                        style.translate = '0 50%';\n                        break;\n                    }\n                    case 'tb': {\n                        style.top = thumbPosition;\n                        style.translate = '0 -50%';\n                        break;\n                    }\n                }\n                return {\n                    role: 'slider',\n                    'aria-valuemin': $min,\n                    'aria-valuemax': $max,\n                    'aria-valuenow': thumbValue,\n                    'aria-disabled': disabledAttr($disabled),\n                    'aria-orientation': $orientation,\n                    'data-melt-part': 'thumb',\n                    'data-value': thumbValue,\n                    style: styleToString(style),\n                    tabindex: $disabled ? -1 : 0,\n                };\n            };\n        },\n        action: (node) => {\n            const unsub = addMeltEventListener(node, 'keydown', (event) => {\n                if (get(disabled))\n                    return;\n                const target = event.currentTarget;\n                if (!isHTMLElement(target))\n                    return;\n                const thumbs = getAllThumbs();\n                if (!thumbs?.length)\n                    return;\n                const index = thumbs.indexOf(target);\n                currentThumbIndex.set(index);\n                if (![\n                    kbd.ARROW_LEFT,\n                    kbd.ARROW_RIGHT,\n                    kbd.ARROW_UP,\n                    kbd.ARROW_DOWN,\n                    kbd.HOME,\n                    kbd.END,\n                ].includes(event.key)) {\n                    return;\n                }\n                event.preventDefault();\n                const $min = get(min);\n                const $max = get(max);\n                const $step = get(step);\n                const $value = get(value);\n                const $orientation = get(orientation);\n                const $direction = get(direction);\n                const thumbValue = $value[index];\n                switch (event.key) {\n                    case kbd.HOME: {\n                        updatePosition($min, index);\n                        break;\n                    }\n                    case kbd.END: {\n                        updatePosition($max, index);\n                        break;\n                    }\n                    case kbd.ARROW_LEFT: {\n                        if ($orientation !== 'horizontal')\n                            break;\n                        if (event.metaKey) {\n                            const newValue = $direction === 'rl' ? $max : $min;\n                            updatePosition(newValue, index);\n                        }\n                        else if ($direction === 'rl' && thumbValue < $max) {\n                            updatePosition(thumbValue + $step, index);\n                        }\n                        else if ($direction === 'lr' && thumbValue > $min) {\n                            updatePosition(thumbValue - $step, index);\n                        }\n                        break;\n                    }\n                    case kbd.ARROW_RIGHT: {\n                        if ($orientation !== 'horizontal')\n                            break;\n                        if (event.metaKey) {\n                            const newValue = $direction === 'rl' ? $min : $max;\n                            updatePosition(newValue, index);\n                        }\n                        else if ($direction === 'rl' && thumbValue > $min) {\n                            updatePosition(thumbValue - $step, index);\n                        }\n                        else if ($direction === 'lr' && thumbValue < $max) {\n                            updatePosition(thumbValue + $step, index);\n                        }\n                        break;\n                    }\n                    case kbd.ARROW_UP: {\n                        if (event.metaKey) {\n                            const newValue = $direction === 'tb' ? $min : $max;\n                            updatePosition(newValue, index);\n                        }\n                        else if ($direction === 'tb' && thumbValue > $min) {\n                            updatePosition(thumbValue - $step, index);\n                        }\n                        else if ($direction !== 'tb' && thumbValue < $max) {\n                            updatePosition(thumbValue + $step, index);\n                        }\n                        break;\n                    }\n                    case kbd.ARROW_DOWN: {\n                        if (event.metaKey) {\n                            const newValue = $direction === 'tb' ? $max : $min;\n                            updatePosition(newValue, index);\n                        }\n                        else if ($direction === 'tb' && thumbValue < $max) {\n                            updatePosition(thumbValue + $step, index);\n                        }\n                        else if ($direction !== 'tb' && thumbValue > $min) {\n                            updatePosition(thumbValue - $step, index);\n                        }\n                        break;\n                    }\n                }\n            });\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const tick = builder(name('tick'), {\n        stores: [ticks, value, min, max, step, direction],\n        returned: ([$ticks, $value, $min, $max, $step, $direction]) => {\n            let index = -1;\n            return () => {\n                index++;\n                // The track is divided into sections of ratio `step / (max - min)`\n                const tickPosition = `${index * ($step / ($max - $min)) * 100}%`;\n                // Offset each tick by -50% to center it, except the first and last ticks.\n                // The first tick is already positioned at the start of the slider.\n                // The last tick is offset by -100% to prevent it from being rendered outside.\n                const isFirst = index === 0;\n                const isLast = index === $ticks - 1;\n                const offsetPercentage = isFirst ? 0 : isLast ? -100 : -50;\n                const style = {\n                    position: 'absolute',\n                };\n                switch ($direction) {\n                    case 'lr': {\n                        style.left = tickPosition;\n                        style.translate = `${offsetPercentage}% 0`;\n                        break;\n                    }\n                    case 'rl': {\n                        style.right = tickPosition;\n                        style.translate = `${-offsetPercentage}% 0`;\n                        break;\n                    }\n                    case 'bt': {\n                        style.bottom = tickPosition;\n                        style.translate = `0 ${-offsetPercentage}%`;\n                        break;\n                    }\n                    case 'tb': {\n                        style.top = tickPosition;\n                        style.translate = `0 ${offsetPercentage}%`;\n                        break;\n                    }\n                }\n                const tickValue = $min + index * $step;\n                const bounded = $value.length === 1\n                    ? tickValue <= $value[0]\n                    : $value[0] <= tickValue && tickValue <= $value[$value.length - 1];\n                return {\n                    'data-bounded': bounded ? true : undefined,\n                    'data-value': tickValue,\n                    style: styleToString(style),\n                };\n            };\n        },\n    });\n    // Effects\n    effect([root, min, max, disabled, orientation, direction, step], ([$root, $min, $max, $disabled, $orientation, $direction, $step]) => {\n        if (!isBrowser || $disabled)\n            return;\n        const applyPosition = (clientXY, activeThumbIdx, start, end) => {\n            const percent = (clientXY - start) / (end - start);\n            const val = percent * ($max - $min) + $min;\n            if (val < $min) {\n                updatePosition($min, activeThumbIdx);\n            }\n            else if (val > $max) {\n                updatePosition($max, activeThumbIdx);\n            }\n            else {\n                const step = $step;\n                const min = $min;\n                const currentStep = Math.floor((val - min) / step);\n                const midpointOfCurrentStep = min + currentStep * step + step / 2;\n                const midpointOfNextStep = min + (currentStep + 1) * step + step / 2;\n                const newValue = val >= midpointOfCurrentStep && val < midpointOfNextStep\n                    ? (currentStep + 1) * step + min\n                    : currentStep * step + min;\n                if (newValue <= $max) {\n                    updatePosition(newValue, activeThumbIdx);\n                }\n            }\n        };\n        const getClosestThumb = (e) => {\n            const thumbs = getAllThumbs();\n            if (!thumbs)\n                return;\n            thumbs.forEach((thumb) => thumb.blur());\n            const distances = thumbs.map((thumb) => {\n                if ($orientation === 'horizontal') {\n                    const { left, right } = thumb.getBoundingClientRect();\n                    return Math.abs(e.clientX - (left + right) / 2);\n                }\n                else {\n                    const { top, bottom } = thumb.getBoundingClientRect();\n                    return Math.abs(e.clientY - (top + bottom) / 2);\n                }\n            });\n            const thumb = thumbs[distances.indexOf(Math.min(...distances))];\n            const index = thumbs.indexOf(thumb);\n            return { thumb, index };\n        };\n        const pointerMove = (e) => {\n            if (!get(isActive))\n                return;\n            e.preventDefault();\n            e.stopPropagation();\n            const sliderEl = getElementByMeltId($root['data-melt-id']);\n            const closestThumb = get(activeThumb);\n            if (!sliderEl || !closestThumb)\n                return;\n            closestThumb.thumb.focus();\n            const { left, right, top, bottom } = sliderEl.getBoundingClientRect();\n            switch ($direction) {\n                case 'lr': {\n                    applyPosition(e.clientX, closestThumb.index, left, right);\n                    break;\n                }\n                case 'rl': {\n                    applyPosition(e.clientX, closestThumb.index, right, left);\n                    break;\n                }\n                case 'bt': {\n                    applyPosition(e.clientY, closestThumb.index, bottom, top);\n                    break;\n                }\n                case 'tb': {\n                    applyPosition(e.clientY, closestThumb.index, top, bottom);\n                    break;\n                }\n            }\n        };\n        const pointerDown = (e) => {\n            if (e.button !== 0)\n                return;\n            const sliderEl = getElementByMeltId($root['data-melt-id']);\n            const closestThumb = getClosestThumb(e);\n            if (!closestThumb || !sliderEl)\n                return;\n            const target = e.target;\n            if (!isHTMLElement(target) || !sliderEl.contains(target)) {\n                return;\n            }\n            e.preventDefault();\n            activeThumb.set(closestThumb);\n            closestThumb.thumb.focus();\n            isActive.set(true);\n            pointerMove(e);\n        };\n        const pointerUp = () => {\n            isActive.set(false);\n        };\n        const unsub = executeCallbacks(addEventListener(document, 'pointerdown', pointerDown), addEventListener(document, 'pointerup', pointerUp), addEventListener(document, 'pointerleave', pointerUp), addEventListener(document, 'pointermove', pointerMove));\n        return () => {\n            unsub();\n        };\n    });\n    effect([step, min, max, value], function fixValue([$step, $min, $max, $value]) {\n        const isValidValue = (v) => {\n            const snappedValue = snapValueToStep(v, $min, $max, $step);\n            return snappedValue === v;\n        };\n        const gcv = (v) => {\n            return snapValueToStep(v, $min, $max, $step);\n        };\n        if ($value.some((v) => !isValidValue(v))) {\n            value.update((prev) => {\n                return prev.map(gcv);\n            });\n        }\n    });\n    return {\n        elements: {\n            root,\n            thumb,\n            range,\n            tick,\n        },\n        states: {\n            value,\n            ticks,\n        },\n        options,\n    };\n};\n", "import { addMeltEventListener, builder, createElHelpers, disabledAttr, kbd, omit, overridable, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { get, writable } from 'svelte/store';\nimport { executeCallbacks } from '../../internal/helpers/callbacks.js';\nconst defaults = {\n    defaultChecked: false,\n    disabled: false,\n    required: false,\n    name: '',\n    value: '',\n};\nconst { name } = createElHelpers('switch');\nexport function createSwitch(props) {\n    const propsWithDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(propsWithDefaults, 'checked'));\n    const { disabled, required, name: nameStore, value } = options;\n    const checkedWritable = propsWithDefaults.checked ?? writable(propsWithDefaults.defaultChecked);\n    const checked = overridable(checkedWritable, propsWithDefaults?.onCheckedChange);\n    function toggleSwitch() {\n        if (get(disabled))\n            return;\n        checked.update((prev) => !prev);\n    }\n    const root = builder(name(), {\n        stores: [checked, disabled, required],\n        returned: ([$checked, $disabled, $required]) => {\n            return {\n                'data-disabled': disabledAttr($disabled),\n                disabled: disabledAttr($disabled),\n                'data-state': $checked ? 'checked' : 'unchecked',\n                type: 'button',\n                role: 'switch',\n                'aria-checked': $checked ? 'true' : 'false',\n                'aria-required': $required ? 'true' : undefined,\n            };\n        },\n        action(node) {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                toggleSwitch();\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                if (e.key !== kbd.ENTER && e.key !== kbd.SPACE)\n                    return;\n                e.preventDefault();\n                toggleSwitch();\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const input = builder(name('input'), {\n        stores: [checked, nameStore, required, disabled, value],\n        returned: ([$checked, $name, $required, $disabled, $value]) => {\n            return {\n                type: 'checkbox',\n                'aria-hidden': true,\n                hidden: true,\n                tabindex: -1,\n                name: $name,\n                value: $value,\n                checked: $checked,\n                required: $required,\n                disabled: disabledAttr($disabled),\n                style: styleToString({\n                    position: 'absolute',\n                    opacity: 0,\n                    'pointer-events': 'none',\n                    margin: 0,\n                    transform: 'translateX(-100%)',\n                }),\n            };\n        },\n    });\n    return {\n        elements: {\n            root,\n            input,\n        },\n        states: {\n            checked,\n        },\n        options,\n    };\n}\n", "import { addMeltEventListener, builder, createElHelpers, disabledAttr, executeCallbacks, getDirectionalKeys, getElemDirection, isBrowser, isHTMLElement, kbd, last, next, omit, overridable, prev, toWritableStores, } from '../../internal/helpers/index.js';\nimport { get, writable } from 'svelte/store';\nconst defaults = {\n    orientation: 'horizontal',\n    activateOnFocus: true,\n    loop: true,\n    autoSet: true,\n};\nconst { name, selector } = createElHelpers('tabs');\nexport function createTabs(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'defaultValue', 'value', 'onValueChange', 'autoSet'));\n    const { orientation, activateOnFocus, loop } = options;\n    const valueWritable = withDefaults.value ?? writable(withDefaults.defaultValue);\n    const value = overridable(valueWritable, withDefaults?.onValueChange);\n    let ssrValue = withDefaults.defaultValue ?? get(value);\n    // Root\n    const root = builder(name(), {\n        stores: orientation,\n        returned: ($orientation) => {\n            return {\n                'data-orientation': $orientation,\n            };\n        },\n    });\n    // List\n    const list = builder(name('list'), {\n        stores: orientation,\n        returned: ($orientation) => {\n            return {\n                role: 'tablist',\n                'aria-orientation': $orientation,\n                'data-orientation': $orientation,\n            };\n        },\n    });\n    const parseTriggerProps = (props) => {\n        if (typeof props === 'string') {\n            return { value: props };\n        }\n        else {\n            return props;\n        }\n    };\n    const trigger = builder(name('trigger'), {\n        stores: [value, orientation],\n        returned: ([$value, $orientation]) => {\n            return (props) => {\n                const { value: tabValue, disabled } = parseTriggerProps(props);\n                if (!$value && !ssrValue && withDefaults.autoSet) {\n                    ssrValue = tabValue;\n                    $value = tabValue;\n                    value.set(tabValue);\n                }\n                const sourceOfTruth = isBrowser ? $value : ssrValue;\n                const isActive = sourceOfTruth === tabValue;\n                return {\n                    type: 'button',\n                    role: 'tab',\n                    'data-state': isActive ? 'active' : 'inactive',\n                    tabindex: isActive ? 0 : -1,\n                    'data-value': tabValue,\n                    'data-orientation': $orientation,\n                    'data-disabled': disabledAttr(disabled),\n                    disabled: disabledAttr(disabled),\n                };\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'focus', () => {\n                const disabled = node.dataset.disabled === 'true';\n                const tabValue = node.dataset.value;\n                if (get(activateOnFocus) && !disabled && tabValue !== undefined) {\n                    value.set(tabValue);\n                }\n            }), addMeltEventListener(node, 'click', (e) => {\n                node.focus();\n                e.preventDefault();\n                const disabled = node.dataset.disabled === 'true';\n                if (disabled)\n                    return;\n                const tabValue = node.dataset.value;\n                node.focus();\n                if (tabValue !== undefined) {\n                    value.set(tabValue);\n                }\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                const tabValue = node.dataset.value;\n                if (!tabValue)\n                    return;\n                const el = e.currentTarget;\n                if (!isHTMLElement(el))\n                    return;\n                const rootEl = el.closest(selector());\n                if (!isHTMLElement(rootEl))\n                    return;\n                const $loop = get(loop);\n                const triggers = Array.from(rootEl.querySelectorAll('[role=\"tab\"]')).filter((trigger) => isHTMLElement(trigger));\n                const enabledTriggers = triggers.filter((el) => !el.hasAttribute('data-disabled'));\n                const triggerIdx = enabledTriggers.findIndex((el) => el === e.target);\n                const dir = getElemDirection(rootEl);\n                const { nextKey, prevKey } = getDirectionalKeys(dir, get(orientation));\n                if (e.key === nextKey) {\n                    e.preventDefault();\n                    const nextEl = next(enabledTriggers, triggerIdx, $loop);\n                    nextEl.focus();\n                }\n                else if (e.key === prevKey) {\n                    e.preventDefault();\n                    const prevEl = prev(enabledTriggers, triggerIdx, $loop);\n                    prevEl.focus();\n                }\n                else if (e.key === kbd.ENTER || e.key === kbd.SPACE) {\n                    e.preventDefault();\n                    value.set(tabValue);\n                }\n                else if (e.key === kbd.HOME) {\n                    e.preventDefault();\n                    const firstTrigger = enabledTriggers[0];\n                    firstTrigger.focus();\n                }\n                else if (e.key === kbd.END) {\n                    e.preventDefault();\n                    const lastTrigger = last(enabledTriggers);\n                    lastTrigger.focus();\n                }\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    // Content\n    const content = builder(name('content'), {\n        stores: value,\n        returned: ($value) => {\n            return (tabValue) => {\n                return {\n                    role: 'tabpanel',\n                    // TODO: improve\n                    'aria-labelledby': tabValue,\n                    hidden: isBrowser\n                        ? $value === tabValue\n                            ? undefined\n                            : true\n                        : ssrValue === tabValue\n                            ? undefined\n                            : true,\n                    tabindex: 0,\n                };\n            };\n        },\n    });\n    return {\n        elements: {\n            root,\n            list,\n            trigger,\n            content,\n        },\n        states: {\n            value,\n        },\n        options,\n    };\n}\n", "import { addMeltEventListener, builder, createElHelpers, executeCallbacks, } from '../../internal/helpers';\nimport { dequal } from 'dequal';\nimport { derived, get, writable } from 'svelte/store';\nimport { safeOnMount } from '../../internal/helpers/lifecycle';\nconst defaults = {\n    exclude: ['h1'],\n    scrollOffset: 0,\n    scrollBehaviour: 'smooth',\n    activeType: 'lowest',\n};\nexport function createTableOfContents(args) {\n    const argsWithDefaults = { ...defaults, ...args };\n    const { selector, exclude, activeType, scrollBehaviour, scrollOffset, headingFilterFn, scrollFn, } = argsWithDefaults;\n    const { name } = createElHelpers('table-of-contents');\n    // Variables\n    const possibleHeadings = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n    let headingsList = [];\n    let elementsList = [];\n    /** Lookup to see which heading an element belongs to. */\n    let elementHeadingLU = {};\n    /** Lookup to see which parent headings a heading has. */\n    let headingParentsLU = {};\n    /** List of the active parent indexes. */\n    const activeParentIdxs = writable([]);\n    /** List of the indexes of the visible elements. */\n    const visibleElementIdxs = writable([]);\n    let elementTarget = null;\n    let mutationObserver = null;\n    let observer = null;\n    const observer_threshold = 0.01;\n    // Stores\n    const activeHeadingIdxs = writable([]);\n    const headingsTree = writable([]);\n    // Helpers\n    function generateInitialLists(elementTarget) {\n        let headingsList = [];\n        let elementsList = [];\n        const includedHeadings = possibleHeadings.filter((h) => !exclude.includes(h));\n        const targetHeaders = elementTarget?.querySelectorAll(includedHeadings.join(', '));\n        // Create a unique ID for each heading which doesn't have one.\n        targetHeaders?.forEach((el) => {\n            if (!el.id) {\n                const uniqueID = el.innerText\n                    .replaceAll(/[^a-zA-Z0-9 ]/g, '')\n                    .replaceAll(' ', '-')\n                    .toLowerCase();\n                el.id = `${uniqueID}`;\n            }\n            headingsList.push(el);\n        });\n        headingsList = [...headingsList];\n        if (headingFilterFn) {\n            headingsList = headingsList.filter((heading) => headingFilterFn(heading));\n        }\n        // Get all elements in our elementTarget and convert it from an HTMLCollection to an array.\n        elementsList = [].slice.call(elementTarget?.getElementsByTagName('*'));\n        // Filter the array, so that only the allowed headings and elements with no children are in the list to avoid problems with elements that wrap around others.\n        elementsList = elementsList.filter((el) => includedHeadings.includes(el.nodeName.toLowerCase()) || el.children.length === 0);\n        // We don't care about elements before our first header element, so we can remove those as well.\n        elementsList.splice(0, elementsList.indexOf(headingsList[0]));\n        return {\n            headingsList,\n            elementsList,\n        };\n    }\n    /**\n     * Create a tree view of our headings so that the hierarchy is represented.\n     * @param arr An array of heading elements.\n     * @param startIndex The parent elements original index in the array.\n     */\n    function createTree(arr, startIndex = 0) {\n        const tree = [];\n        let i = 0;\n        while (i < arr.length) {\n            const node = {\n                title: arr[i].innerText,\n                index: startIndex + i,\n                id: arr[i].id,\n                node: arr[i],\n                children: [],\n            };\n            let j = i + 1;\n            while (j < arr.length &&\n                parseInt(arr[j].tagName.charAt(1)) > parseInt(arr[i].tagName.charAt(1))) {\n                j++;\n            }\n            // Recursive call.\n            node.children = createTree(arr.slice(i + 1, j), startIndex + i + 1);\n            tree.push(node);\n            i = j;\n        }\n        return tree;\n    }\n    /**\n     * Scrolls to the element specified by the selector.\n     * The offset and scroll behaviour are determined by the\n     * builder arguments.\n     *\n     * Source: https://stackoverflow.com/questions/49820013/javascript-scrollintoview-smooth-scroll-and-offset?answertab=scoredesc#tab-top\n     *\n     * @param selector The id of the element.\n     */\n    function scrollToTargetAdjusted(selector) {\n        const element = document.getElementById(selector);\n        if (element) {\n            const elementPosition = element.getBoundingClientRect().top;\n            const offsetPosition = elementPosition + window.scrollY - scrollOffset;\n            window.scrollTo({\n                top: offsetPosition,\n                behavior: scrollBehaviour,\n            });\n        }\n    }\n    const shouldHighlightParents = activeType === 'highest-parents' ||\n        activeType === 'lowest-parents' ||\n        activeType === 'all-parents';\n    function handleElementObservation(entries) {\n        // Iterate through all elements that crossed the observer_threshold.\n        for (let i = 0; i < entries.length; i++) {\n            // Get the index of the observed element in our elementsList, as well as the ToC heading it belongs to.\n            const el_idx = elementsList.indexOf(entries[i].target);\n            const toc_idx = elementHeadingLU[el_idx];\n            let tempVisibleElementIdxs = get(visibleElementIdxs);\n            if (entries[i].intersectionRatio >= observer_threshold) {\n                // Only add the observed element to the visibleElementIdxs list if it isn't added yet.\n                if (tempVisibleElementIdxs.indexOf(el_idx) === -1) {\n                    tempVisibleElementIdxs = [...tempVisibleElementIdxs, el_idx];\n                    visibleElementIdxs.set(tempVisibleElementIdxs);\n                    // Only add active parents if parent headings should be highlighted.\n                    if (shouldHighlightParents && headingParentsLU[toc_idx]) {\n                        activeParentIdxs.update((prev) => {\n                            return [...prev, ...headingParentsLU[toc_idx]];\n                        });\n                    }\n                }\n            }\n            else {\n                // Remove the observed element from the visibleElementIdxs list if the intersection ratio is below the threshold.\n                tempVisibleElementIdxs = tempVisibleElementIdxs.filter((item) => item !== el_idx);\n                visibleElementIdxs.set(tempVisibleElementIdxs);\n                // Remove all parents of obsIndex from the activeParentIdxs list.\n                if (shouldHighlightParents && headingParentsLU[toc_idx]) {\n                    activeParentIdxs.update((prev) => {\n                        const newArr = [...prev];\n                        headingParentsLU[toc_idx]?.forEach((parent) => {\n                            const index = newArr.indexOf(parent);\n                            newArr.splice(index, 1);\n                        });\n                        return newArr;\n                    });\n                }\n            }\n        }\n        const allActiveHeaderIdxs = Array.from(new Set(get(visibleElementIdxs).map((idx) => elementHeadingLU[idx])));\n        let activeHeaderIdxs;\n        if (allActiveHeaderIdxs.length === 0) {\n            activeHeaderIdxs = [];\n        }\n        else {\n            switch (activeType) {\n                case 'highest':\n                    activeHeaderIdxs = [Math.min(...allActiveHeaderIdxs)];\n                    break;\n                case 'lowest':\n                    activeHeaderIdxs = [Math.max(...allActiveHeaderIdxs)];\n                    break;\n                case 'all':\n                    activeHeaderIdxs = allActiveHeaderIdxs;\n                    break;\n                case 'all-parents': {\n                    const parentIdxs = allActiveHeaderIdxs.flatMap((idx) => headingParentsLU[idx] ?? []);\n                    activeHeaderIdxs = [...allActiveHeaderIdxs, ...parentIdxs];\n                    break;\n                }\n                default: {\n                    const activeHeaderIdx = activeType === 'highest-parents'\n                        ? Math.min(...allActiveHeaderIdxs)\n                        : Math.max(...allActiveHeaderIdxs);\n                    if (headingParentsLU[activeHeaderIdx]) {\n                        activeHeaderIdxs = [...headingParentsLU[activeHeaderIdx], activeHeaderIdx];\n                    }\n                    else {\n                        activeHeaderIdxs = [activeHeaderIdx];\n                    }\n                }\n            }\n        }\n        // Set store to active indexes.\n        activeHeadingIdxs.set(activeHeaderIdxs);\n    }\n    function initialization() {\n        observer?.disconnect();\n        /** Get all parents for each heading element, by checking\n         *  which previous headings in the list have a lower H value,\n         *  so H1 < H2 < H3 < ...\n         */\n        headingsList.forEach((h, i) => {\n            headingParentsLU[i] = null;\n            let current_heading = h.tagName;\n            let parents = [];\n            for (let j = i - 1; j >= 0; j--) {\n                if (headingsList[j].tagName < current_heading) {\n                    current_heading = headingsList[j].tagName;\n                    parents = [...parents, j];\n                }\n            }\n            headingParentsLU[i] = parents.length > 0 ? parents : null;\n            // Find all elements between the current heading and the next one and assign them the current heading.\n            const startIndex = elementsList.indexOf(headingsList[i]);\n            const endIndex = i !== headingsList.length - 1\n                ? elementsList.indexOf(headingsList[i + 1])\n                : elementsList.length;\n            for (let j = startIndex; j < endIndex; j++) {\n                elementHeadingLU[j] = i;\n            }\n        });\n        headingsTree.set(createTree(headingsList));\n        if (activeType !== 'none') {\n            // Create observer and observe all elements.\n            observer = new IntersectionObserver(handleElementObservation, {\n                root: null,\n                threshold: observer_threshold,\n            });\n            elementsList.forEach((el) => observer?.observe(el));\n        }\n    }\n    function mutationHandler() {\n        const newElementTarget = document.querySelector(selector);\n        if (!newElementTarget)\n            return;\n        const { headingsList: newHeadingsList, elementsList: newElementsList } = generateInitialLists(newElementTarget);\n        if (dequal(headingsList, newHeadingsList))\n            return;\n        // Update lists and LUs and re-run initialization.\n        headingsList = newHeadingsList;\n        elementsList = newElementsList;\n        headingParentsLU = {};\n        elementHeadingLU = {};\n        initialization();\n    }\n    safeOnMount(() => {\n        elementTarget = document.querySelector(selector);\n        if (!elementTarget)\n            return;\n        ({ headingsList, elementsList } = generateInitialLists(elementTarget));\n        initialization();\n        mutationObserver = new MutationObserver(mutationHandler);\n        mutationObserver.observe(elementTarget, { childList: true, subtree: true });\n        return () => {\n            observer?.disconnect();\n            mutationObserver?.disconnect();\n        };\n    });\n    // Elements\n    const item = builder(name('item'), {\n        stores: activeHeadingIdxs,\n        returned: ($activeHeadingIdxs) => {\n            return (id) => {\n                const idx = headingsList.findIndex((heading) => heading.id === id);\n                const active = $activeHeadingIdxs.includes(idx);\n                return {\n                    'data-id': id,\n                    'data-active': active ? '' : undefined,\n                };\n            };\n        },\n        action: (node) => {\n            const id = node.getAttribute('data-id');\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', (e) => {\n                e.preventDefault();\n                if (scrollFn) {\n                    scrollFn(`${id}`);\n                }\n                else {\n                    scrollToTargetAdjusted(`${id}`);\n                }\n                // Add items hash to URL\n                if (id) {\n                    window.location.hash = id;\n                }\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    // Helpers\n    const isActive = derived(activeHeadingIdxs, ($activeHeadingIdxs) => {\n        return (headingId) => {\n            const idx = headingsList.findIndex((heading) => heading.id === headingId);\n            return $activeHeadingIdxs.includes(idx);\n        };\n    });\n    return {\n        elements: {\n            item,\n        },\n        states: {\n            activeHeadingIdxs,\n            headingsTree,\n        },\n        helpers: {\n            isActive,\n        },\n    };\n}\n", "import { getElementByMeltId, isHTMLElement, isHTMLInputElement, } from '../../internal/helpers/index.js';\nexport function focusInput(id, pos = 'default') {\n    const inputEl = getElementByMeltId(id);\n    if (!isHTMLInputElement(inputEl))\n        return;\n    inputEl.focus();\n    if (pos === 'start') {\n        inputEl.setSelectionRange(0, 0);\n    }\n    else if (pos === 'end') {\n        inputEl.setSelectionRange(inputEl.value.length, inputEl.value.length);\n    }\n}\nexport function setSelectedFromEl(el, selected) {\n    if (!el) {\n        selected.set(null);\n        return;\n    }\n    selected.set({\n        id: el.getAttribute('data-tag-id') ?? '',\n        value: el.getAttribute('data-tag-value') ?? '',\n    });\n}\nexport function highlightText(query) {\n    const el = document.querySelector(query);\n    if (!isHTMLElement(el))\n        return;\n    el.focus();\n    const range = document.createRange();\n    range.selectNodeContents(el);\n    const selection = window.getSelection();\n    if (selection) {\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n}\n", "import { builder, createElHelpers, effect, executeCallbacks, generateId, getElementByMeltId, isBrowser, isHTMLElement, kbd, omit, overridable, styleToString, toWritableStores, addMeltEventListener, disabledAttr, } from '../../internal/helpers/index.js';\nimport { derived, get, readonly, writable } from 'svelte/store';\nimport { focusInput, highlightText, setSelectedFromEl } from './helpers.js';\nimport { tick } from 'svelte';\nimport { generateIds } from '../../internal/helpers/id';\nconst defaults = {\n    placeholder: '',\n    disabled: false,\n    editable: true,\n    defaultTags: [],\n    unique: false,\n    trim: true,\n    blur: 'nothing',\n    addOnPaste: false,\n    maxTags: undefined,\n    allowed: [],\n    denied: [],\n    add: undefined,\n    remove: undefined,\n    update: undefined,\n};\nconst { name, attribute, selector } = createElHelpers('tags-input');\nexport function createTagsInput(props) {\n    const withDefaults = { ...defaults, ...props };\n    const meltIds = generateIds(['root', 'input']);\n    const options = toWritableStores(omit(withDefaults, 'tags'));\n    const { placeholder, disabled, editable, unique, trim, blur, addOnPaste, allowed, denied, add, remove, update, maxTags, } = options;\n    // A store representing the current input value. A readable version is exposed to the\n    // user\n    const inputValue = writable('');\n    // True when the input is invalid\n    const inputInvalid = writable(false);\n    // A store representing the current edit value.\n    const editValue = writable('');\n    // Tags store of type Tag[]\n    //\n    // `withDefaults.tags` can be\n    //   - undefined => set empty []\n    //   - string[]  => generate Tag[] from string[]\n    //   - Tag[]     => set Tag[]\n    const tagsWritable = withDefaults.tags ??\n        writable(withDefaults.defaultTags && withDefaults.defaultTags.length > 0\n            ? typeof withDefaults.defaultTags[0] === 'string'\n                ? withDefaults.defaultTags.map((tag) => ({ id: generateId(), value: tag }))\n                : withDefaults.defaultTags\n            : [] // if undefined)\n        );\n    const tags = overridable(tagsWritable, withDefaults?.onTagsChange);\n    // Selected tag store. When `null`, no tag is selected\n    const selected = writable(withDefaults.selected ?? null);\n    const editing = writable(null);\n    // Run validation checks and if a validation fails return false immediately\n    const isInputValid = (v) => {\n        const $tags = get(tags);\n        const $editing = get(editing);\n        const $allowed = get(allowed);\n        const $denied = get(denied);\n        const $maxTags = get(maxTags);\n        // Trim the validation value before validations\n        if (get(trim))\n            v = v.trim();\n        // Tag uniqueness\n        if (get(unique) && $editing?.value !== v) {\n            const index = $tags.findIndex((tag) => tag.value === v);\n            if (index >= 0)\n                return false;\n        }\n        // Allowed list is populated and this value is not in it\n        if ($allowed && $allowed.length > 0 && !$allowed.includes(v))\n            return false;\n        // Deny list is populated and this value is in it\n        if ($denied && $denied.length > 0 && $denied.includes(v))\n            return false;\n        if ($maxTags && $maxTags > 0 && $tags.length >= $maxTags)\n            return false;\n        return true;\n    };\n    // Add a tag to the $tags store. Calls `$options.add()` if set\n    const addTag = async (v) => {\n        const $add = get(add);\n        let workingTag = { id: '', value: v };\n        if ($add) {\n            try {\n                const res = await $add(v);\n                if (typeof res === 'string')\n                    workingTag.value = res;\n                else\n                    workingTag = res;\n                if (!workingTag.id)\n                    workingTag.id = generateId();\n            }\n            catch {\n                return false;\n            }\n        }\n        else {\n            workingTag.id = generateId();\n        }\n        // Trim the value, only after the user defined add function\n        if (get(trim))\n            workingTag.value = workingTag.value.trim();\n        // if it's not valid we don't add it to the tags list\n        if (!isInputValid(workingTag.value))\n            return false;\n        tags.update((current) => {\n            current.push(workingTag);\n            return current;\n        });\n        return true;\n    };\n    // Update a tag in the $tags store. Calls `$options.update()` if set\n    async function updateTag(tag, select = false) {\n        const $update = get(update);\n        // Store the id, incase it changes during the update\n        const oldId = tag.id;\n        let workingTag = tag;\n        if ($update) {\n            try {\n                const res = await $update(workingTag);\n                workingTag = res;\n                // If the id was wiped, give it a new one\n                if (!workingTag.id)\n                    workingTag.id = generateId();\n            }\n            catch {\n                return false;\n            }\n        }\n        // Trim the value, only after the user defined update function\n        if (get(trim))\n            workingTag.value = workingTag.value.trim();\n        // if it's not valid we don't add it to the tags list\n        if (!isInputValid(workingTag.value))\n            return false;\n        // Update the tag matching the old id\n        tags.update(($tags) => {\n            return $tags.map((t) => {\n                if (t.id === oldId) {\n                    return workingTag;\n                }\n                return t;\n            });\n        });\n        if (select)\n            selected.set(workingTag);\n        return true;\n    }\n    // Remove a tag from the $tags store. Calls `$options.remove()` if set\n    async function removeTag(t) {\n        const $remove = get(remove);\n        if ($remove) {\n            try {\n                if (!(await $remove(t)))\n                    return false;\n            }\n            catch {\n                return false;\n            }\n        }\n        const $tags = get(tags);\n        const index = $tags.findIndex((tag) => tag.id === t.id);\n        tags.update((t) => {\n            t.splice(index, 1);\n            return t;\n        });\n        return true;\n    }\n    const root = builder(name(''), {\n        stores: [disabled],\n        returned: ([$disabled]) => {\n            return {\n                'data-melt-id': meltIds.root,\n                'data-disabled': disabledAttr($disabled),\n                disabled: disabledAttr($disabled),\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'mousedown', (e) => {\n                // Focus on input when root is the target\n                const target = e.target;\n                if (!isHTMLElement(target))\n                    return;\n                if (target.hasAttribute(attribute())) {\n                    e.preventDefault();\n                    focusInput(meltIds.input);\n                }\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const input = builder(name('input'), {\n        stores: [disabled, placeholder],\n        returned: ([$disabled, $placeholder]) => {\n            return {\n                'data-melt-id': meltIds.input,\n                'data-disabled': disabledAttr($disabled),\n                disabled: disabledAttr($disabled),\n                placeholder: $placeholder,\n            };\n        },\n        action: (node) => {\n            const getTagsInfo = (id) => {\n                const rootEl = getElementByMeltId(meltIds.root);\n                let tagsEl = [];\n                let selectedIndex = -1;\n                let prevIndex = -1;\n                let nextIndex = -1;\n                if (rootEl) {\n                    tagsEl = Array.from(rootEl.querySelectorAll(selector('tag')));\n                    selectedIndex = tagsEl.findIndex((element) => element.getAttribute('data-tag-id') === id);\n                    prevIndex = selectedIndex - 1;\n                    nextIndex = selectedIndex + 1;\n                }\n                return {\n                    tagsEl,\n                    selectedIndex,\n                    prevIndex,\n                    nextIndex,\n                };\n            };\n            const unsub = executeCallbacks(addMeltEventListener(node, 'focus', () => {\n                // Set data-focus on root and input\n                const rootEl = getElementByMeltId(meltIds.root);\n                if (rootEl)\n                    rootEl.setAttribute('data-focus', '');\n                node.setAttribute('data-focus', '');\n            }), addMeltEventListener(node, 'blur', async () => {\n                // Clear data-focus from root and input\n                const rootEl = getElementByMeltId(meltIds.root);\n                if (rootEl)\n                    rootEl.removeAttribute('data-focus');\n                node.removeAttribute('data-focus');\n                // Clear selected tag\n                selected.set(null);\n                // Do nothing when input is empty\n                const value = node.value;\n                if (!value)\n                    return;\n                // Handle clear or add (if set)\n                const $blur = get(blur);\n                if ($blur === 'clear') {\n                    node.value = '';\n                }\n                else if ($blur === 'add') {\n                    if (isInputValid(value) && (await addTag(value))) {\n                        node.value = '';\n                        inputValue.set('');\n                    }\n                    else {\n                        inputInvalid.set(true);\n                    }\n                }\n            }), addMeltEventListener(node, 'paste', async (e) => {\n                // Do nothing when there is nothing to paste\n                if (!e.clipboardData)\n                    return;\n                const pastedText = e.clipboardData.getData('text');\n                if (!pastedText)\n                    return;\n                // Do nothing when addOnPaste is false\n                if (!get(addOnPaste))\n                    return;\n                // Update value with the pasted text or set invalid\n                if (isInputValid(pastedText) && (await addTag(pastedText))) {\n                    node.value = '';\n                }\n                else {\n                    inputInvalid.set(true);\n                }\n            }), addMeltEventListener(node, 'keydown', async (e) => {\n                const $selected = get(selected);\n                if ($selected) {\n                    // Check if a character is entered into the input\n                    if (e.key.length === 1) {\n                        selected.set(null);\n                    }\n                    else if (e.key === kbd.ARROW_LEFT) {\n                        // Move to the previous tag\n                        e.preventDefault();\n                        const { tagsEl, prevIndex } = getTagsInfo($selected.id);\n                        if (prevIndex >= 0) {\n                            setSelectedFromEl(tagsEl[prevIndex], selected);\n                        }\n                    }\n                    else if (e.key === kbd.ARROW_RIGHT) {\n                        // Move to the next element of tag or input\n                        e.preventDefault();\n                        const { tagsEl, nextIndex } = getTagsInfo($selected.id);\n                        if (nextIndex === -1 || nextIndex >= tagsEl.length) {\n                            selected.set(null);\n                            focusInput(meltIds.input, 'start');\n                        }\n                        else {\n                            setSelectedFromEl(tagsEl[nextIndex], selected);\n                        }\n                    }\n                    else if (e.key === kbd.HOME) {\n                        // Jump to the first tag or do nothing\n                        e.preventDefault();\n                        const { tagsEl } = getTagsInfo($selected.id);\n                        if (tagsEl.length > 0)\n                            setSelectedFromEl(tagsEl[0], selected);\n                    }\n                    else if (e.key === kbd.END) {\n                        // Jump to the input\n                        e.preventDefault();\n                        selected.set(null);\n                        focusInput(meltIds.input);\n                    }\n                    else if (e.key === kbd.DELETE) {\n                        // Delete this tag and move to the next element of tag or input\n                        e.preventDefault();\n                        const prevSelected = $selected;\n                        const { tagsEl, nextIndex } = getTagsInfo($selected.id);\n                        if (nextIndex === -1 || nextIndex >= tagsEl.length) {\n                            selected.set(null);\n                            focusInput(meltIds.input);\n                        }\n                        else {\n                            setSelectedFromEl(tagsEl[nextIndex], selected);\n                        }\n                        // Delete the previously selected tag\n                        if (!(await removeTag(prevSelected)))\n                            selected.set(prevSelected);\n                    }\n                    else if (e.key === kbd.BACKSPACE) {\n                        // Delete this tag and move to the previous tag. If this is the\n                        // first tag, delete and move to the next element of tag or input\n                        e.preventDefault();\n                        const prevSelected = $selected;\n                        const { tagsEl, nextIndex, prevIndex } = getTagsInfo($selected.id);\n                        if (prevIndex >= 0) {\n                            setSelectedFromEl(tagsEl[prevIndex], selected);\n                        }\n                        else {\n                            if (nextIndex === -1 || nextIndex >= tagsEl.length) {\n                                selected.set(null);\n                                focusInput(meltIds.input, 'start');\n                            }\n                            else {\n                                setSelectedFromEl(tagsEl[nextIndex], selected);\n                            }\n                        }\n                        // Delete the previously selected tag\n                        if (!(await removeTag(prevSelected)))\n                            selected.set(prevSelected);\n                    }\n                    else if (e.key === kbd.ENTER) {\n                        // Start editing this selected tag\n                        e.preventDefault();\n                        // Do nothing when there is no edit container\n                        const editEl = document.querySelector(selector('edit') + `[data-tag-id=\"${$selected.id}\"]`);\n                        if (!editEl)\n                            return;\n                        editing.set({ id: $selected.id, value: $selected.value });\n                        editEl.textContent = $selected.value;\n                        // Let it become visible then select all\n                        await tick();\n                        highlightText(selector('edit') + `[data-tag-id=\"${$selected.id}\"]`);\n                    }\n                }\n                else {\n                    if (e.key === kbd.ENTER) {\n                        // Add a new tag (if valid)\n                        e.preventDefault();\n                        const value = node.value;\n                        if (!value)\n                            return;\n                        if (isInputValid(value) && (await addTag(value))) {\n                            node.value = '';\n                            inputValue.set('');\n                        }\n                        else {\n                            inputInvalid.set(true);\n                        }\n                    }\n                    else if (node.selectionStart === 0 &&\n                        node.selectionEnd === 0 &&\n                        (e.key === kbd.ARROW_LEFT || e.key === kbd.BACKSPACE)) {\n                        // At the start of the input. Move the the last tag (if there is one)\n                        e.preventDefault();\n                        const { tagsEl } = getTagsInfo('');\n                        const lastTag = tagsEl.at(-1);\n                        if (!lastTag)\n                            return;\n                        setSelectedFromEl(lastTag, selected);\n                    }\n                }\n            }), addMeltEventListener(node, 'input', () => {\n                inputValue.set(node.value);\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const tag = builder(name('tag'), {\n        stores: [selected, editing, disabled, editable],\n        returned: ([$selected, $editing, $disabled, $editable]) => {\n            return (tag) => {\n                const disabled = $disabled || tag.disabled;\n                const editable = $editable && tag.editable !== false;\n                const selected = disabled ? undefined : $selected?.id === tag?.id;\n                const editing = editable ? $editing?.id === tag?.id : undefined;\n                return {\n                    'aria-hidden': editing,\n                    'aria-selected': selected,\n                    'data-tag-id': tag.id,\n                    'data-tag-value': tag.value,\n                    'data-selected': selected ? '' : undefined,\n                    'data-editable': editable ? '' : undefined,\n                    'data-editing': editing ? '' : undefined,\n                    'data-disabled': disabledAttr(disabled),\n                    disabled: disabledAttr(disabled),\n                    hidden: editing,\n                    tabindex: -1,\n                    style: editing\n                        ? styleToString({\n                            position: 'absolute',\n                            opacity: 0,\n                            'pointer-events': 'none',\n                            margin: 0,\n                        })\n                        : undefined,\n                };\n            };\n        },\n        action: (node) => {\n            const getElProps = () => {\n                const id = node.getAttribute('data-tag-id') ?? '';\n                return {\n                    id,\n                };\n            };\n            const unsub = executeCallbacks(addMeltEventListener(node, 'mousedown', (e) => {\n                // Do nothing when editing any tag\n                const $editing = get(editing);\n                if ($editing && $editing.id !== getElProps().id)\n                    return;\n                // Focus on the input and set this as the selected tag\n                focusInput(meltIds.input);\n                e.preventDefault();\n                setSelectedFromEl(node, selected);\n                editing.set(null);\n            }), addMeltEventListener(node, 'click', (e) => {\n                // Do nothing when editing any tag\n                const $editing = get(editing);\n                if ($editing && $editing.id === getElProps().id)\n                    return;\n                // Focus on the input and set this as the selected tag\n                focusInput(meltIds.input);\n                e.preventDefault();\n                setSelectedFromEl(node, selected);\n                editing.set(null);\n            }), addMeltEventListener(node, 'dblclick', async () => {\n                if (!isBrowser)\n                    return;\n                // Do nothing when it is not editable\n                if (!node.hasAttribute('data-editable'))\n                    return;\n                // Do nothing when there is no edit container\n                const editEl = document.querySelector(selector('edit') + `[data-tag-id=\"${getElProps().id}\"]`);\n                if (!editEl)\n                    return;\n                // Start editing this tag\n                const value = node.getAttribute('data-tag-value') ?? '';\n                editing.set({\n                    id: node.getAttribute('data-tag-id') ?? '',\n                    value,\n                });\n                editEl.textContent = value;\n                // Let it become visible then select all text\n                await tick();\n                highlightText(selector('edit') + `[data-tag-id=\"${getElProps().id}\"]`);\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const deleteTrigger = builder(name('delete-trigger'), {\n        stores: [selected, editing, disabled, editable],\n        returned: ([$selected, $editing, $disabled, $editable]) => {\n            return (tag) => {\n                const disabled = $disabled || tag.disabled;\n                const editable = $editable && tag.editable !== false;\n                const selected = disabled ? undefined : $selected?.id === tag?.id;\n                const editing = editable ? $editing?.id === tag?.id : undefined;\n                return {\n                    'aria-selected': selected,\n                    'data-tag-id': tag.id,\n                    'data-tag-value': tag.value,\n                    'data-selected': selected ? '' : undefined,\n                    'data-editing': editing ? '' : undefined,\n                    'data-disabled': disabledAttr(disabled),\n                    disabled: disabledAttr(disabled),\n                    tabindex: -1,\n                };\n            };\n        },\n        action: (node) => {\n            function handleDelete() {\n                if (node.hasAttribute('data-disabled'))\n                    return;\n                // Remove the tag and put focus on the input\n                const value = node.getAttribute('data-tag-value') ?? '';\n                const id = node.getAttribute('data-tag-id') ?? '';\n                removeTag({ id, value });\n                focusInput(meltIds.input);\n            }\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', (e) => {\n                // Do nothing when disabled\n                e.stopPropagation();\n                handleDelete();\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                if (e.key !== kbd.ENTER && e.key !== kbd.SPACE)\n                    return;\n                e.preventDefault();\n                handleDelete();\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const edit = builder(name('edit'), {\n        stores: [editing, editable],\n        returned: ([$editing, $editable]) => {\n            return (tag) => {\n                const editable = $editable;\n                const editing = editable ? $editing?.id === tag.id : undefined;\n                return {\n                    'aria-hidden': !editing,\n                    'data-tag-id': tag.id,\n                    'data-tag-value': tag.value,\n                    hidden: !editing ? true : undefined,\n                    contenteditable: editing,\n                    tabindex: -1,\n                    style: !editing\n                        ? styleToString({\n                            position: 'absolute',\n                            opacity: 0,\n                            'pointer-events': 'none',\n                            margin: 0,\n                        })\n                        : undefined,\n                };\n            };\n        },\n        action: (node) => {\n            const getElProps = () => {\n                const id = node.getAttribute('data-tag-id') ?? '';\n                const value = node.getAttribute('data-tag-value') ?? '';\n                return {\n                    id,\n                    value,\n                };\n            };\n            const unsub = executeCallbacks(addMeltEventListener(node, 'blur', () => {\n                if (node.hasAttribute('hidden'))\n                    return;\n                // Stop editing, reset the value to the original and clear an invalid state\n                editing.set(null);\n                node.textContent = getElProps().value;\n                getElementByMeltId(meltIds.root)?.removeAttribute('data-invalid-edit');\n                node.removeAttribute('data-invalid-edit');\n            }), addMeltEventListener(node, 'keydown', async (e) => {\n                if (node.hasAttribute('hidden'))\n                    return;\n                if (e.key === kbd.ENTER) {\n                    // Capture the edit value, validate and then update\n                    e.preventDefault();\n                    // Do nothing when the value is empty\n                    const value = node.textContent;\n                    if (!value)\n                        return;\n                    const t = { id: getElProps().id, value };\n                    if (isInputValid(value) && (await updateTag(t, true))) {\n                        node.textContent = t.value;\n                        editValue.set('');\n                        focusInput(meltIds.input);\n                    }\n                    else {\n                        getElementByMeltId(meltIds.root)?.setAttribute('data-invalid-edit', '');\n                        node.setAttribute('data-invalid-edit', '');\n                    }\n                }\n                else if (e.key === kbd.ESCAPE) {\n                    // Reset the value, clear the edit value store, set this tag as\n                    // selected and focus on input\n                    e.preventDefault();\n                    node.textContent = getElProps().value;\n                    editValue.set('');\n                    setSelectedFromEl(node, selected);\n                    focusInput(meltIds.input);\n                }\n            }), addMeltEventListener(node, 'input', () => {\n                if (node.hasAttribute('hidden'))\n                    return;\n                // Update the edit value store\n                editValue.set(node.textContent || '');\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    // Used to determine if a tag is selected\n    const isSelected = derived(selected, ($selected) => {\n        return (tag) => $selected?.id === tag.id;\n    });\n    // When the input value changes, set inputInvalid to false\n    effect(inputValue, () => {\n        inputInvalid.set(false);\n    });\n    // Flip the data-invalid attribute based upon the inputInvalid store\n    effect(inputInvalid, ($inputInvalid) => {\n        if ($inputInvalid) {\n            getElementByMeltId(meltIds.root)?.setAttribute('data-invalid', '');\n            getElementByMeltId(meltIds.input)?.setAttribute('data-invalid', '');\n        }\n        else {\n            getElementByMeltId(meltIds.root)?.removeAttribute('data-invalid');\n            getElementByMeltId(meltIds.input)?.removeAttribute('data-invalid');\n        }\n    });\n    // When the input valid changes, clear any potential invalid states\n    effect(editValue, () => {\n        if (!isBrowser)\n            return;\n        getElementByMeltId(meltIds.root)?.removeAttribute('data-invalid-edit');\n        const invalidEl = Array.from(document.querySelectorAll(selector('edit') + '[data-invalid-edit]'));\n        invalidEl.forEach((e) => {\n            e.removeAttribute('data-invalid-edit');\n        });\n    });\n    return {\n        ids: meltIds,\n        elements: {\n            root,\n            input,\n            deleteTrigger,\n            edit,\n            tag,\n        },\n        states: {\n            tags,\n            inputValue: readonly(inputValue),\n            inputInvalid: readonly(inputInvalid),\n            selected: readonly(selected),\n        },\n        helpers: {\n            isSelected,\n            isInputValid,\n            addTag,\n            updateTag,\n            removeTag,\n        },\n        options,\n    };\n}\n", "import { derived, get, writable, readonly } from 'svelte/store';\nimport { builder, createElHelpers, executeCallbacks, generateId, isTouch, noop, toWritableStores, addMeltEventListener, kbd, } from '../../internal/helpers/index.js';\nimport { usePortal } from '../../internal/actions/index.js';\nconst { name } = createElHelpers('toast');\nconst defaults = {\n    closeDelay: 5000,\n    type: 'foreground',\n};\nexport function createToaster(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(withDefaults);\n    const { closeDelay, type } = options;\n    const toastsMap = writable(new Map());\n    const addToast = (props) => {\n        const propsWithDefaults = {\n            closeDelay: get(closeDelay),\n            type: get(type),\n            ...props,\n        };\n        const ids = {\n            content: generateId(),\n            title: generateId(),\n            description: generateId(),\n        };\n        const timeout = propsWithDefaults.closeDelay === 0\n            ? null\n            : window.setTimeout(() => {\n                removeToast(ids.content);\n            }, propsWithDefaults.closeDelay);\n        const getPercentage = () => {\n            const { createdAt, pauseDuration, closeDelay, pausedAt } = toast;\n            if (closeDelay === 0)\n                return 0;\n            if (pausedAt) {\n                return (100 * (pausedAt - createdAt - pauseDuration)) / closeDelay;\n            }\n            else {\n                const now = performance.now();\n                return (100 * (now - createdAt - pauseDuration)) / closeDelay;\n            }\n        };\n        const toast = {\n            id: ids.content,\n            ids,\n            ...propsWithDefaults,\n            timeout,\n            createdAt: performance.now(),\n            pauseDuration: 0,\n            getPercentage,\n        };\n        toastsMap.update((currentMap) => {\n            currentMap.set(ids.content, toast);\n            return new Map(currentMap);\n        });\n        return toast;\n    };\n    const removeToast = (id) => {\n        toastsMap.update((currentMap) => {\n            currentMap.delete(id);\n            return new Map(currentMap);\n        });\n    };\n    const updateToast = (id, data) => {\n        toastsMap.update((currentMap) => {\n            const toast = currentMap.get(id);\n            if (!toast)\n                return currentMap;\n            currentMap.set(id, { ...toast, data });\n            return new Map(currentMap);\n        });\n    };\n    const content = builder(name('content'), {\n        stores: toastsMap,\n        returned: ($toasts) => {\n            return (id) => {\n                const t = $toasts.get(id);\n                if (!t)\n                    return null;\n                const { ...toast } = t;\n                return {\n                    id,\n                    role: 'alert',\n                    'aria-describedby': toast.ids.description,\n                    'aria-labelledby': toast.ids.title,\n                    'aria-live': toast.type === 'foreground' ? 'assertive' : 'polite',\n                    tabindex: -1,\n                };\n            };\n        },\n        action: (node) => {\n            let destroy = noop;\n            destroy = executeCallbacks(addMeltEventListener(node, 'pointerenter', (e) => {\n                if (isTouch(e))\n                    return;\n                toastsMap.update((currentMap) => {\n                    const currentToast = currentMap.get(node.id);\n                    if (!currentToast || currentToast.closeDelay === 0)\n                        return currentMap;\n                    if (currentToast.timeout !== null) {\n                        window.clearTimeout(currentToast.timeout);\n                    }\n                    currentToast.pausedAt = performance.now();\n                    return new Map(currentMap);\n                });\n            }), addMeltEventListener(node, 'pointerleave', (e) => {\n                if (isTouch(e))\n                    return;\n                toastsMap.update((currentMap) => {\n                    const currentToast = currentMap.get(node.id);\n                    if (!currentToast || currentToast.closeDelay === 0)\n                        return currentMap;\n                    const pausedAt = currentToast.pausedAt ?? currentToast.createdAt;\n                    const elapsed = pausedAt - currentToast.createdAt - currentToast.pauseDuration;\n                    const remaining = currentToast.closeDelay - elapsed;\n                    currentToast.timeout = window.setTimeout(() => {\n                        removeToast(node.id);\n                    }, remaining);\n                    currentToast.pauseDuration += performance.now() - pausedAt;\n                    currentToast.pausedAt = undefined;\n                    return new Map(currentMap);\n                });\n            }), () => {\n                removeToast(node.id);\n            });\n            return {\n                destroy,\n            };\n        },\n    });\n    const title = builder(name('title'), {\n        stores: toastsMap,\n        returned: ($toasts) => {\n            return (id) => {\n                const toast = $toasts.get(id);\n                if (!toast)\n                    return null;\n                return {\n                    id: toast.ids.title,\n                };\n            };\n        },\n    });\n    const description = builder(name('description'), {\n        stores: toastsMap,\n        returned: ($toasts) => {\n            return (id) => {\n                const toast = $toasts.get(id);\n                if (!toast)\n                    return null;\n                return {\n                    id: toast.ids.description,\n                };\n            };\n        },\n    });\n    const close = builder(name('close'), {\n        returned: () => {\n            return (id) => ({\n                type: 'button',\n                'data-id': id,\n            });\n        },\n        action: (node) => {\n            function handleClose() {\n                if (!node.dataset.id)\n                    return;\n                removeToast(node.dataset.id);\n            }\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                handleClose();\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                if (e.key !== kbd.ENTER && e.key !== kbd.SPACE)\n                    return;\n                e.preventDefault();\n                handleClose();\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const toasts = derived(toastsMap, ($toastsMap) => {\n        return Array.from($toastsMap.values());\n    });\n    return {\n        elements: {\n            content,\n            title,\n            description,\n            close,\n        },\n        states: {\n            toasts: readonly(toasts),\n        },\n        helpers: {\n            addToast,\n            removeToast,\n            updateToast,\n        },\n        actions: {\n            portal: usePortal,\n        },\n        options,\n    };\n}\n", "import { addMeltEventListener, builder, disabledAttr, executeCallbacks, kbd, omit, overridable, toWritableStores, } from '../../internal/helpers/index.js';\nimport { get, writable } from 'svelte/store';\nconst defaults = {\n    defaultPressed: false,\n    disabled: false,\n};\nexport function createToggle(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'pressed'));\n    const { disabled } = options;\n    const pressedWritable = withDefaults.pressed ?? writable(withDefaults.defaultPressed);\n    const pressed = overridable(pressedWritable, withDefaults?.onPressedChange);\n    function handleToggle() {\n        const $disabled = get(disabled);\n        if ($disabled)\n            return;\n        pressed.update((v) => !v);\n    }\n    const root = builder('toggle', {\n        stores: [pressed, disabled],\n        returned: ([$pressed, $disabled]) => {\n            return {\n                'data-disabled': disabledAttr($disabled),\n                disabled: disabledAttr($disabled),\n                'data-state': $pressed ? 'on' : 'off',\n                'aria-pressed': $pressed,\n                type: 'button',\n            };\n        },\n        action: (node) => {\n            const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                handleToggle();\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                if (e.key !== kbd.ENTER && e.key !== kbd.SPACE)\n                    return;\n                e.preventDefault();\n                handleToggle();\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    return {\n        elements: {\n            root,\n        },\n        states: {\n            pressed,\n        },\n        options,\n    };\n}\n", "import { addMeltEventListener, builder, createElHelpers, disabledAttr, executeCallbacks, getElemDirection, handleRovingFocus, isHTMLElement, kbd, noop, omit, overridable, toWritableStores, } from '../../internal/helpers/index.js';\nimport { derived, get, writable } from 'svelte/store';\nconst defaults = {\n    type: 'single',\n    orientation: 'horizontal',\n    loop: true,\n    rovingFocus: true,\n    disabled: false,\n    defaultValue: '',\n};\nconst { name, selector } = createElHelpers('toggle-group');\nexport const createToggleGroup = (props) => {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'value'));\n    const { type, orientation, loop, rovingFocus, disabled } = options;\n    const defaultValue = withDefaults.defaultValue\n        ? withDefaults.defaultValue\n        : withDefaults.type === 'single'\n            ? 'undefined'\n            : [];\n    const valueWritable = withDefaults.value ?? writable(defaultValue);\n    const value = overridable(valueWritable, withDefaults?.onValueChange);\n    const root = builder(name(), {\n        stores: orientation,\n        returned: ($orientation) => {\n            return {\n                role: 'group',\n                'data-orientation': $orientation,\n            };\n        },\n    });\n    const item = builder(name('item'), {\n        stores: [value, disabled, orientation, type],\n        returned: ([$value, $disabled, $orientation, $type]) => {\n            return (props) => {\n                const itemValue = typeof props === 'string' ? props : props.value;\n                const argDisabled = typeof props === 'string' ? false : !!props.disabled;\n                const disabled = $disabled || argDisabled;\n                const pressed = Array.isArray($value) ? $value.includes(itemValue) : $value === itemValue;\n                const isSingle = $type === 'single';\n                const isMultiple = $type === 'multiple' || $type === undefined;\n                return {\n                    disabled: disabledAttr(disabled),\n                    pressed,\n                    'data-orientation': $orientation,\n                    'data-disabled': disabledAttr(disabled),\n                    'data-state': pressed ? 'on' : 'off',\n                    'data-value': itemValue,\n                    'aria-pressed': isMultiple ? pressed : undefined,\n                    'aria-checked': isSingle ? pressed : undefined,\n                    type: 'button',\n                    role: isSingle ? 'radio' : undefined,\n                    tabindex: pressed ? 0 : -1,\n                };\n            };\n        },\n        action: (node) => {\n            let unsub = noop;\n            const parentGroup = node.closest(selector());\n            if (!isHTMLElement(parentGroup))\n                return {};\n            const items = Array.from(parentGroup.querySelectorAll(selector('item')));\n            const $value = get(value);\n            const anyPressed = Array.isArray($value) ? $value.length > 0 : $value !== null;\n            if (!anyPressed && items[0] === node) {\n                node.tabIndex = 0;\n            }\n            function getNodeProps() {\n                const itemValue = node.dataset.value;\n                const disabled = node.dataset.disabled === 'true';\n                return { value: itemValue, disabled };\n            }\n            function handleValueUpdate() {\n                const { value: itemValue, disabled } = getNodeProps();\n                if (itemValue === undefined || disabled)\n                    return;\n                value.update(($value) => {\n                    if (Array.isArray($value)) {\n                        if ($value.includes(itemValue)) {\n                            return $value.filter((i) => i !== itemValue);\n                        }\n                        $value.push(itemValue);\n                        return $value;\n                    }\n                    return $value === itemValue ? undefined : itemValue;\n                });\n            }\n            unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                handleValueUpdate();\n            }), addMeltEventListener(node, 'keydown', (e) => {\n                if (e.key === kbd.SPACE || e.key === kbd.ENTER) {\n                    e.preventDefault();\n                    handleValueUpdate();\n                    return;\n                }\n                if (!get(rovingFocus))\n                    return;\n                const el = e.currentTarget;\n                if (!isHTMLElement(el))\n                    return;\n                const root = el.closest(selector());\n                if (!isHTMLElement(root))\n                    return;\n                const items = Array.from(root.querySelectorAll(selector('item') + ':not([data-disabled])')).filter((item) => isHTMLElement(item));\n                const currentIndex = items.indexOf(el);\n                const dir = getElemDirection(el);\n                const $orientation = get(orientation);\n                const nextKey = {\n                    horizontal: dir === 'rtl' ? kbd.ARROW_LEFT : kbd.ARROW_RIGHT,\n                    vertical: kbd.ARROW_DOWN,\n                }[$orientation ?? 'horizontal'];\n                const prevKey = {\n                    horizontal: dir === 'rtl' ? kbd.ARROW_RIGHT : kbd.ARROW_LEFT,\n                    vertical: kbd.ARROW_UP,\n                }[$orientation ?? 'horizontal'];\n                const $loop = get(loop);\n                if (e.key === nextKey) {\n                    e.preventDefault();\n                    const nextIndex = currentIndex + 1;\n                    if (nextIndex >= items.length && $loop) {\n                        handleRovingFocus(items[0]);\n                    }\n                    else {\n                        handleRovingFocus(items[nextIndex]);\n                    }\n                }\n                else if (e.key === prevKey) {\n                    e.preventDefault();\n                    const prevIndex = currentIndex - 1;\n                    if (prevIndex < 0 && $loop) {\n                        handleRovingFocus(items[items.length - 1]);\n                    }\n                    else {\n                        handleRovingFocus(items[prevIndex]);\n                    }\n                }\n                else if (e.key === kbd.HOME) {\n                    e.preventDefault();\n                    handleRovingFocus(items[0]);\n                }\n                else if (e.key === kbd.END) {\n                    e.preventDefault();\n                    handleRovingFocus(items[items.length - 1]);\n                }\n            }));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const isPressed = derived(value, ($value) => {\n        return (itemValue) => {\n            return Array.isArray($value) ? $value.includes(itemValue) : $value === itemValue;\n        };\n    });\n    return {\n        elements: {\n            root,\n            item,\n        },\n        states: {\n            value,\n        },\n        helpers: {\n            isPressed,\n        },\n        options,\n    };\n};\n", "import { addMeltEventListener, builder, createElHelpers, disabledAttr, executeCallbacks, handleRovingFocus, isHTMLElement, kbd, overridable, toWritableStores, } from '../../internal/helpers/index.js';\nimport { derived, get, writable } from 'svelte/store';\nconst defaults = {\n    loop: true,\n    orientation: 'horizontal',\n};\nconst { name, selector } = createElHelpers('toolbar');\nexport const createToolbar = (props) => {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(withDefaults);\n    const { loop, orientation } = options;\n    const root = builder(name(), {\n        stores: orientation,\n        returned: ($orientation) => {\n            return {\n                role: 'toolbar',\n                'data-orientation': $orientation,\n            };\n        },\n    });\n    const button = builder(name('button'), {\n        returned: () => ({\n            role: 'button',\n            type: 'button',\n            tabIndex: -1,\n        }),\n        action: (node) => {\n            const unsub = addMeltEventListener(node, 'keydown', handleKeyDown);\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const link = builder(name('link'), {\n        returned: () => ({\n            role: 'link',\n            'data-melt-toolbar-item': '',\n            tabIndex: -1,\n        }),\n        action: (node) => {\n            const unsub = addMeltEventListener(node, 'keydown', handleKeyDown);\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const separator = builder(name('separator'), {\n        stores: orientation,\n        returned: ($orientation) => {\n            return {\n                role: 'separator',\n                'data-orientation': $orientation === 'horizontal' ? 'vertical' : 'horizontal',\n                'aria-orientation': $orientation === 'horizontal' ? 'vertical' : 'horizontal',\n            };\n        },\n    });\n    const groupDefaults = {\n        type: 'single',\n        disabled: false,\n    };\n    const createToolbarGroup = (props) => {\n        const groupWithDefaults = { ...groupDefaults, ...props };\n        const options = toWritableStores(groupWithDefaults);\n        const { type, disabled } = options;\n        const defaultValue = groupWithDefaults.defaultValue\n            ? groupWithDefaults.defaultValue\n            : groupWithDefaults.type === 'single'\n                ? undefined\n                : [];\n        const valueWritable = groupWithDefaults.value ?? writable(defaultValue);\n        const value = overridable(valueWritable, groupWithDefaults?.onValueChange);\n        const { name } = createElHelpers('toolbar-group');\n        const group = builder(name(), {\n            stores: orientation,\n            returned: ($orientation) => {\n                return {\n                    role: 'group',\n                    'data-orientation': $orientation,\n                };\n            },\n        });\n        const item = builder(name('item'), {\n            stores: [disabled, type, value, orientation],\n            returned: ([$disabled, $type, $value, $orientation]) => {\n                return (props) => {\n                    const itemValue = typeof props === 'string' ? props : props.value;\n                    const argDisabled = typeof props === 'string' ? false : !!props.disabled;\n                    const disabled = $disabled || argDisabled;\n                    const pressed = Array.isArray($value) ? $value.includes(itemValue) : $value === itemValue;\n                    const isSingle = $type === 'single';\n                    const isMultiple = $type === 'multiple';\n                    return {\n                        disabled: disabledAttr(disabled),\n                        pressed,\n                        'data-orientation': $orientation,\n                        'data-disabled': disabledAttr(disabled),\n                        'data-value': itemValue,\n                        'data-state': pressed ? 'on' : 'off',\n                        'aria-checked': isSingle ? pressed : undefined,\n                        'aria-pressed': isMultiple ? pressed : undefined,\n                        type: 'button',\n                        role: isSingle ? 'radio' : undefined,\n                        'data-melt-toolbar-item': '',\n                    };\n                };\n            },\n            action: (node) => {\n                function getNodeProps() {\n                    const itemValue = node.dataset.value;\n                    const disabled = node.dataset.disabled === 'true';\n                    return { value: itemValue, disabled };\n                }\n                function handleValueUpdate() {\n                    const { value: itemValue, disabled } = getNodeProps();\n                    if (itemValue === undefined || disabled)\n                        return;\n                    value.update(($value) => {\n                        if (Array.isArray($value)) {\n                            if ($value.includes(itemValue)) {\n                                return $value.filter((i) => i !== itemValue);\n                            }\n                            $value.push(itemValue);\n                            return $value;\n                        }\n                        return $value === itemValue ? undefined : itemValue;\n                    });\n                }\n                const parentToolbar = node.closest('[data-melt-toolbar]');\n                if (!isHTMLElement(parentToolbar))\n                    return {};\n                const items = getToolbarItems(parentToolbar);\n                if (items[0] === node) {\n                    node.tabIndex = 0;\n                }\n                else {\n                    node.tabIndex = -1;\n                }\n                const unsub = executeCallbacks(addMeltEventListener(node, 'click', () => {\n                    handleValueUpdate();\n                }), addMeltEventListener(node, 'keydown', (e) => {\n                    if (e.key === kbd.ENTER || e.key === kbd.SPACE) {\n                        e.preventDefault();\n                        handleValueUpdate();\n                        return;\n                    }\n                    handleKeyDown(e);\n                }));\n                return {\n                    destroy: unsub,\n                };\n            },\n        });\n        const isPressed = derived(value, ($value) => {\n            return (itemValue) => {\n                return Array.isArray($value) ? $value.includes(itemValue) : $value === itemValue;\n            };\n        });\n        return {\n            elements: {\n                group,\n                item,\n            },\n            states: {\n                value,\n            },\n            helpers: {\n                isPressed,\n            },\n            options,\n        };\n    };\n    function getToolbarItems(element) {\n        return Array.from(element.querySelectorAll(`${selector('item')}, ${selector('button')}`)).filter((el) => isHTMLElement(el));\n    }\n    function handleKeyDown(e) {\n        const $orientation = get(orientation);\n        const $loop = get(loop);\n        const dir = 'ltr';\n        const nextKey = {\n            horizontal: dir === 'rtl' ? kbd.ARROW_LEFT : kbd.ARROW_RIGHT,\n            vertical: kbd.ARROW_DOWN,\n        }[$orientation ?? 'horizontal'];\n        const prevKey = {\n            horizontal: dir === 'rtl' ? kbd.ARROW_RIGHT : kbd.ARROW_LEFT,\n            vertical: kbd.ARROW_UP,\n        }[$orientation ?? 'horizontal'];\n        const el = e.currentTarget;\n        if (!isHTMLElement(el))\n            return;\n        const root = el.closest('[data-melt-toolbar]');\n        if (!isHTMLElement(root))\n            return;\n        const items = Array.from(root.querySelectorAll(`${selector('item')}, ${selector('button')}`)).filter((el) => isHTMLElement(el));\n        const currentIndex = items.indexOf(el);\n        if (e.key === nextKey) {\n            e.preventDefault();\n            const nextIndex = currentIndex + 1;\n            if (nextIndex >= items.length && $loop) {\n                handleRovingFocus(items[0]);\n            }\n            else {\n                handleRovingFocus(items[nextIndex]);\n            }\n        }\n        else if (e.key === prevKey) {\n            e.preventDefault();\n            const prevIndex = currentIndex - 1;\n            if (prevIndex < 0 && $loop) {\n                handleRovingFocus(items[items.length - 1]);\n            }\n            else {\n                handleRovingFocus(items[prevIndex]);\n            }\n        }\n        else if (e.key === kbd.HOME) {\n            e.preventDefault();\n            handleRovingFocus(items[0]);\n        }\n        else if (e.key === kbd.END) {\n            e.preventDefault();\n            handleRovingFocus(items[items.length - 1]);\n        }\n    }\n    return {\n        elements: {\n            root,\n            button,\n            separator,\n            link,\n        },\n        builders: {\n            createToolbarGroup,\n        },\n        options,\n    };\n};\n", "import { addEventListener, addMeltEventListener, builder, createElHelpers, effect, executeCallbacks, getPortalDestination, isBrowser, isTouch, kbd, makeHullFromElements, noop, omit, overridable, pointInPolygon, styleToString, toWritableStores, } from '../../internal/helpers/index.js';\nimport { useFloating, usePortal } from '../../internal/actions/index.js';\nimport { derived, get, writable } from 'svelte/store';\nimport { generateIds } from '../../internal/helpers/id';\nconst defaults = {\n    positioning: {\n        placement: 'bottom',\n    },\n    arrowSize: 8,\n    defaultOpen: false,\n    closeOnPointerDown: true,\n    openDelay: 1000,\n    closeDelay: 0,\n    forceVisible: false,\n    portal: 'body',\n    closeOnEscape: true,\n    disableHoverableContent: false,\n    group: undefined,\n};\nconst { name } = createElHelpers('tooltip');\n// Store a global map to get the currently open tooltip.\nconst groupMap = new Map();\nexport const tooltipIdParts = ['trigger', 'content'];\nexport function createTooltip(props) {\n    const withDefaults = { ...defaults, ...props };\n    const options = toWritableStores(omit(withDefaults, 'open', 'ids'));\n    const { positioning, arrowSize, closeOnPointerDown, openDelay, closeDelay, forceVisible, portal, closeOnEscape, disableHoverableContent, group, } = options;\n    const openWritable = withDefaults.open ?? writable(withDefaults.defaultOpen);\n    const open = overridable(openWritable, withDefaults?.onOpenChange);\n    const openReason = writable(null);\n    const ids = toWritableStores({ ...generateIds(tooltipIdParts), ...withDefaults.ids });\n    let clickedTrigger = false;\n    const getEl = (part) => {\n        if (!isBrowser)\n            return null;\n        return document.getElementById(get(ids[part]));\n    };\n    let openTimeout = null;\n    let closeTimeout = null;\n    function openTooltip(reason) {\n        if (closeTimeout) {\n            window.clearTimeout(closeTimeout);\n            closeTimeout = null;\n        }\n        if (!openTimeout) {\n            openTimeout = window.setTimeout(() => {\n                open.set(true);\n                // Don't override the reason if it's already set.\n                openReason.update((prev) => prev ?? reason);\n                openTimeout = null;\n            }, get(openDelay));\n        }\n    }\n    function closeTooltip(isBlur) {\n        if (openTimeout) {\n            window.clearTimeout(openTimeout);\n            openTimeout = null;\n        }\n        if (isBlur && isMouseInTooltipArea) {\n            // Normally when blurring the trigger, we want to close the tooltip.\n            // The exception is when the mouse is still in the tooltip area.\n            // In that case, we have to set the openReason to pointer, so that\n            // it can close when the mouse leaves the tooltip area.\n            openReason.set('pointer');\n            return;\n        }\n        if (!closeTimeout) {\n            closeTimeout = window.setTimeout(() => {\n                open.set(false);\n                openReason.set(null);\n                if (isBlur)\n                    clickedTrigger = false;\n                closeTimeout = null;\n            }, get(closeDelay));\n        }\n    }\n    const trigger = builder(name('trigger'), {\n        stores: [ids.content, ids.trigger],\n        returned: ([$contentId, $triggerId]) => {\n            return {\n                'aria-describedby': $contentId,\n                id: $triggerId,\n            };\n        },\n        action: (node) => {\n            const keydownHandler = (e) => {\n                if (get(closeOnEscape) && e.key === kbd.ESCAPE) {\n                    if (openTimeout) {\n                        window.clearTimeout(openTimeout);\n                        openTimeout = null;\n                    }\n                    open.set(false);\n                }\n            };\n            const unsub = executeCallbacks(addMeltEventListener(node, 'pointerdown', () => {\n                const $closeOnPointerDown = get(closeOnPointerDown);\n                if (!$closeOnPointerDown)\n                    return;\n                open.set(false);\n                clickedTrigger = true;\n                if (openTimeout) {\n                    window.clearTimeout(openTimeout);\n                    openTimeout = null;\n                }\n            }), addMeltEventListener(node, 'pointerenter', (e) => {\n                if (isTouch(e))\n                    return;\n                openTooltip('pointer');\n            }), addMeltEventListener(node, 'pointerleave', (e) => {\n                if (isTouch(e))\n                    return;\n                if (openTimeout) {\n                    window.clearTimeout(openTimeout);\n                    openTimeout = null;\n                }\n            }), addMeltEventListener(node, 'focus', () => {\n                if (clickedTrigger)\n                    return;\n                openTooltip('focus');\n            }), addMeltEventListener(node, 'blur', () => closeTooltip(true)), addMeltEventListener(node, 'keydown', keydownHandler), addEventListener(document, 'keydown', keydownHandler));\n            return {\n                destroy: unsub,\n            };\n        },\n    });\n    const isVisible = derived([open, forceVisible], ([$open, $forceVisible]) => {\n        return $open || $forceVisible;\n    });\n    const content = builder(name('content'), {\n        stores: [isVisible, portal, ids.content],\n        returned: ([$isVisible, $portal, $contentId]) => {\n            return {\n                role: 'tooltip',\n                hidden: $isVisible ? undefined : true,\n                tabindex: -1,\n                style: styleToString({\n                    display: $isVisible ? undefined : 'none',\n                }),\n                id: $contentId,\n                'data-portal': $portal ? '' : undefined,\n            };\n        },\n        action: (node) => {\n            let unsubFloating = noop;\n            let unsubPortal = noop;\n            const unsubDerived = effect([isVisible, positioning, portal], ([$isVisible, $positioning, $portal]) => {\n                const triggerEl = getEl('trigger');\n                if (!$isVisible || !triggerEl) {\n                    unsubPortal();\n                    unsubFloating();\n                    return;\n                }\n                const floatingReturn = useFloating(triggerEl, node, $positioning);\n                unsubFloating = floatingReturn.destroy;\n                if (!$portal) {\n                    unsubPortal();\n                    return;\n                }\n                const portalDest = getPortalDestination(node, $portal);\n                if (portalDest) {\n                    const portalReturn = usePortal(node, portalDest);\n                    if (portalReturn && portalReturn.destroy) {\n                        unsubPortal = portalReturn.destroy;\n                    }\n                }\n            });\n            const unsubEvents = executeCallbacks(addMeltEventListener(node, 'pointerenter', () => openTooltip('pointer')), addMeltEventListener(node, 'pointerdown', () => openTooltip('pointer')));\n            return {\n                destroy() {\n                    unsubEvents();\n                    unsubPortal();\n                    unsubFloating();\n                    unsubDerived();\n                },\n            };\n        },\n    });\n    const arrow = builder(name('arrow'), {\n        stores: arrowSize,\n        returned: ($arrowSize) => ({\n            'data-arrow': true,\n            style: styleToString({\n                position: 'absolute',\n                width: `var(--arrow-size, ${$arrowSize}px)`,\n                height: `var(--arrow-size, ${$arrowSize}px)`,\n            }),\n        }),\n    });\n    let isMouseInTooltipArea = false;\n    effect(open, ($open) => {\n        const currentGroup = get(group);\n        if (currentGroup === undefined || currentGroup === false) {\n            return;\n        }\n        if (!$open) {\n            if (groupMap.get(currentGroup) === open) {\n                // Tooltip is no longer open\n                groupMap.delete(currentGroup);\n            }\n            return;\n        }\n        // Close the currently open tooltip in the same group\n        // and set this tooltip as the open one.\n        const currentOpen = groupMap.get(currentGroup);\n        currentOpen?.set(false);\n        groupMap.set(currentGroup, open);\n    });\n    effect([open, openReason], ([$open, $openReason]) => {\n        if (!$open || !isBrowser)\n            return;\n        return executeCallbacks(addEventListener(document, 'mousemove', (e) => {\n            const contentEl = getEl('content');\n            const triggerEl = getEl('trigger');\n            if (!contentEl || !triggerEl)\n                return;\n            const polygonElements = get(disableHoverableContent) ? [triggerEl] : [triggerEl, contentEl];\n            const polygon = makeHullFromElements(polygonElements);\n            isMouseInTooltipArea = pointInPolygon({\n                x: e.clientX,\n                y: e.clientY,\n            }, polygon);\n            if ($openReason !== 'pointer')\n                return;\n            if (!isMouseInTooltipArea) {\n                closeTooltip();\n            }\n        }));\n    });\n    return {\n        ids,\n        elements: {\n            trigger,\n            content,\n            arrow,\n        },\n        states: { open },\n        options,\n    };\n}\n", "import { addMeltEventListener, builder, createElHelpers, executeCallbacks, getElementByMeltId, isHTMLElement, isHidden, isLetter, kbd, last, overridable, styleToString, } from '../../internal/helpers';\nimport { derived, writable } from 'svelte/store';\nimport { generateIds } from '../../internal/helpers/id';\nconst defaults = {\n    forceVisible: false,\n    defaultExpanded: [],\n};\nconst ATTRS = {\n    TABINDEX: 'tabindex',\n    EXPANDED: 'aria-expanded',\n    LABELLEDBY: 'aria-labelledby',\n    DATAID: 'data-id',\n};\nconst { name } = createElHelpers('tree-view');\nexport function createTreeView(args) {\n    const withDefaults = { ...defaults, ...args };\n    const { forceVisible } = withDefaults;\n    /**\n     * Track currently focused item in the tree.\n     */\n    const lastFocusedId = writable(null);\n    const selectedItem = writable(null);\n    const expandedWritable = withDefaults.expanded ?? writable(withDefaults.defaultExpanded);\n    const expanded = overridable(expandedWritable, withDefaults?.onExpandedChange);\n    const selectedId = derived([selectedItem], ([$selectedItem]) => {\n        return $selectedItem?.getAttribute('data-id');\n    });\n    /**\n     * Determines if the tree view item is selected.\n     * This is useful for displaying additional markup.\n     */\n    const isSelected = derived([selectedItem], ([$value]) => {\n        return (itemId) => $value?.getAttribute('data-id') === itemId;\n    });\n    /**\n     * Determines if a tree view item is collapsed or not.\n     * This is useful for displaying additional markup or using Svelte transitions\n     * on the group item.\n     */\n    const isExpanded = derived([expanded], ([$expanded]) => {\n        return (itemId) => $expanded.includes(itemId);\n    });\n    const metaIds = generateIds(['tree']);\n    const rootTree = builder(name(), {\n        returned: () => {\n            return {\n                role: 'tree',\n                'data-melt-id': metaIds.tree,\n            };\n        },\n    });\n    let isKeydown = false;\n    const item = builder(name('item'), {\n        stores: [expanded, selectedId, lastFocusedId],\n        returned: ([$expanded, $selectedId, $lastFocusedId]) => {\n            return (opts) => {\n                // Have some default options that can be passed to the create()\n                const { id, hasChildren } = opts;\n                let tabindex = 0;\n                if ($lastFocusedId !== null) {\n                    tabindex = $lastFocusedId === id ? 0 : -1;\n                }\n                return {\n                    role: 'treeitem',\n                    'aria-selected': $selectedId === id,\n                    'data-id': id,\n                    tabindex,\n                    'aria-expanded': hasChildren ? $expanded.includes(id) : undefined,\n                };\n            };\n        },\n        action: (node) => {\n            const unsubEvents = executeCallbacks(addMeltEventListener(node, 'keydown', (e) => {\n                const { key } = e;\n                const keyIsLetter = isLetter(key);\n                const keys = [\n                    kbd.ARROW_DOWN,\n                    kbd.ARROW_UP,\n                    kbd.ARROW_LEFT,\n                    kbd.ARROW_RIGHT,\n                    kbd.ENTER,\n                    kbd.SPACE,\n                    kbd.END,\n                    kbd.HOME,\n                    kbd.ASTERISK,\n                ];\n                if (!keys.includes(key) && !keyIsLetter) {\n                    return;\n                }\n                const rootEl = getElementByMeltId(metaIds.tree);\n                if (!rootEl || !isHTMLElement(node) || node.getAttribute('role') !== 'treeitem') {\n                    return;\n                }\n                const items = getItems();\n                const nodeIdx = items.findIndex((item) => item === node);\n                if (key !== kbd.ENTER && key !== kbd.SPACE) {\n                    e.preventDefault();\n                }\n                if (key === kbd.ENTER || key === kbd.SPACE) {\n                    // Select el\n                    updateSelectedElement(node);\n                    isKeydown = true;\n                }\n                else if (key === kbd.ARROW_DOWN && nodeIdx !== items.length - 1) {\n                    // Focus next el\n                    const nextItem = items[nodeIdx + 1];\n                    if (!nextItem)\n                        return;\n                    setFocusedItem(nextItem);\n                }\n                else if (key === kbd.ARROW_UP && nodeIdx !== 0) {\n                    // Focus previous el\n                    const prevItem = items[nodeIdx - 1];\n                    if (!prevItem)\n                        return;\n                    setFocusedItem(prevItem);\n                }\n                else if (key === kbd.HOME && nodeIdx !== 0) {\n                    // Focus first el\n                    const item = items[0];\n                    if (!item)\n                        return;\n                    setFocusedItem(item);\n                }\n                else if (key === kbd.END && nodeIdx != items.length - 1) {\n                    // Focus last el\n                    const item = last(items);\n                    if (!item)\n                        return;\n                    setFocusedItem(item);\n                }\n                else if (key === kbd.ARROW_LEFT) {\n                    if (elementIsExpanded(node)) {\n                        // Collapse group\n                        toggleChildrenElements(node);\n                    }\n                    else {\n                        // Focus parent group\n                        const parentGroup = node?.closest('[role=\"group\"]');\n                        const groupId = parentGroup?.getAttribute('data-group-id');\n                        const item = items.find((item) => item.getAttribute('data-id') === groupId);\n                        if (!item)\n                            return;\n                        setFocusedItem(item);\n                    }\n                }\n                else if (key === kbd.ARROW_RIGHT) {\n                    if (elementIsExpanded(node)) {\n                        // Focus first child\n                        const nextItem = items[nodeIdx + 1];\n                        if (!nextItem)\n                            return;\n                        setFocusedItem(nextItem);\n                    }\n                    else if (elementHasChildren(node)) {\n                        // Expand group\n                        toggleChildrenElements(node);\n                    }\n                }\n                else if (keyIsLetter) {\n                    /**\n                     * Check whether a value with the letter exists\n                     * after the current focused element and focus it,\n                     * if it does exist. If it does not exist, we check\n                     * previous values.\n                     */\n                    const values = items.map((item) => {\n                        return {\n                            value: item.textContent?.toLowerCase().trim(),\n                            id: item.getAttribute('data-id'),\n                        };\n                    });\n                    let nextFocusIdx = -1;\n                    // Check elements after currently focused one.\n                    let foundNextFocusable = values.slice(nodeIdx + 1).some((item, i) => {\n                        if (item.value?.toLowerCase()[0] === key) {\n                            nextFocusIdx = nodeIdx + 1 + i;\n                            return true;\n                        }\n                        return false;\n                    });\n                    if (!foundNextFocusable) {\n                        /**\n                         * Check elements before currently focused one,\n                         * if no index has been found yet.\n                         * */\n                        foundNextFocusable = values.slice(0, nodeIdx).some((item, i) => {\n                            if (item.value?.toLowerCase().at(0) === key) {\n                                nextFocusIdx = i;\n                                return true;\n                            }\n                            return false;\n                        });\n                    }\n                    if (foundNextFocusable && values[nextFocusIdx].id) {\n                        const nextFocusEl = items[nextFocusIdx];\n                        if (!nextFocusEl)\n                            return;\n                        setFocusedItem(nextFocusEl);\n                    }\n                }\n            }), addMeltEventListener(node, 'click', async () => {\n                updateSelectedElement(node);\n                setFocusedItem(node);\n                if (!isKeydown) {\n                    toggleChildrenElements(node);\n                }\n                isKeydown = false;\n            }), addMeltEventListener(node, 'focus', () => {\n                lastFocusedId.update((p) => node.getAttribute('data-id') ?? p);\n            }));\n            return {\n                destroy() {\n                    unsubEvents();\n                },\n            };\n        },\n    });\n    const group = builder(name('group'), {\n        stores: [expanded],\n        returned: ([$expanded]) => {\n            return (opts) => ({\n                role: 'group',\n                'data-group-id': opts.id,\n                hidden: !forceVisible && !$expanded.includes(opts.id) ? true : undefined,\n                style: styleToString({\n                    display: !forceVisible && !$expanded.includes(opts.id) ? 'none' : undefined,\n                }),\n            });\n        },\n    });\n    function setFocusedItem(el) {\n        lastFocusedId.update((p) => el.getAttribute('data-id') ?? p);\n        el.focus();\n    }\n    function updateSelectedElement(el) {\n        const id = el.getAttribute(ATTRS.DATAID);\n        if (!id)\n            return;\n        selectedItem.set(el);\n    }\n    function getItems() {\n        let items = [];\n        const rootEl = getElementByMeltId(metaIds.tree);\n        if (!rootEl)\n            return items;\n        // Select all 'treeitem' li elements within our root element.\n        items = Array.from(rootEl.querySelectorAll('[role=\"treeitem\"]')).filter((el) => !isHidden(el));\n        return items;\n    }\n    function getElementAttributes(el) {\n        const hasChildren = el.hasAttribute(ATTRS.EXPANDED);\n        const expanded = el.getAttribute(ATTRS.EXPANDED);\n        const dataId = el.getAttribute(ATTRS.DATAID);\n        return {\n            hasChildren,\n            expanded,\n            dataId,\n        };\n    }\n    function toggleChildrenElements(el) {\n        const { hasChildren, expanded: expandedAttr, dataId } = getElementAttributes(el);\n        if (!hasChildren || expandedAttr === null || dataId === null)\n            return;\n        if (expandedAttr === 'false') {\n            expanded.update((prev) => [...prev, dataId]);\n        }\n        else {\n            expanded.update((prev) => prev.filter((item) => item !== dataId));\n        }\n    }\n    function elementHasChildren(el) {\n        return el.hasAttribute(ATTRS.EXPANDED);\n    }\n    function elementIsExpanded(el) {\n        return el.getAttribute(ATTRS.EXPANDED) === 'true';\n    }\n    return {\n        ids: metaIds,\n        elements: {\n            tree: rootTree,\n            item,\n            group,\n        },\n        states: {\n            expanded,\n            selectedItem,\n        },\n        helpers: {\n            isExpanded,\n            isSelected,\n        },\n    };\n}\n"],
  "mappings": "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",
  "names": ["size", "name", "args", "attribute", "selector", "el", "next", "size", "fn", "stores", "defaults", "props", "disabled", "item", "defaults", "image", "defaults", "name", "value", "defaults", "name", "disabled", "config", "x", "y", "createFocusTrap", "defaultConfig", "createFocusTrap", "defaults", "name", "selector", "label", "disabled", "props", "selected", "arrow", "INTERACTION_KEYS", "name", "defaults", "name", "selector", "prev", "positioning", "arrowSize", "subTrigger", "defaults", "name", "selector", "arrow", "part", "prev", "next", "defaults", "name", "readonly", "disabled", "isOutsideVisibleMonths", "value", "prev", "next", "defaults", "name", "readonly", "props", "prev", "next", "segmentValues", "placeholder", "ids", "hourCycle", "defaults", "removeDescriptionElement", "defaults", "name", "removeDescriptionElement", "prev", "defaults", "name", "defaults", "prev", "createFocusTrap", "defaults", "arrow", "name", "defaults", "arrow", "name", "defaults", "props", "withDefaults", "options", "menu", "prev", "el", "page", "defaults", "name", "selector", "prevButton", "nextButton", "name", "selector", "defaults", "elIndex", "input", "defaults", "name", "prev", "arrow", "triggerEl", "defaults", "name", "defaults", "name", "selector", "item", "disabled", "props", "root", "el", "defaults", "name", "readonly", "disabled", "isOutsideVisibleMonths", "isSelectionStart", "isSelectionEnd", "value", "prev", "name", "defaults", "defaults", "name", "prev", "direction", "root", "thumb", "tick", "step", "min", "defaults", "name", "prev", "defaults", "name", "selector", "props", "trigger", "el", "defaults", "selector", "name", "elementTarget", "headingsList", "elementsList", "prev", "item", "defaults", "name", "selector", "tag", "t", "disabled", "editable", "selected", "editing", "name", "defaults", "props", "closeDelay", "defaults", "defaults", "name", "selector", "props", "disabled", "$value", "root", "items", "item", "defaults", "name", "selector", "props", "options", "disabled", "root", "el", "defaults", "name", "prev", "arrow", "defaults", "name", "item", "expanded", "prev"]
}
